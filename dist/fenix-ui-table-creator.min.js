define(["fenix-ui-pivotator","jquery","loglevel","underscore","fenix-ui-pivotator-utils"],function(__WEBPACK_EXTERNAL_MODULE_2__,__WEBPACK_EXTERNAL_MODULE_3__,__WEBPACK_EXTERNAL_MODULE_4__,__WEBPACK_EXTERNAL_MODULE_8__,__WEBPACK_EXTERNAL_MODULE_9__){return function(e){function t(a){if(i[a])return i[a].exports;var n=i[a]={exports:{},id:a,loaded:!1};return e[a].call(n.exports,n,n.exports,t),n.loaded=!0,n.exports}var i={};return t.m=e,t.c=i,t.p="",t(0)}([function(e,t,i){e.exports=i(1)},function(e,t,i){var a,n;a=[i(3),i(8),i(4),i(5),i(6),i(7),i(2),i(9)],n=function(e,t,a,n,o,r,s,l){"use strict";function d(t){a.info("FENIX Table"),a.info(t),i(10),e.extend(!0,this,r,{initial:t}),this._parseInput(t);var n=this._validateInput();return n===!0?(this._initVariables(),this._bindEventListeners(),this._renderTable(),this):(a.error("Impossible to create Table"),void a.error(n))}var h="./renderers/";return d.prototype.update=function(e){this.table.model=this.pivotator.pivot(this.model,e),this.table.update(e)},d.prototype.on=function(e,t,i){var a=i||this;return this.channels[e]||(this.channels[e]=[]),this.channels[e].push({context:a,callback:t}),this},d.prototype._trigger=function(e){if(!this.channels[e])return!1;for(var t=Array.prototype.slice.call(arguments,1),i=0,a=this.channels[e].length;i<a;i++){var n=this.channels[e][i];n.callback.apply(n.context,t)}return this},d.prototype._parseInput=function(){this.id=this.initial.id,this.$el=e(this.initial.el),this.model=this.initial.model;var t={};t.inputFormat=this.initial.inputFormat||"raw",t.aggregationFn=this.initial.aggregationFn,t.aggregations=this.initial.aggregations||[],t.columns=this.initial.columns||[],t.rows=this.initial.rows||[],t.derivedAttribute=this.initial.derivedAttribute,t.values=this.initial.values||[],this.initial.hasOwnProperty("groupedRow")?t.groupedRow=this.initial.groupedRow:t.groupedRow=!1,t.derived=this.initial.derived,t.formatter=this.initial.formatter,t.valueOutputType=this.initial.valueOutputType,t.showRowHeaders=this.initial.showRowHeaders,t.decimals=this.initial.decimals,t.showCode=this.initial.showCode,t.showFlag=this.initial.showFlag,t.showUnit=this.initial.showUnit,this.pivotatorConfig=t,this.type=this.initial.type||r.type,this.lang=this.initial.lang||r.lang,this.lang=this.lang.toUpperCase()},d.prototype._validateInput=function(){var e=!0,t=[];return this.id||(window.fx_table_id>=0?window.fx_table_id++:window.fx_table_id=0,this.id=String(window.fx_table_id),a.info("Set table id to: "+this.id)),this.$el||(t.push({code:n.MISSING_CONTAINER}),a.warn("Impossible to find table container")),0===this.$el.length&&(t.push({code:n.MISSING_CONTAINER}),a.warn("Impossible to find box container")),t.length>0?t:e},d.prototype._bindEventListeners=function(){},d.prototype._initVariables=function(){this.channels={},this.pivotator=new s,this.fenixTool=new l({lang:this.lang})},d.prototype._getPluginPath=function(t){var i,n=e.extend(!0,{},this.pluginRegistry),o=n[t];return o||a.error('Registration not found for "'+t+' plugin".'),o.path?i=o.path:a.error('Impossible to find path configuration for "'+t+' plugin".'),h+i},d.prototype._renderTable=function(){var t=this._getRenderer(this.type),i=e.extend(!0,{},this.initial,this.fenixTool.parseInput(this.model.metadata.dsd,this.pivotatorConfig)),a=this.pivotator.pivot(this.model,i),n=e.extend(!0,{},{pivotatorConfig:i,model:a,el:this.$el,lang:this.lang});this.table=new t(n),this._trigger("ready")},d.prototype._getEventName=function(e){return this.id.concat(e)},d.prototype._getRenderer=function(e){return i(33)(this._getPluginPath(e)+".js")},d.prototype._unbindEventListeners=function(){},d.prototype.dispose=function(){this.table.dispose(),this._unbindEventListeners()},d.prototype._callSelectorInstanceMethod=function(t,i,n,o){var r=this.table;return e.isFunction(r[i])?r[i](n,o):void a.error(t+" selector does not implement the mandatory "+i+"() fn")},d}.apply(t,a),!(void 0!==n&&(e.exports=n))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_2__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_3__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_4__},function(e,t,i){var a;a=function(){"use strict";var e="";return{MISSING_CONTAINER:e+"missing_container",INVALID_DATA:e+"invalid_data",READY_TIMEOUT:e+"ready_timeout"}}.call(t,i,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,i){var a;a=function(){"use strict";return{}}.call(t,i,t,e),!(void 0!==a&&(e.exports=a))},function(e,t,i){var a;a=function(){"use strict";return{type:"olap",lang:"EN",pluginRegistry:{olap:{path:"sigmagrid"}}}}.call(t,i,t,e),!(void 0!==a&&(e.exports=a))},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_8__},function(e,t){e.exports=__WEBPACK_EXTERNAL_MODULE_9__},function(e,t){},,,,,,,,,,,,,,,,,,,,,,,function(e,t,i){function a(e){return i(n(e))}function n(e){return o[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}var o={"./index.js":1,"./lib/sigmagrid.js":34,"./renderers/sigmagrid.js":35};a.keys=function(){return Object.keys(o)},a.resolve=n,e.exports=a,a.id=33},function(module,exports,__webpack_require__){var __WEBPACK_AMD_DEFINE_RESULT__;__WEBPACK_AMD_DEFINE_RESULT__=function(){var Sigma={};Sigma.Msg=Sigma.Msg||{};var SigmaMsg=Sigma.Msg;Sigma.Msg.Grid=Sigma.Msg.Grid||{},Sigma.Msg.Grid.en={LOCAL:"EN",ENCODING:"UTF-8",NO_DATA:"No Data",GOTOPAGE_BUTTON_TEXT:"Go To",FILTERCLEAR_TEXT:"Remove All Filters",SORTASC_TEXT:"Ascend",SORTDESC_TEXT:"Descend",SORTDEFAULT_TEXT:"Original",ERR_PAGENUM:"Page number must be an integer between 1 to #{1}.",EXPORT_CONFIRM:'This operation will affect all records of the whole table.\n\n( Press "Cancel" to limit scope to current page.)',OVER_MAXEXPORT:"Number of record exceeds #{1}, the maximum allowed.",PAGE_STATE:"#{1} - #{2} displayed,  #{3}pages #{4} records totally.",PAGE_STATE_FULL:"Page #{5}, #{1} - #{2} displayed,  #{3}pages #{4} records totally.",SHADOWROW_FAILED:"Relevant info not available",NEARPAGE_TITLE:"",WAITING_MSG:"Please wait...",NO_RECORD_UPDATE:"Nothing Modified",UPDATE_CONFIRM:"Are you sure to save them?",NO_MODIFIED:"Nothing Modified",PAGE_BEFORE:"Page",PAGE_AFTER:'<span id="page_after"></span>',PAGESIZE_BEFORE:"",PAGESIZE_AFTER:"Per Page",RECORD_UNIT:"",CHECK_ALL:"Check All",COLUMNS_HEADER:"Columns",DIAG_TITLE_FILTER:"Filter Options",DIAG_NO_FILTER:"No Filter",TEXT_ADD_FILTER:"Add",TEXT_CLEAR_FILTER:"Remove All",TEXT_OK:"OK",TEXT_DEL:"Delete",TEXT_CANCEL:"Cancel",TEXT_CLOSE:"Close",TEXT_UP:"Up",TEXT_DOWN:"Down",NOT_SAVE:'Do you want to save the changes? \n Click "Cancel" to discard.',DIAG_TITLE_CHART:"Chart",CHANGE_SKIN:"Skins",STYLE_NAME_DEFAULT:"Classic",STYLE_NAME_PINK:"Pink",STYLE_NAME_VISTA:"Vista",STYLE_NAME_MAC:"Mac",MENU_FREEZE_COL:"Lock Columns",MENU_SHOW_COL:"Hide Columns",MENU_GROUP_COL:"Group Span",TOOL_RELOAD:"Refresh",TOOL_ADD:"Add",TOOL_DEL:"Delete",TOOL_SAVE:"Save",TOOL_PRINT:"Print",TOOL_XLS:"Export to xls",TOOL_PDF:"Export to pdf",TOOL_CSV:"Export to csv",TOOL_XML:"Export to xml",TOOL_FILTER:"Filter",TOOL_CHART:"Chart"},Sigma.Msg.Grid.default=Sigma.Msg.Grid.en,Sigma.Msg.Validator||(Sigma.Msg.Validator={}),Sigma.Msg.Validator.en={required:"{0#This field} is required.",date:"{0#This field} must be in proper format ({1#YYYY-MM-DD}).",time:"{0#This field} must be in proper format ({1#HH:mm}).",datetime:"{0#This field} must be in proper format ({1#YYYY-MM-DD HH:mm}).",email:"{0#This field} must be in proper email format.",telephone:"{0#This field} must be in proper phone no format.",number:"{0} must be a number.",integer:"{0} must be an integer.",float:"{0} must be integer or decimal.",money:"{0} must be integer or decimal with 2 fraction digits.",range:"{0} must be between {1} and {2}.",equals:"{0} must be same as {1}.",lessthen:"{0} must be less than {1}.",idcard:"{0} must be in proper ID format",enchar:"Letters, digits or underscore allowed only for {0}",cnchar:"{0} must be Chinese charactors",minlength:"{0} must contain more than {1} characters.",maxlength:"{0} must contain less than {1} characters."},Sigma.Msg.Validator.default=Sigma.Msg.Validator.en,Sigma.Const=Sigma.Const||{},SigmaConst=Sigma.Const,Sigma.Const.Grid={COL_CLASS_PREFIX:"td.",DEFAULT_ECG_ID:"gt",SHADOW_ROW:"_shadowRow",HIDE_HEADER_ROW:"_hideListRow",COL_T_CLASSNAME:"gt-col-",SKIN_CLASSNAME_PREFIX:"gt-skin-",SCROLLBAR_WIDTH:18,MIN_COLWIDTH:40,AJAX_HEADER:["isAjaxRequest","true"]},Sigma.Const.Key={BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,PAUSE:19,CAPSLOCK:20,ESC:27,SPACE:33,PAGEUP:33,PAGEDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,WIN:91,WIN_R:92,MENU:93,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLLLOCK:145},window.Sigma||(window.Sigma={}),Sigma.loaded=!1,Sigma.init=function(e){e=e||window,Sigma.doc=document,e.undefined=e.undefined;var t=e.navigator.userAgent.toLowerCase();Sigma.isIE=t.indexOf("msie")>-1,Sigma.isIE7=t.indexOf("msie 7")>-1,Sigma.isIE8=t.indexOf("msie 8")>-1,Sigma.isIE9=t.indexOf("msie 9")>-1,Sigma.isFF=t.indexOf("firefox")>-1,Sigma.isFF1=t.indexOf("firefox/1")>-1,Sigma.isFF2=t.indexOf("firefox/2")>-1,Sigma.isFF3=t.indexOf("firefox/3")>-1,Sigma.isOpera=t.indexOf("opera")>-1,Sigma.isWebkit=/webkit|khtml/.test(t),Sigma.isSafari=t.indexOf("safari")>-1||Sigma.isWebkit,Sigma.isChrome=t.indexOf("chrome")>-1||Sigma.isWebkit,Sigma.isGecko=Sigma.isMoz=!Sigma.isSafari&&t.indexOf("gecko")>-1,Sigma.isStrict="CSS1Compat"==Sigma.doc.compatMode||Sigma.isSafari,Sigma.isBoxModel=Sigma.isIE&&!Sigma.isIE8&&!Sigma.isIE9&&!Sigma.isStrict,Sigma.isNotStrictIE=Sigma.isBoxModel,Sigma.isSecure=0===e.location.href.toLowerCase().indexOf("https"),Sigma.isWindows=t.indexOf("windows")!=-1||t.indexOf("win32")!=-1,Sigma.isMac=t.indexOf("macintosh")!=-1||t.indexOf("mac os x")!=-1,Sigma.isLinux=t.indexOf("linux")!=-1},Sigma.init(),Sigma.$extend=function(e,t,i){arguments.length<2&&(t=e,e=this);for(var a in t){var n=t[a];i&&n&&Sigma.$type(n,"object","array")&&(n=Sigma.$clone(n,i)),void 0!==n&&(e[a]=n)}return e},Sigma.$extend(Sigma,{$empty:function(){},$chk:function(e){return!(!e&&0!==e&&""!==e)},$type:function(e){var t=arguments.length;if(t>1){for(var i=1;i<t;i++)if(Sigma.$type(e)==arguments[i])return!0;return!1}var a=typeof e;if(null===e)return"object";if("undefined"==a)return"undefined";if(e.htmlElement)return"element";if("object"==a&&e.nodeType&&e.nodeName)switch(e.nodeType){case 1:return"element";case 3:return/\S/.test(e.nodeValue)?"textnode":"whitespace"}return Sigma.U.isArray(e)?"array":"object"==a&&"number"==typeof e.length?e.callee?"arguments":"collection":"function"==a&&"number"==typeof e.length&&void 0!==e[0]?"collection":a},$merge:function(){for(var e={},t=0;t<arguments.length;t++)for(var i in arguments[t]){var a=arguments[t][i],n=e[i];n&&Sigma.$type(a,"object")&&Sigma.$type(n,"object")?e[i]=Sigma.$merge(n,a):e[i]=a}return e},$indexOf:function(e,t,i){if(e){i=i||0;for(var a=i,n=e.length;a<n;a++)if(e[a]===t)return a}return-1},$array:function(e,t,i,a){var n=[];if(e)if(Sigma.$chk(t)||(t=0),Sigma.$chk(i)||(i=e.length),Sigma.$type(e,"arguments","collection")||Sigma.$type(e,"array")&&(t>0||i<e.length))for(var o=t;o<i;o++)n.push(e[o]);else if(Sigma.$type(e,"array"))n=n.concat(e);else for(var r in e)e.hasOwnProperty(r)&&n.push(e[r]);return n},$clone:function(e,t){var i;return i=e?Sigma.$type(e,"array","arguments","collection")?Sigma.$array(e,0,e.length,t):Sigma.$extend({},e,t):e},$msg:function(e,t){for(var i=1;i<arguments.length;i++)e=Sigma.U.replaceAll(e,"#{"+i+"}",arguments[i]);return e},$clear:function(e){return window.clearTimeout(e),window.clearInterval(e),CollectGarbage&&CollectGarbage(),null},$thread:function(e,t){var i=e;window.setTimeout(i,t||20)},$each:function(e,t,i,a){var n=[];if(Sigma.$type(e,"array","arguments","collection")||e&&!Sigma.$type(e,"string")&&Sigma.$type(e.length,"number"))for(var o=0,r=e.length;o<r;o++)n.push(t.call(i||e,e[o],o,e,a));else for(var s in e)n.push(t.call(i||e,e[s],s,e,a));return n},$getText:function(e){return void 0===e.innerText?e.textContent:e.innerText},$element:function(e,t){if(Sigma.$type(e,"string")){if(Sigma.isIE&&t&&(t.name||t.type)){var i=t.name?' name="'+t.name+'"':"",a=t.type?' type="'+t.type+'"':"";delete t.name,delete t.type,e="<"+e+i+a+">"}e=Sigma.doc.createElement(e)}return t&&(t.style&&(Sigma.$extend(e.style,t.style),delete t.style),Sigma.$extend(e,t)),e}}),Sigma.Class=function(e){e=e||{};var t=function(){var e=this.properties;Sigma.$type(e,"function")&&(e=e.apply(this,arguments)),Sigma.$type(e,"object")&&Sigma.$extend(this,e);this.abstractMethods;return Sigma.$each(this.abstractMethods,function(e){this[e]=Sigma.$empty},this),arguments[0]!==Sigma.$empty&&Sigma.$type(this.initialize,"function")?this.initialize.apply(this,arguments):this};return Sigma.$extend(t,this),t.constructor=Sigma.Class,t.prototype=e,t},Sigma.Class.prototype={extend:function(){for(var e=new this(Sigma.$empty),t=0,i=arguments.length;t<i;t++){var a=arguments[t];for(var n in a){var o=e[n];e[n]=Sigma.Class.merge(o,a[n])}}return new Sigma.Class(e)}},Sigma.Class.merge=function(e,t){if(e&&e!=t){var i=Sigma.$type(t);if(!Sigma.$type(e,i))return t;switch(i){case"function":var a=function(){return this._parent=arguments.callee._parent,t.apply(this,arguments)};return a._parent=e,a;case"object":return Sigma.$merge(e,t)}}return t},Sigma.$class=function(e){return new Sigma.Class(e)},Sigma.$e=Sigma.$element,Sigma.$A=Sigma.$array,Sigma.$byId=function(e,t){if(!Sigma.$chk(e))return null;var i=Sigma.$type(e);return"element"==i?Sigma.$e(e,t):("string"!=i&&"number"!=i||(e=Sigma.doc.getElementById(""+e)),e?Sigma.U.contains(["object","embed"],e.tagName?"":e.tagName.toLowerCase())?e:Sigma.$e(e):null)},Sigma.getDom=function(e){return e&&document?e.dom?e.dom:"string"==typeof e?document.getElementById(e):e:null},Sigma.$byName=function(e){var t=[];if(!Sigma.$chk(e))return t;var i=Sigma.doc.getElementsByName(""+e);if(!i||i.length<1)return t;for(var a=0;a<i.length;a++)e=i[a],t.push(Sigma.U.contains(["object","embed"],e.tagName.toLowerCase())?e:Sigma.$e(e));return t},Sigma.$=function(e){var t=Sigma.$byName(e);return t&&t.length>0?t[0]:!t||t.length<1?Sigma.$byId(e):t},Sigma.Utils={P_START:"@{",P_END:"}",P_VAR_NAME:"obj_in",parseExpression:function(ex,pName,argNames,pStart,pEnd){pStart=pStart||Sigma.U.P_START,pEnd=pEnd||Sigma.U.P_END,pName=pName||Sigma.U.P_VAR_NAME,argNames=argNames||pName;for(var startLength=pStart.length,endLength=pEnd.length,templateC=[],current=0;;){var start=ex.indexOf(pStart,current),sBegin=start+startLength,sEnd=ex.indexOf(pEnd,sBegin),str=null,val=null;if(sBegin>=startLength&&sEnd>sBegin?(str=ex.substring(current,start),val=ex.substring(sBegin,sEnd)):str=ex.substring(current),str=Sigma.U.escapeString(str),templateC.push(str),null===val)break;val=Sigma.U.isNumber(val)?(pName?pName+"[":"")+val+(pName?"]":""):(pName?pName+".":"")+val,templateC.push(val),current=sEnd+endLength}var t="function("+argNames+"){ return "+templateC.join("+")+" }";return eval("t="+t),t},isArray:function(e){return"[object Array]"===Object.prototype.toString.apply(e)},isNumber:function(e,t){return 0===e||(t?Sigma.$type(e,"number"):e&&!isNaN(e))},parseInt:function(e,t){var i=parseInt(e);return isNaN(parseInt(e))?t||0:i},add2Map:function(e,t,i){return i=i||{},void 0===i[e]?i[e]=t:(i[e]=[].concat(i[e]),i[e].push(t)),i},moveItem:function(e,t,i){if(t==i)return e;var a=e[t],n=e[i];return e.splice(i,1,a,n),t<i?e.splice(t,1):e.splice(t+1,1),e},convert:function(e,t){switch(t){case"int":return parseInt(e);case"float":return parseFloat(e);case"date":return e;default:return e}return e},getTagName:function(e){return e&&e.tagName?String(e.tagName).toUpperCase():null},getParentByTagName:function(e,t,i,a){if(t||(i=Sigma.$event(i),t=Sigma.U.getEventTarget(i)),a=a||6,!t)return null;for(e=e.toLowerCase();t&&a-- >0;){if(t.tagName&&t.tagName.toLowerCase()==e)return t;if(Sigma.U.hasClass(t.className,"gt-grid")&&"div"!=e)break;t=t.parentNode}return null},focus:function(e){if(e)try{e.focus(),e.select&&e.select()}catch(e){}},hasClass:function(e,t){return!!e&&Sigma.U.hasSubString(e.className,t," ")},addClass:function(e,t){return e&&!Sigma.U.hasClass(e,t)&&(e.className=Sigma.U.clean(e.className+" "+t)),e},removeClass:function(e,t){return e&&(e.className=Sigma.U.clean(e.className.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)"),"$1"))),e},toggleClass:function(e,t){return Sigma.U.hasClass(e,t)?Sigma.U.removeClass(e,t):Sigma.U.addClass(e,t)},hasSubString:function(e,t,i){return i?(i+e+i).indexOf(i+t+i)>-1:e.indexOf(t)>-1},childElement:function(e,t){for(var i=0,a=e?e.firstChild:null;a;){if(1==a.nodeType&&++i==t)return a;a=a.nextSibling}return null},firstChildElement:function(e){return Sigma.U.childElement(e,1)},lastChildElement:function(e){var t=e.childNodes[e.childNodes.length-1];return 1==t.nodeType?t:Sigma.U.prevElement(t)},nextElement:function(e){for(;(e=e.nextSibling)&&1!=e.nodeType;);return e},prevElement:function(e){for(;(e=e.previousSibling)&&1!=e.nodeType;);return e},getCellIndex:function(e){if(Sigma.isIE)for(var t=e.parentNode.cells,i=0,a=t.length;i<a;i++)if(t[i]===e)return i;return e.cellIndex},insertNodeBefore:function(e,t){return e&&t&&t.parentNode?(t.parentNode.insertBefore(e,t),e):null},insertNodeAfter:function(e,t){return t.parentNode.insertBefore(e,t.nextSibling),e},listToMap:function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=e[i];return t},createSelect:function(e,t,i,a){a=a||Sigma.$e("select",i||{});var n=Sigma.doc.createDocumentFragment();return Sigma.$each(e,function(e,i){var a=Sigma.$e("option",{value:i,text:""+e,innerHTML:e});Sigma.$chk(t)&&i==t&&(a.selected=!0),n.appendChild(a)}),a.appendChild(n),a},createSelectHTML:function(e,t,i){i=i||{};var a=i.id?' id="'+i.id+'" ':" ",n=i.className||"",o=i.style?' style="'+i.style+'" ':" ",r=["<select"+a+o+'class="gt-input-select '+n+'">'];for(var s in e){var l="";!t&&0!==t||s!=t||(l=' selected="selected" '),r.push('<option value="'+s+'" '+l+">"+e[s]+"</option>")}return r.push("</select>"),r.join("")},getEventTarget:function(e){var t=null;try{t=e.target||e.srcElement}catch(e){return null}return t?3==t.nodeType?t.parentNode:t:null},stopEvent:function(e){e=e||window.event,e&&(e.stopPropagation?(e.stopPropagation(),e.preventDefault()):(e.cancelBubble=!0,e.returnValue=!1))},addEvent:function(e,t,i,a,n){if(!i||!e||!t)return!1;if(arguments.length>3&&(i=Sigma.U.bindAsEventListener(i,a,n)),e.addEventListener)e.addEventListener(t,i,!1);else{var o="selectstart"==t?t:"on"+t;e.attachEvent(o,i)}return Sigma.EventCache.add(e,t,i,!1),e},removeEvent:function(e,t,i,a,n){if(!i||!e||!t)return!1;if(arguments.length>3&&(i=Sigma.U.bindAsEventListener(i,a,n)),e.addEventListener)e.removeEventListener(t,i,!1);else{var o="selectstart"==t?t:"on"+t;e.detachEvent(o,i)}return Sigma.EventCache.remove(e,t,i,!1),e},onLoadFuncList:[],onLoadFuncCaller:function(){for(var e=0;e<Sigma.U.onLoadFuncList.length;e++){var t=Sigma.U.onLoadFuncList[e];t.apply(this,arguments)}Sigma.loaded=!0},onLoad:function(e,t){t=t||window,Sigma.U.onLoadFuncList.push(e),Sigma.U.onLoadFuncCaller.hasAdd||(Sigma.U.addEvent(t,"load",Sigma.U.onLoadFuncCaller),Sigma.U.onLoadFuncCaller.hasAdd=!0)},orphanDiv:function(){var e=Sigma.doc.createElement("div");return e.className="gt-orphan-div",e}(),createElementFromHTML:function(e,t){Sigma.U.orphanDiv.innerHTML=e;var i=Sigma.U.firstChildElement(Sigma.U.orphanDiv);return t.appendChild(i),Sigma.U.orphanDiv.innerHTML="",i},createTrFromHTML:function(e,t){Sigma.U.orphanDiv.innerHTML="<table><tbody>"+e+"</tbody></table>";var i=Sigma.U.orphanDiv.getElementsByTagName("tr")[0];return t.appendChild(i),Sigma.U.orphanDiv.innerHTML="",i},removeNode:function(e){for(var t=0;t<arguments.length;t++){var i=arguments[t];if(!i||!i.parentNode||"BODY"==i.tagName)return null;Sigma.EventCache.remove(i),Sigma.isIE?(Sigma.U.orphanDiv.appendChild(i),Sigma.U.orphanDiv.innerHTML=""):i.parentNode.removeChild(i)}},removeNodeTree:function(e){if(e){for(var t=e.getElementsByTagName("*"),i=0;i<t.length;i++)Sigma.U.removeNodeTree(t[i]);Sigma.U.removeNode(e)}},getLastChild:function(e){return e.childNodes[e.childNodes.length-1]},getPosLeftTop:function(e,t){t=t||window;var i=e.offsetTop,a=e.offsetLeft;for(e=e.offsetParent;e&&e!=t;)i+=e.offsetTop-e.scrollTop,a+=e.offsetLeft-e.scrollLeft,e=e.offsetParent;return[a,i]},getPosRight:function(e){return Sigma.U.getPosLeftTop(e)[0]+e.offsetWidth},getPosBottom:function(e){return Sigma.U.getPosLeftTop(e)[1]+e.offsetHeight},getHeight:function(e,t){var i=e.offsetHeight||0;if(t!==!0)return i;var a=Sigma.U.getBorderWidths(e),n=Sigma.U.getPaddings(e);return i-a[0]-a[2]-n[0]-n[2]},getWidth:function(e,t){var i=e.offsetWidth||0;if(t!==!0)return i;var a=Sigma.U.getBorderWidths(e),n=Sigma.U.getPaddings(e);return i-a[1]-a[3]-n[1]-n[3]},getBorderWidths:function(e){return[Sigma.U.parseInt(e.style.borderTopWidth),Sigma.U.parseInt(e.style.borderRightWidth),Sigma.U.parseInt(e.style.borderBottomWidth),Sigma.U.parseInt(e.style.borderLeftWidth)]},getPaddings:function(e){return[Sigma.U.parseInt(e.style.paddingTop),Sigma.U.parseInt(e.style.paddingRight),Sigma.U.parseInt(e.style.paddingBottom),Sigma.U.parseInt(e.style.paddingLeft)]},getPageX:function(e){e=e||window.event;var t=e.pageX;return t||0===t||(t=e.clientX||0,Sigma.isIE&&(t+=Sigma.U.getPageScroll()[0])),t},getPageY:function(e){e=e||window.event;var t=e.pageY;return t||0===t||(t=e.clientY||0,Sigma.isIE&&(t+=Sigma.U.getPageScroll()[1])),t},getPageScroll:function(){var e=Sigma.doc.documentElement,t=Sigma.doc.body;return e&&(e.scrollLeft||e.scrollTop)?[e.scrollLeft,e.scrollTop]:t?[t.scrollLeft,e.scrollTop]:[0,0]},getScroll:function(e){var t=e,i=Sigma.doc;if(t==i||t==i.body){var a=window.pageXOffset||i.documentElement.scrollLeft||i.body.scrollLeft||0,n=window.pageYOffset||i.documentElement.scrollTop||i.body.scrollTop||0;return[a,n]}return[t.scrollLeft,t.scrollTop]},getXY:function(e,t){var i,a,n,o,r=Sigma.doc.body;if(e.getBoundingClientRect)return n=e.getBoundingClientRect(),o=Sigma.U.getScroll(Sigma.doc),[n.left+o[0],n.top+o[1]];var s=0,l=0;i=e,t=t||r;for(var d="absolute"==e.style.position;i;){if(s+=i.offsetLeft,l+=i.offsetTop,d||"absolute"!=i.style.position||(d=!0),Sigma.isGecko){a=i;var h=parseInt(a.style.borderTopWidth,10)||0,c=parseInt(a.style.borderLeftWidth,10)||0;s+=c,l+=h,i!=e&&"visible"!=a.style.overflow&&(s+=c,l+=h)}i=i.offsetParent}if(Sigma.isSafari&&d&&(s-=r.offsetLeft,l-=r.offsetTop),Sigma.isGecko&&!d){var g=r;s+=parseInt(g.style.borderTopWidth,10)||0,l+=parseInt(g.style.borderTopWidth,10)||0}for(i=e.parentNode;i&&i!=r;)(!Sigma.isOpera||"TR"!=i.tagName.toUpperCase()&&"inline"!=i.style.display)&&(s-=i.scrollLeft,l-=i.scrollTop),i=i.parentNode;return[s,l]},setXY:function(e,t){"static"==e.style.position&&(e.style.position="relative");var i=Sigma.U.translatePoints(e,t);t[0]!==!1&&(e.style.left=i.left+"px"),t[1]!==!1&&(e.style.top=i.top+"px")},translatePoints:function(e,t,i){("object"==typeof t||t instanceof Array)&&(i=t[1],t=t[0]);var a=e.style.position,n=Sigma.U.getXY(e),o=parseInt(e.style.left,10),r=parseInt(e.style.top,10);return isNaN(o)&&(o="relative"==a?0:e.offsetLeft),isNaN(r)&&(r="relative"==a?0:e.offsetTop),{left:t-n[0]+o,top:i-n[1]+r}},getContentWidthHeight:function(e){var t=(Sigma.U.parseInt(e.style.marginLeft),Sigma.U.parseInt(e.style.marginRight),Sigma.U.parseInt(e.style.paddingLeft)),i=Sigma.U.parseInt(e.style.paddingRight),a=e.clientWidth-t-i,n=e.clientHeight;return[a,n]},getPixelValue:function(e,t){if(Sigma.$type(e,"number"))return e;e=""+e;var i=Sigma.U.parseInt(e);return e.indexOf("%")>1?t*i/100:i},setValue:function(e,t){if(e=Sigma.$(e)){var i=e.tagName;switch(i=(""+i).toUpperCase()){case"SELECT":var a=[].concat(t),n=null;return Sigma.$each(e.options,function(t,i){0===i&&(n=t),t.selected=!1,e.multiple?Sigma.$each(a,function(e){t.selected=t.value==e}):t.value==a[0]&&(t.selected=!0,n=!1)}),!e.multiple&&n&&(n.selected=!0),e.multiple?a:a[0];case"INPUT":if("checkbox"==e.type||"radio"==e.type){e.checked=e.value==t;break}case"TEXTAREA":e.value=t}return null}},getValue:function(e){if(e=Sigma.$(e)){var t=e.tagName;switch(t){case"SELECT":var i=[];return Sigma.$each(e.options,function(e){e.selected&&i.push(e.value)}),i=e.multiple?i:i[0],null!==i&&void 0!==i||!e.options[0]||(i=e.options[0].value),i;case"INPUT":if(("checkbox"==e.type||"radio"==e.type)&&!e.checked)break;case"TEXTAREA":return e.value}return null}},setOpacity:function(e,t){return t=t>1?1:t<0?0:t,e.currentStyle&&e.currentStyle.hasLayout||(e.style.zoom=1),Sigma.isIE&&(e.style.filter=1==t?"":"alpha(opacity="+100*t+")"),e.style.opacity=t,0===t?"hidden"!=e.style.visibility&&(e.style.visibility="hidden"):"visible"!=e.style.visibility&&(e.style.visibility="visible"),e},replaceAll:function(exstr,ov,value){var gc=Sigma.U.escapeRegExp(ov);if(!Sigma.$chk(gc)||""===gc)return exstr;var rep="/"+gc+"/gm",r=null,cmd="r=exstr.replace("+rep+","+Sigma.U.escapeString(value)+")";return eval(cmd),r},trim:function(e,t){if(!e||!e.replace||!e.length)return e;var i=t>0?/^\s+/:t<0?/\s+$/:/^\s+|\s+$/g;return e.replace(i,"")},escapeRegExp:function(e){return e?(""+e).replace(/\\/gm,"\\\\").replace(/([\f\b\n\t\r[\^$|?*+(){}])/gm,"\\$1"):""+e},escapeString:function(e){return""===e?'""':e?('"'+(""+e).replace(/(["\\])/g,"\\$1")+'"').replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r"):""+e},bind:function(e,t,i){return i=[].concat(i),function(){return e.apply(t||e,Sigma.U.merge(Sigma.$A(arguments),i))}},bindAsEventListener:function(e,t,i){return function(a){return a=a||window.event,e.apply(t||e,[Sigma.$event(a)].concat(i))}},clean:function(e){return Sigma.U.trim(e.replace(/\s{2,}/g," "))},contains:function(e,t,i){return Sigma.U.indexOf(e,t,i)!=-1},merge:function(e,t,i){var a,n,o=e.length<t.length?e.length:t.length;if(i)for(a=0,n=o;a<n;a++)e[a]=t[a];for(a=o,n=t.length;a<n;a++)e[a]=t[a];return e},each:function(e,t,i){return Sigma.$each(e,t,i)},indexOf:function(e,t,i){for(var a=e.length,n=i<0?Math.max(0,a+i):i||0;n<a;n++)if(e[n]===t)return n;return-1},remove:function(e,t,i){for(var a=0,n=e.length;a<n;)if(e[a]===t){if(e.splice(a,1),!i)return e;n--}else a++;return e},next:function(e,t){var i=Sigma.U.indexOf(e,t);return i<0?null:e[i+1]},previous:function(e,t){var i=Sigma.U.indexOf(e,t);return i<1?null:e[i-1]},createStyleSheet:function(e,t){t=t||Sigma.doc;var i=t.createElement("style");i.id=e;var a=t.getElementsByTagName("head")[0];return a&&a.appendChild(i),i},getCheckboxState:function(e,t){for(var i={},a=0;a<e.length;a++)e[a].name==t&&e[a].checked&&(i[e[a].value]=e[a].checked);return i}},Sigma.Util=Sigma.Utils,Sigma.U=Sigma.Utils,Sigma.Utils.CSS=function(){var e=null;return{createStyleSheet:function(e,t,i){var a;i=i||Sigma.doc;var n=i.getElementsByTagName("head");(!n||n.length<1)&&(n=i.createElement("head"),i.documentElement?i.documentElement.insertBefore(n,i.body):i.appendChild(n),n=i.getElementsByTagName("head"));var o=n[0],r=i.createElement("style");if(r.setAttribute("type","text/css"),t&&r.setAttribute("id",t),Sigma.isIE)o.appendChild(r),a=r.styleSheet,a.cssText=e;else{try{r.appendChild(i.createTextNode(e))}catch(t){r.cssText=e}o.appendChild(r),a=r.styleSheet?r.styleSheet:r.sheet||i.styleSheets[i.styleSheets.length-1]}return this.cacheStyleSheet(a),a},getRules:function(t,i){if(i=i||Sigma.doc,!e||t){e={};for(var a=i.styleSheets,n=0,o=a.length;n<o;n++)this.cacheStyleSheet(a[n])}return e},getRule:function(e,t){var i=this.getRules(t);return i[e.toLowerCase()]},updateRule:function(e,t,i){var a=this.getRule(e);a&&(a.style[t]=i)},cacheStyleSheet:function(t){e=e||{};try{for(var i=t.cssRules||t.rules,a=i.length-1;a>=0;--a)e[i[a].selectorText.toLowerCase()]=i[a]}catch(e){}}}}(),Sigma.$event=function(e){return e=e||window.event},Sigma.EventCache=function(){var e=[],t=[],i={};return{add:function(a,n,o){if(a){Sigma.U.contains(e,arguments)||e.push(arguments);var r=Sigma.U.indexOf(t,a),s=r+"_"+a+"_"+a.id;r<0&&(s=t.length+"_"+a+"_"+a.id,t.push(a),i[s]={}),i[s][n]=i[s][n]||[],Sigma.U.contains(i[s][n],o)||i[s][n].push(o)}},remove:function(e,a,n){if(e){var o=Sigma.U.indexOf(t,e),r=o+"_"+e+"_"+e.id;if(!(o<0)&&i[r]){if(!a)return i[r]=null,void(t[o]=null);!n&&i[r][a]&&(i[r][a]=null,delete i[r][a]),i[r][a]&&i[r][a].remove(n)}}},clearUp:function(){var t,i;for(t=e.length-1;t>=0;t-=1)i=e[t],Sigma.EventCache.remove(i[0]),i[0].removeEventListener&&i[0].removeEventListener(i[1],i[2],i[3]),"on"!=i[1].substring(0,2)&&(i[1]="on"+i[1]),i[0].detachEvent&&i[0].detachEvent(i[1],i[2]),i[0][i[1]]=null,delete e[t];Sigma.destroyGrids&&Sigma.destroyGrids(),Sigma.destroyWidgets&&Sigma.destroyWidgets(),window.CollectGarbage&&CollectGarbage()}}}(),Sigma.toQueryString=function(e){if(!e||Sigma.$type(e,"string","number"))return e;var t=[];for(var i in e){var a=e[i];void 0!==a&&(a=[].concat(a));for(var n=0;n<a.length;n++){var o=a[n];Sigma.$type(o,"object")&&(o=Sigma.$json(o)),t.push(encodeURIComponent(i)+"="+encodeURIComponent(o))}}return t.join("&")},Sigma.toJSONString=function(e,t){return Sigma.JSON.encode(e,"__gt_",t)},Sigma.$json=Sigma.toJSONString,Sigma.FunctionCache={},Sigma.$invoke=function(e,t,i){e=e||window;var a=e[t]||Sigma.$getFunction(t);if("function"==typeof a)return a.apply(e,i||[])},Sigma.$getFunction=function(e){return Sigma.FunctionCache[e]},Sigma.$callFunction=function(e,t){Sigma.$invoke(null,e,t)},Sigma.$putFunction=function(e,t){Sigma.FunctionCache[e]=t},Sigma.$removeFunction=function(e){Sigma.FunctionCache[e]=null,delete Sigma.FunctionCache[e]},Sigma.U.onLoad(function(){Sigma.U.addEvent(window,"unload",Sigma.EventCache.clearUp)}),Sigma.AjaxDefault={paramName:"_gt_json"},Sigma.Ajax=Sigma.$class({properties:function(){return{method:"post",jsonParamName:Sigma.AjaxDefault.paramName,async:!0,urlEncoded:!0,encoding:null,mimeType:null,beforeSend:Sigma.$empty,onComplete:Sigma.$empty,onSuccess:Sigma.$empty,onFailure:Sigma.$empty,onCancel:Sigma.$empty,xhr:"",url:"",data:"",paramType:"jsonString",headers:{"X-Requested-With":"XMLHttpRequest",Accept:"text/javascript, text/html, application/xml,application/json, text/xml, */*"},autoCancel:!1,evalScripts:!1,evalResponse:!1,responseContentType:"",dataUrl:!1,queryParameters:null}},setQueryParameters:function(e){this.queryParameters=e},initialize:function(e){if(e=e||{},Sigma.$type(e,"string")&&(e={url:e}),this.xhr=this.getXHR()){var t=Sigma.$extend(this.headers,e.headers);Sigma.$extend(this,e),this.mimeType&&(t["X-Response-MimeType"]=this.mimeType),this.headers=t}},send:function(e){this.running=!0,Sigma.$type(e,"string")&&(e={data:e}),e=Sigma.$extend({data:this.data,url:this.url,method:this.method},e);var t=e.data,i=e.url,a=String(e.method).toLowerCase();if(Sigma.$invoke(this,"beforeSend",[this.xhr,t])===!1)return this;if(this.urlEncoded&&"post"==a){var n=this.encoding?"; charset="+this.encoding:"";this.setHeader("Content-type","application/x-www-form-urlencoded"+n)}switch(Sigma.$type(t)){case"object":if("jsonString"==this.paramType){var o=Sigma.$json(t);t={},t[this.jsonParamName]=o}t=Sigma.toQueryString(t)}var r;if(this.queryParameters&&Sigma.$type(this.queryParameters,"object")?r=Sigma.toQueryString(this.queryParameters):Sigma.$type(this.queryParameters,"string")&&(r=this.queryParameters),r&&Sigma.$type(t,"string")&&(t=t+"&"+r),"post"==a){var s=i.indexOf("?");s>=0&&(t=i.substring(s+1)+"&"+t,i=i.substring(0,s))}else t&&("get"==a||this.dataUrl)&&(i=i+(i.indexOf("?")>=0?"&":"?")+t,t=null);var l=this;this.xhr.open(a.toUpperCase(),i,this.async),this.xhr.onreadystatechange=function(){return l.onStateChange.apply(l,arguments)};for(var d in this.headers)try{this.xhr.setRequestHeader(d,this.headers[d])}catch(e){}return this.xhr.send(t),this.async||this.onStateChange(),this},onStateChange:function(){if(4==this.xhr.readyState&&this.running){this.running=!1,this.status=0;try{this.status=this.xhr.status}catch(e){}this.onComplete(),this.isSuccess()?this._onSuccess():this._onFailure(),this.xhr.onreadystatechange=Sigma.$empty}},isScript:function(){return/(ecma|java)script/.test(this.getHeader("Content-type"))},isSuccess:function(){var e=this.xhr.status;return e>=200&&e<300},_onSuccess:function(){this.response={
text:this.xhr.responseText,xml:this.xhr.responseXML},this.onSuccess(this.response)},_onFailure:function(e){this.onFailure(this.xhr,e)},setHeader:function(e,t){return this.headers[e]=t,this},getHeader:function(e){try{return this.xhr.getResponseHeader(e)}catch(e){return null}},getXHR:function(){return window.XMLHttpRequest?new XMLHttpRequest:!!window.ActiveXObject&&new ActiveXObject("Microsoft.XMLHTTP")},cancel:function(){return this.running?(this.running=!1,this.xhr.abort(),this.xhr.onreadystatechange=Sigma.$empty,this.xhr=this.getXHR(),this.onCancel(),this):this}}),Sigma.JSON={encode:function(e,t,i){var a,n=i?"\n":"";switch(Sigma.$type(e)){case"string":return'"'+e.replace(/[\x00-\x1f\\"]/g,Sigma.JSON.$replaceChars)+'"';case"array":return a=[],Sigma.$each(e,function(e,n){var o=Sigma.JSON.encode(e,t,i);(o||0===o)&&a.push(o)}),"["+n+(i?a.join(","+n):a)+"]"+n;case"object":return null===e?"null":(a=[],Sigma.$each(e,function(e,n){if(!t||0!==n.indexOf(t)){var o=Sigma.JSON.encode(e,t,i);o&&a.push(Sigma.JSON.encode(n,t,i)+":"+o)}},null,t),"{"+n+(i?a.join(","+n):a)+n+"}"+n);case"number":case"boolean":return String(e)}return null},decode:function(string,secure){return Sigma.$type(string,"string")&&string.length?secure&&!/^[,:{}\[\]0-9.\-+Eaeflnr-u \n\r\t]*$/.test(string.replace(/\\./g,"@").replace(/"[^"\\\n\r]*"/g,""))?null:eval("("+string+")"):null},$specialChars:{"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},$replaceChars:function(e){return Sigma.JSON.$specialChars[e]||"\\u00"+Math.floor(e.charCodeAt()/16).toString(16)+(e.charCodeAt()%16).toString(16)}},Sigma.Const.DataSet={KEY:"__gt_ds_key__",INDEX:"__gt_ds_index__",ROW_KEY:"__gt_row_key__",NOT_VAILD:"__gt_no_valid__",SN_FIELD:"__gt_sn__",SORT_VALUE:"__gt_sort_value__",SORT_S:"__gt_"},Sigma.DataSetDefault={SEQUENCE:0,uniqueField:Sigma.Const.DataSet.SN_FIELD,recordType:"object",recordXpath:null,dataXML:null,currentBegin:0,cursor:0,startRecordNo:0,cacheData:!1,cacheModifiedData:!0,modified:!1,properties:function(){return{fields:[],fieldsName:[],fieldsMap:{},fieldsInfo:{},data:null,dataProxy:[],dataProxyBak:null,additional:[],sortInfo:[],queryInfo:[],reocrdIndex:{},updatedRecords:{},updatedRecordsBak:{},updatedFields:{},insertedRecords:{},deletedRecords:{},onRecordInsert:Sigma.$empty,onRecordUpdate:Sigma.$empty}},initialize:function(e){Sigma.$extend(this,e),this.recordType=this.recordType||"object",this.fields&&this.setFields(this.fields),this.data&&this.setData(this.data),this.unfieldIdx=this.uniqueField},initValues:Sigma.$empty,isEqualRecord:function(e,t){for(var i in this.fieldsInfo)if(e[i]!==t[i])return!1;return!0},clean:function(e){this.cacheData&&e!==!0||(this.data=null,this.currentBegin=0,this.dataProxy=[]),this.cleanModifiedData()},cleanModifiedData:function(e){this.cacheModifiedData&&!e||(this.updatedRecords={},this.updatedRecordsBak={},this.updatedFields={},this.insertedRecords={},this.deletedRecords={})},setData:function(e){return!!e&&(this.clean(),this.appendData(e))},setFields:function(e){this.fields=e,this.fieldsName=[];for(var t=null,i=0,a=this.fields.length;i<a;i++){var n=this.fields[i]||{};Sigma.$type(n,"string")&&(n={name:n}),n.name=n.name||String(i),n.type=n.type||"string",n.index=n.index||("array"==this.getRecordType()?i:n.name),n.initValue&&(t=t||{},t[n.index]=n.initValue),this.fieldsMap[n.name]=n,this.fieldsInfo[n.index]=n,this.fieldsName[i]=n.name}t?this.initValues=function(e){return function(t,i,a){for(var n in e)t[n]=e[n](t,i,a)}}(t):this.initValues=Sigma.$empty},appendData:function(e){if(!e)return!1;this.data=this.data||[];for(var t=Sigma.Const.DataSet.SN_FIELD,i=0,a=e.length;i<a;i++){var n=e[i];n[t]=n[t]||this.SEQUENCE++,this.data.push(n),this.dataProxy.push(this.currentBegin++),this.initValues(n,i,this)}return!0},getDataProxySize:function(){return this.dataProxy.length},resetDataProxy:function(e){this.dataProxy=[],e=e||this.getSize();for(var t=0;t<e;t++)this.dataProxy[t]=t},loadData:function(e){if(e)return this.setData(e.load())},setRecordType:function(e){e&&this.recordType!=e&&(this.recordType=e,this.setFields(this.fields))},getRecord:function(e){return this.data?this.data[this.dataProxy[e]]:null},getDataRecord:function(e){return this.dataset.data[e]},setValueByName:function(e,t,i){var a=this.fieldsMap[t].index;Sigma.$type(e,"number")&&(e=this.getRecord(e)),e[a]=i},getValueByName:function(e,t){var i=this.fieldsMap[t].index;return Sigma.$type(e,"number")&&(e=this.getRecord(e)),e[i]},getFields:function(){},getRecordType:function(e,t){return this.recordType=e||this.recordType,!Sigma.$type(this.recordType,"string")&&this.data&&this.getSize()>0&&(t=this.data[0],Sigma.$type(t,"array")?this.recordType="array":this.recordType="object"),this.recordType},filterCheck:{equal:function(e,t){return e==t},notEqual:function(e,t){return e!=t},less:function(e,t){return e<t},great:function(e,t){return e>t},lessEqual:function(e,t){return e<=t},greatEqual:function(e,t){return e>=t},like:function(e,t){return(""+e).indexOf(t+"")>=0},startWith:function(e,t){return 0===(""+e).indexOf(t+"")},endWith:function(e,t){return e+="",t+="",e.indexOf(t)==e.length-t.length}},filterData:function(e){var t=this,i=[];return e=[].concat(e),Sigma.$each(this.data,function(a,n){for(var o=!0,r=0,s=e.length;r<s;r++){var l=t.fieldsMap[e[r].fieldName].index,d=e[r].value,h=e[r].logic,c=a[l];if(o=t.filterCheck[h](c,d),!o)break}o&&i.push(n)}),i},insertRecord:function(e){var t=this.SEQUENCE++;e[Sigma.Const.DataSet.SN_FIELD]=t,this.insertedRecords[t]=e,Sigma.$invoke(this,"onRecordInsert",[e]),this.modified=!0},updateRecord:function(e,t,i){Sigma.$type(e,"number")&&(e=this.data[e]);var a=e[Sigma.Const.DataSet.SN_FIELD],n=e[this.unfieldIdx],o=this.fieldsMap[t].type,r=this.fieldsMap[t].index;this.insertedRecords[a]||(this.updatedRecordsBak[n]=this.updatedRecordsBak[n]||{},this.updatedRecordsBak[n][r]=e[r],this.updatedRecordsBak[n][this.unfieldIdx]=n,this.updatedRecords[n]=e),(this.insertedRecords[a]||Sigma.$invoke(this,"onRecordUpdate",[e,t,i])!==!1)&&("int"==o?(i=parseInt(i),i=isNaN(i)?"":i):"float"==o?(i=parseFloat(i),i=isNaN(i)?"":i):i=Sigma.$chk(i)?String(i):"",this.updatedFields[n]=this.updatedFields[n]||{},this.updatedFields[n][r]=i,this.updatedFields[n][this.unfieldIdx]=n,e[r]=i,this.modified=!0)},undeleteRecord:function(e){var t,i,a=-1;if(Sigma.$type(e,"number")?(a=e,a>=0&&(i=this.dataProxy[a],t=this.data[i])):e&&(Sigma.$type(e,"object")||Sigma.$type(e,"array"))&&(t=e),t){var n=(t[Sigma.Const.DataSet.SN_FIELD],t[this.unfieldIdx]);this.deletedRecords[n]=null,delete this.deletedRecords[n]}},deleteRecord:function(e){var t,i,a=-1;if(Sigma.$type(e,"number")?(a=e,a>=0&&(i=this.dataProxy[a],t=this.data[i])):e&&(Sigma.$type(e,"object")||Sigma.$type(e,"array"))&&(t=e),t){var n=t[Sigma.Const.DataSet.SN_FIELD],o=t[this.unfieldIdx];this.insertedRecords[n]?delete this.insertedRecords[n]:(this.updatedRecords[o]&&(delete this.updatedRecords[o],delete this.updatedRecordsBak[o]),this.deletedRecords[o]=t,this.modified=!0)}},addUniqueKey:function(e){},isInsertedRecord:function(e){return e&&this.insertedRecords[e[Sigma.Const.DataSet.SN_FIELD]]==e},isDeletedRecord:function(e){return e&&this.deletedRecords[e[this.unfieldIdx]]==e},isUpdatedRecord:function(e){return e&&this.updatedRecords[e[this.unfieldIdx]]==e},sortFunction:null,negative:function(e){return function(t,i){return 0-e(t,i)}},sort:function(e){for(var t=[].concat(e),i=[],a=0;a<t.length;a++){var n=t[a];if(n){var o,r,s,l=0===n.sortOrder.indexOf("def");!n.sortOrder||l?(s=Sigma.Const.DataSet.SN_FIELD,r="int"):(o=this.fieldsMap[n.fieldName],o&&(s=o.index,r=o.type)),i.push(!l&&n.sortFn?n.sortFn:this.getSortFuns(s,n.sortOrder,r,n.getSortValue))}}var d=this,h=i.length,c=function(e,a){for(var n=d.data[e],o=d.data[a],r=0;r<h;r++){var s=i[r](n,o,t[r].sortOrder);if(0!==s)return s}return 0};this.dataProxy.sort(c)},getSortFuns:function(e,t,i,a){var n=(Sigma.Const.DataSet.SORT_VALUE,{}),o=this.sortFunction;if(!o){var r=a&&0!==t.indexOf("def")?function(t){var i=t[e],o=a(i,t);return n[t[Sigma.Const.DataSet.SN_FIELD]]=o,o}:function(t){var a=t[e],o=Sigma.U.convert(a,i);return n[t[Sigma.Const.DataSet.SN_FIELD]]=o,o};o="desc"==t?function(e,t){var i=n[e]||r(e),a=n[t]||r(t);return i<a?1:i>a?-1:0}:function(e,t){var i=n[e]||r(e),a=n[t]||r(t);return i<a?-1:i>a?1:0}}return o},query:function(e,t,i,a){},getSize:function(){return this.data?this.data.length:-1},getFieldsNum:function(){return this.fields.length},sum:function(e){},avg:function(e){}},Sigma.DataSet=Sigma.$class(Sigma.DataSetDefault),Sigma.Template||(Sigma.Template={}),Sigma.$extend(Sigma.Template,{Grid:{main:function(e){var t=e.id,i=["top"==e.toolbarPosition||"t"==e.toolbarPosition?'<div id="'+t+'_toolBarBox" class="gt-toolbar-box gt-toolbar-box-top" ></div>':"",'<div id="'+t+'_viewport" class="gt-viewport'+(e.simpleScrollbar?" gt-simple-scrollbar":"")+'" >','<div id="'+t+'_headDiv" class="gt-head-div"><div class="gt-head-wrap" ></div>','<div id="'+t+'_columnMoveS" class="gt-column-moveflag"></div>','<div id="'+t+'_headerGhost" class="gt-head-ghost"></div>',"</div>",'<div id="'+t+'_bodyDiv" class="gt-body-div"></div>','<div id="'+t+'_freeze_headDiv" class="gt-freeze-div" ></div>','<div id="'+t+'_freeze_bodyDiv" class="gt-freeze-div" ></div>',"</div>","bottom"==e.toolbarPosition||"b"==e.toolbarPosition?'<div id="'+t+'_toolBarBox" class="gt-toolbar-box" ></div>':"",'<div id="'+t+'_separateLine" class="gt-split-line"></div>','<div id="'+t+'_mask" class="gt-grid-mask" >','<div  id="'+t+'_waiting" class="gt-grid-waiting">','<div class="gt-grid-waiting-icon"></div><div class="gt-grid-waiting-text">'+e.getMsg("WAITING_MSG")+"</div>","</div>",'<div class="gt-grid-mask-bg">',"</div>","</div>"];return i.join("\n")},formIFrame:function(e){var t=e.id,i=['<div class="gt-hidden" >','<form id="'+t+'_export_form" target="'+t+'_export_iframe" style="width:0px;height:0px;margin:0px;padding:0xp" method="post" width="0" height="0" >','<input type="hidden" id="'+t+'_export_filename" name="exportFileName"  value="" />','<input type="hidden" id="'+t+'_export_exporttype" name="exportType" value="" />','<textarea id="'+t+'_export_form_textarea" name="" style="width:0px;height:0px;display:none;" ></textarea>',"</form>",'<iframe id="'+t+'_export_iframe"  name="'+t+'_export_iframe" scrolling="no" style="width:0px;height:0px;" width="0" height="0" border="0" frameborder="0" >',"</iframe>","</div>"];return i.join("\n")},createHeaderCell:function(e,t,i){var a=Sigma.$e("td",{className:t.styleClass,columnId:t.id}),n=t.hdRenderer(t.header,t,e);return t.title=t.title||t.header||"",n=n&&""!==Sigma.U.trim(n)?n:"&#160;",i&&(a.style.height="0px"),a.innerHTML=['<div class="gt-inner'+(t.headAlign?" gt-inner-"+t.headAlign:"")+'" ',i?'style="padding-top:0px;padding-bottom:0px;height:1px;" ':"",'unselectable="on" title="'+t.title+'" >',"<span>",n,"</span>",i?"":Sigma.T_G.hdToolHTML,"</div>"].join(""),a},hdToolHTML:'<div class="gt-hd-tool" ><span class="gt-hd-icon"></span><span class="gt-hd-button"></span><span class="gt-hd-split"></span></div>',bodyTableStart:function(e,t){return["<table ",e?'id="'+e+'" ':"",'class="gt-table" cellspacing="0"  cellpadding="0" border="0" >',t===!1?"":"<tbody>"].join("")},tableStartHTML:'<table class="gt-table" style="margin-left:0px" cellspacing="0"  cellpadding="0" border="0" ><tbody>',tableEndHTML:"</tbody></table>",rowStart:function(e,t,i){return Sigma.T_G.rowStartS(e,t)+">\n"},rowStartS:function(e,t,i){return['<tr class="gt-row',t%2===0?e.evenRowCss:"",'" ',Sigma.Const.DataSet.INDEX,'="',t,'" ',i].join("")},rowEndHTML:"</tr>\n",innerStart:function(e){return['<div class="gt-inner '+(e.align?" gt-inner-"+e.align+" ":""),'" >'].join("")},cellStartHTML:'<td ><div class="gt-inner" >',cellEndHTML:"</div></td>",cell:function(e,t,i){return["<td ",i||e.cellAttributes,' class="'+e.styleClass+'" >',e.innerStartHTML,t,"</div></td>"].join("")},getColStyleClass:function(e,t){return(Sigma.Const.Grid.COL_T_CLASSNAME+e.id+"-"+t).toLowerCase()},freezeBodyCell:function(e,t,i,a){var n=t+e.cellWidthFix,o=t+e.innerWidthFix,r='style="width:'+o+'px;"';i=i||"&#160;";var s=Sigma.$e("td",{style:{width:n+"px"},innerHTML:'<div class="'+(a?"gt-hd-inner":"gt-inner")+'" '+r+">"+i+"</div>"});return s},freezeHeadCell:function(e,t,i){return this.freezeBodyCell(e,t,i,!0)}},Dialog:{create:function(e){var t=e.domId,i=e.gridId,a=!Sigma.$chk(e.hasCloseButton)||e.hasCloseButton,n=e.title||"Dialog";return['<div class="gt-dialog-head" >','<div class="gt-dialog-head-icon">&#160;</div>','<div id="'+t+'_dialog_title"  class="gt-dialog-head-text" >'+n+"</div>",'<div class="gt-dialog-head-button"  >',a?'<a href="#" onclick="Sigma.$grid(\''+i+"').closeDialog();return false;\">&#160;</a>":"","</div>",'</div><div id="'+t+'_dialog_body" class="gt-dialog-body"></div>'].join("")},filterCondSelect:['<select class="gt-input-select">','<option value="equal">=</option>','<option value="notEqual">!=</option>','<option value="less">&lt;</option>','<option value="great">></option>','<option value="lessEqual">&lt;=</option>','<option value="greatEqual" >>=</option>','<option value="like" >like</option>','<option value="startWith">startWith</option>','<option value="endWith">endWith</option>',"</select>"].join("")}}),Sigma.T_G=Sigma.Template.Grid,Sigma.T_C=Sigma.Template.Column,Sigma.T_D=Sigma.Template.Dialog,window.Sigma||(window.Sigma={}),SIGMA_GRID_VER="Sigma-Grid 2.4",Sigma.WidgetCache={},Sigma.GridCache={},Sigma.GridNum=0,Sigma.activeGrid=null,Sigma.$widget=function(e){return Sigma.$type(e,"string")?Sigma.WidgetCache[e]:e},Sigma.$grid=function(e){return e=e||Sigma.Const.Grid.DEFAULT_ECG_ID,Sigma.$type(e,"string")?Sigma.GridCache[e]:e},Sigma.destroyGrids=function(){Sigma.eachGrid(function(e){try{e.destroy()}catch(e){}})},Sigma.destroyWidgets=function(){for(var e in Sigma.WidgetCache){var t=Sigma.WidgetCache[e];if(t&&t.destroy)try{t.destroy()}catch(e){}}},Sigma.eachGrid=function(e){for(var t in Sigma.GridCache){var i=Sigma.GridCache[t];e(i)}},Sigma.GridDefault={id:Sigma.Const.Grid.DEFAULT_ECG_ID,defaultColumnWidth:70,domList:["gridWaiting","separateLine","gridMask","gridGhost","gridFormTextarea","gridFormFileName","gridFormExportType","gridForm","gridIFrame","activeDialog","gridDialog","gridDialogTitle","gridDialogBody","gridFilterRSCache","titleBar","toolTipDiv","freezeHeadTable","freezeHeadDiv","freezeBodyDiv","freezeView","resizeButton","pageSizeSelect","pageStateBar","toolBar","toolBarBox","columnMoveS","headerGhost","headFirstRow","bodyFirstRow","headTable","headDiv","bodyDiv","gridDiv","viewport","container"],defaultConst:["action","recordType","exportType","exportFileName","exception","parameters","queryParameters","data","pageInfo","filterInfo","sortInfo","columnInfo","fieldsName","insertedRecords","updatedRecords","updatedFields","deletedRecords","success","succeedData","failedData","remotePaging","remoteSort","remoteFilter","remoteGroup"],language:"default",skin:"default",dataPageInfo:null,dataException:null,formid:null,isNative:!1,loadURL:null,saveURL:null,exportURL:null,exportType:null,exportFileName:null,sortInfo:null,editable:!0,resizable:!1,allowCustomSkin:!1,allowFreeze:!1,allowHide:!1,allowGroup:!1,allowResizeColumn:!0,simpleScrollbar:!0,scrollbarClass:null,monitorResize:!1,readOnly:!1,stripeRows:!0,lightOverRow:!0,evenRowCss:"gt-row-even",clickStartEdit:!0,remotePaging:!0,remoteSort:!1,remoteFilter:!1,remoteGroup:!1,autoLoad:!0,submitColumnInfo:!0,autoUpdateSortState:!0,autoUpdateEditState:!0,autoUpdateGroupState:!0,autoUpdateFreezeState:!0,autoSelectFirstRow:!0,autoEditNext:!1,submitUpdatedFields:!1,autoSaveOnNav:!1,reloadAfterSave:!0,recountAfterSave:!0,recount:!1,showGridMenu:!1,showEditTool:!0,showAddTool:!0,showDelTool:!0,showSaveTool:!0,showReloadTool:!0,showPrintTool:!0,showFilterTool:!0,showChartTool:!0,showPageState:!0,showIndexColumn:!1,renderHiddenColumn:!0,transparentMask:!1,justShowFiltered:!0,toolbarPosition:"bottom",toolbarContent:"nav | goto | pagesize | reload | add del save | print | filter chart | state",width:"100%",height:"100%",minWidth:50,minHeight:50,dataRoot:"data",custom2Cookie:!0,multiSort:!1,multiGroup:!1,multiSelect:!0,selectRowByCheck:!1,html2pdf:!0,SigmaGridPath:"../../gt-grid",properties:function(){return{skinList:[{text:this.getMsg("STYLE_NAME_DEFAULT"),value:"default"},{text:this.getMsg("STYLE_NAME_PINK"),value:"pink"},{text:this.getMsg("STYLE_NAME_VISTA"),value:"vista"},{text:this.getMsg("STYLE_NAME_MAC"),value:"mac"}],encoding:null,mimeType:null,jsonParamName:null,title:null,lastAction:null,ajax:null,autoExpandColumn:null,autoColumnWidth:!1,cellWidthPadding:Sigma.isBoxModel?0:4,cellHeightPadding:Sigma.isBoxModel?0:2,cellWidthFix:(Sigma.isBoxModel,0),innerWidthFix:Sigma.isBoxModel?0:Sigma.isIE8?-1:-4,freezeFixH:(Sigma.isBoxModel,0),freezeFixW:Sigma.isIE?-1:-2,toolbarHeight:24,toolBarTopHeight:0,tableMarginLeft:0,freezeColumns:0,separateLineMinX:0,defaultRecord:null,isWaiting:!1,isColumnResizing:!1,requesting:!1,hasGridDivTemp:!1,resizeColumnId:-1,moveColumnDelay:800,mouseDown:!1,footDiv:null,footTable:null,footFirstRow:null,freezeBodyTable:null,titleBar:null,nearPageBar:null,lastOverHdCell:null,toolTipDiv:null,gridTable:null,overRow:null,overRowF:null,activeCell:null,activeColumn:null,activeRow:null,activeRecord:null,activeEditor:null,activeDialog:null,scrollLeft:0,scrollTop:0,complatedTimes:0,onComplete:Sigma.$empty,onResize:Sigma.$empty,beforeRowSelect:Sigma.$empty,afterRowSelect:Sigma.$empty,onHeadClick:Sigma.$empty,onCellClick:Sigma.$empty,onCellDblClick:Sigma.$empty,onRowClick:Sigma.$empty,onRowDblClick:Sigma.$empty,beforeEdit:Sigma.$empty,afterEdit:Sigma.$empty,beforeRefresh:Sigma.$empty,beforeExport:Sigma.$empty,beforeSave:Sigma.$empty,beforeLoad:Sigma.$empty,loadResponseHandler:Sigma.$empty,saveResponseHandler:Sigma.$empty,beforeDestroy:Sigma.$empty,beforeDatasetUpdate:Sigma.$empty,onRecordUpdate:Sigma.$empty,beforeInsert:Sigma.$empty,afterInsert:Sigma.$empty,beforeUpdate:Sigma.$empty,afterUpdate:Sigma.$empty,beforeDelete:Sigma.$empty,afterDelete:Sigma.$empty,customRowAttribute:Sigma.$empty,onContextMenu:Sigma.$empty,afterColumnResize:Sigma.$empty,beforeColumnMove:Sigma.$empty,onKeyDown:Sigma.$empty,onMouseMove:Sigma.$empty,onMouseOut:Sigma.$empty,onMouseOver:Sigma.$empty,onRowCheck:Sigma.$empty,editing:!1,rendered:!1,isFirstLoad:!0,customPrintCss:null,gridTbodyList:[],gridRowList:[],gridFreezeRowList:[],checkedRows:{},rowBegin:0,rowNum:0,rowEnd:0,currentRowNum:0,filterDataProxy:null,dataProxyBak:null,cacheData:[],dataset:null,selectedRows:[],cacheBodyList:[],frozenColumnList:[],sortedColumnList:[],countTotal:!0,pageSizeList:[],tools:{},toolCreator:{},columns:[],columnList:[],columnMap:{},CONST:null,queryParameters:{},parameters:{}}},activeMe:function(){Sigma.activeGrid=this},clearCheckedRows:function(e){this.checkedRows={},e&&this.refresh()},initialize:function(e,t){Sigma.GridNum++;var i={},a=this;if(Sigma.$each(this.domList,function(e,t){a[e]=null}),Sigma.$each(this.defaultConst,function(e,t){i[e]=e}),this.id=""+e,t=t||{},Sigma.$type(e,"object")&&(t=e,this.id="gtgrid_"+Sigma.GridNum),Sigma.$extend(i,t.CONST),this.CONST=i,Sigma.$extend(this,t),this.gridId=this.id,this.rowKey="__gt_"+this.id+"_r_",Sigma.GridCache[this.id]=this,this.legacy(),!this.dataset&&this.columns){for(var n={fields:[]},o=0;o<this.columns.length;o++){var r=this.columns[o],s={name:r.name||r.fieldName||r.id,type:r.type,index:r.fieldIndex||0===r.fieldIndex?r.fieldIndex:null};n.fields.push(s)}this.dataset=n}if(!this.dataset||this.dataset instanceof Sigma.DataSet||(this.dataset.recordType=this.dataset.recordType||this.recordType,this.dataset=new Sigma.DataSet(this.dataset)),this.loadURL=this.loadURL||this.dataset.loadURL,this.saveURL=this.saveURL||this.dataset.saveURL,this.evenRowCss=" "+this.evenRowCss,this.toolbarContent=this.toolbarContent!==!1&&this.toolbarContent,this.toolCreator)for(var l in this.toolCreator)Sigma.ToolFactroy.register(l,this.toolCreator[l]);var d=t.pageInfo||(this.dataset?this.dataset.pageInfo:null)||{};d.pageSize=d.pageSize||t.pageSize||0,0===d.pageSize&&delete d.pageSize,delete t.pageInfo,delete t.pageSize,delete this.pageInfo,delete this.pageSize,this.navigator=new Sigma.Navigator({gridId:this.id,pageInfo:d})},legacy:function(){var e=this;e.beforeRowSelect=e.beforeRowSelect||e.beforeSelectRow,e.afterRowSelect=e.afterRowSelect||e.afterSelectRow,e.onCellClick=e.onCellClick||e.onClickCell,e.onRowClick=e.onRowClick||e.onClickRow,e.onCellDblClick=e.onCellDblClick||e.onDblClickCell,e.onRowDblClick=e.onRowDblClick||e.onDblClickRow},initColumns:function(e){function t(e,t,i,a,n,o){return this.editor.getDisplayValue(e)}if(this.columns=e||this.columns,this.columns){this.gridEditorCache=this.gridEditorCache||Sigma.$e("div",{className:"gt-editor-cache"});for(var i=this.columns.length,a={},n=0;n<i;n++){var o=this.columns[n];o.grid=this,o.gridId=this.id,o.isCheckColumn&&(o=Sigma.Grid.createCheckColumn(this,o));var r=new Sigma.Column(o);this.columnMap[r.id]=r,this.columnList.push(r),r.colIndex=n,this.checkColumn=r.isCheckColumn?r:this.checkColumn,r.frozen&&this.frozenColumnList.push(r.id);var s=this.dataset.fieldsMap[r.fieldName];s&&(r.fieldIndex=s.index),r.editable!==!0&&r.editable!==!1&&(r.editable=this.editable),r.editor=Sigma.Editor?Sigma.Editor.factroy(r.editor,this):null,r.editor&&r.editor.getDom()&&this.gridEditorCache.appendChild(r.editor.getDom()),"by editor"==r.renderer&&r.editor?r.renderer=t:Sigma.$type(r.renderer,"string")&&(r.renderer=Sigma.U.parseExpression(r.renderer,"record","value,record,col,grid,colNo,rowNo")),a[r.fieldIndex]=r.newValue||"",r.styleClass=Sigma.T_G.getColStyleClass(this,r.id),r.innerStyleClass=r.styleClass+" .gt-inner",r.minWidth=r.minWidth+this.cellWidthFix,r.innerStartHTML=Sigma.T_G.innerStart(r),r.sortOrder&&this.addSortInfo(this.createSortInfo(r)),r.separator&&(r.separator.gridId=r.gridId),r.hidden}return this.defaultRecord=this.defaultRecord||a,this}},getMsg:function(e){var t=Sigma.Msg.Grid[this.language][e];return t},_onComplete:function(){this.autoSelectFirstRow&&!this.selectRowByCheck&&this.selectFirstRow(),this.toggleEmptyRow(),Sigma.$invoke(this,"onComplete",[this]),this.hideWaiting(),this.complatedTimes++},getEl:function(){return this.gridDiv},initHead:function(){var e=this;this.headDivHeight=this.headDiv.clientHeight,this.customHead&&(this.headDiv.style.height=this.headDivHeight-2+"px",Sigma.$thread(function(){e.headDiv.scrollTop=2}),this.headDivHeight-=2),this.freezeHeadDiv.style.height=this.headDivHeight+"px",this.freezeHeadDiv.style.top=0+this.freezeFixH+"px",this.freezeBodyDiv.style.top=this.headDivHeight+this.freezeFixH+0+"px"},initCSS:function(){var e="display:none;";Sigma.Const.Grid.SCROLLBAR_WIDTH=20;var t=this;t.evenRowCss=t.stripeRows?t.evenRowCss:"";var i=[];Sigma.$each(this.columnList,function(a,n){a.width=a.width||t.defaultColumnWidth;var o=""+a.width;o.indexOf("px")<1&&o.indexOf("%")<1?o=parseInt(o):o.indexOf("%")>0,i[n]=[a.CLASS_PREFIX+a.styleClass+" { width:"+(o+t.cellWidthFix)+"px;"+(a.hidden?e:"")+" } ",a.CLASS_PREFIX+a.innerStyleClass+" { width:"+(o+t.innerWidthFix)+"px; } "].join("\n")}),Sigma.U.CSS.createStyleSheet(i.join("\n"))},createMain:function(){if(this.pageStateBar=Sigma.$(this.pageStateBar),this.isNative)this.gridDiv=Sigma.$(this.id+"_div");else{var e=[Sigma.isBoxModel?"gt-b-ie ":Sigma.isSafari?"gt-b-safari ":Sigma.isOpera?"gt-b-opera ":Sigma.isStrict?"gt-b-strict":"","gt-grid","gt-skin-"+this.skin];this.gridDiv=Sigma.$e("div",{id:this.id+"_div",className:e.join(" ")}),this.container=Sigma.$(this.container),this.container&&this.container.appendChild&&this.container.tagName&&"BODY"!=Sigma.U.getTagName(this.container)?this.replaceContainer===!0?(this.container.parentNode.insertBefore(this.gridDiv,this.container),Sigma.U.removeNode(this.container),this.container=null):this.container.appendChild(this.gridDiv):Sigma.doc.body.appendChild(this.gridDiv),this.gridDiv.innerHTML=Sigma.T_G.main(this)}this.gridDiv.hideFocus=!0,this.gridMask=Sigma.$byId(this.id+"_mask"),this.gridWaiting=Sigma.$(this.id+"_waiting"),this.gridDialog=Sigma.$(this.id+"_dialog"),this.gridDialogTitle=Sigma.$(this.id+"_dialog_title"),this.gridDialogBody=Sigma.$(this.id+"_dialog_body"),this.gridDiv.appendChild(this.gridEditorCache),this.gridFilterRSCache=this.gridFilterRSCache||Sigma.$e("table",{className:"gt-filter-rs-cache"}),this.gridDiv.appendChild(this.gridFilterRSCache),this.showMask(),this.viewport=Sigma.$(this.id+"_viewport"),this.toolBarBox=Sigma.$(this.id+"_toolBarBox"),this.headDiv=Sigma.$(this.id+"_headDiv"),this.bodyDiv=Sigma.$(this.id+"_bodyDiv"),this.freezeView=Sigma.$(this.id+"_freezeView"),this.freezeHeadDiv=Sigma.$(this.id+"_freeze_headDiv"),this.freezeBodyDiv=Sigma.$(this.id+"_freeze_bodyDiv"),this.createHeader(),this.separateLine=Sigma.$(this.id+"_separateLine"),this.toolBarTopHeight="top"==this.toolbarPosition||"t"==this.toolbarPosition?this.toolbarHeight+(Sigma.isBoxModel?0:1):0,this.separateLine&&(this.separateLine.style.top=this.toolBarTopHeight+"px"),this.columnMoveS=Sigma.$(this.id+"_columnMoveS"),this.headerGhost=Sigma.$(this.id+"_headerGhost"),this.toolBarBox&&(this.toolBar=Sigma.$e("div",{id:this.id+"_toolBar",className:"gt-toolbar"}),this.toolBarBox.appendChild(this.toolBar));var t=""+this.width,i=""+this.height;this.setDimension(t,i,!0),this.showWaiting(),this.syncLeftTop()},syncLeftTop:function(){this.left=Sigma.U.getPosLeftTop(this.gridDiv),this.top=this.left[1],this.left=this.left[0],this.viewportXY=Sigma.U.getXY(this.viewport)},_onResize:function(e){this.gridMask.style.width=this.width,this.gridMask.style.height=this.height,this.gridDiv.style.width=this.width,this.gridDiv.style.height=this.height;var t=(""+this.height).indexOf("%")>0?this.gridDiv.clientHeight:parseInt(this.height),i=0-(Sigma.isBoxModel?2:3);if(this.bodyDiv.style.height=t-(this.headDivHeight+this.toolbarHeight)+i+"px",Sigma.isOpera){var a=this.gridDiv.clientWidth+i+"px";this.viewport.style.width=a,this.toolBarBox&&(this.toolBarBox.style.width=a)}this.freezeBodyDiv&&(this.freezeBodyDiv.style.height=this.bodyDiv.clientHeight+"px"),e!==!0&&this.onResize()},createFormIFrame:function(){Sigma.U.createElementFromHTML(Sigma.T_G.formIFrame(this),Sigma.doc.body),this.gridForm=Sigma.$(this.id+"_export_form"),this.gridFormTextarea=Sigma.$(this.id+"_export_form_textarea"),this.gridFormFileName=Sigma.$(this.id+"_export_filename"),this.gridFormExportType=Sigma.$(this.id+"_export_exporttype"),this.gridIFrame=Sigma.$(this.id+"_export_iframe")},createGridGhost:function(){this.gridGhost=Sigma.$e("div",{id:this.id+"_gridGhost",className:"gt-grid-ghost-rect"}),this.gridGhost.style.top=this.top+"px",this.gridGhost.style.left=this.left+"px",this.gridGhost.style.width=this.gridMask.style.width,this.gridGhost.style.height=this.gridMask.style.height,Sigma.doc.body.appendChild(this.gridGhost)},orphanTr:function(){if(!this.renderHiddenColumn){var e=Sigma.doc.createElement("tr");return e.className="gt-orphan-tr",e}}(),kickHeader:function(){var e=this,t=e.headTbody.rows[0];!this.renderHiddenColumn&&t&&Sigma.$each(this.columnList,function(i,a){var n=i.headCell&&i.headCell.parentNode==e.orphanTr;if(i.hidden&&n)e.orphanTr.appendChild(i.headCell);else if(n){var o=t.cell[a];o&&t.insertBefore(i.headCell,o)}},this)},createHeader:function(){var e,t=this;this.customHead?(this.renderHiddenColumn=!0,Sigma.U.removeNode(this.orphanTr),this.orphanTr=null,this.createCustomHeader()):(this.headTable=Sigma.$e("table",{id:this.id+"_headTable",className:"gt-head-table",cellSpacing:"0",cellPadding:"0",border:"0"}),this.headTbody=Sigma.$e("tbody"),this.headTable.appendChild(this.headTbody),e=Sigma.$e("tr",{className:"gt-hd-row"}),this.headTbody.appendChild(e),Sigma.$each(this.columnList,function(i,a){var n=Sigma.T_G.createHeaderCell(t,i);e.appendChild(n),i.headCell=n,Sigma.Grid.initColumnEvent(t,i)},this),this.kickHeader()),this.headTable.style.marginRight="100px";var i=this.headDiv.firstChild?String(Sigma.U.getTagName(this.headDiv.firstChild)):null;"DIV"==i||"SPAN"==i?this.headDiv.firstChild.appendChild(this.headTable):this.headDiv.appendChild(this.headTable),this.headFirstRow=this.headTbody.rows[0],this.freezeHeadTable=Sigma.$e("table",{id:this.headTable.id+"_freeze",className:"gt-head-table",cellSpacing:"0",cellPadding:"0",border:"0"}),this.freezeHeadTable.appendChild(Sigma.$e("tbody")),this.freezeHeadTable.style.height="100%",this.freezeHeadDiv.appendChild(this.freezeHeadTable),this.initHead()},createBody:function(){var e=Sigma.$(this.id+"_bodyTable");e?(this.gridTable=e,this.gridTbodyList.push(e.tBodies[0]),this.bodyFirstRow=this.getFirstRow()):this.gotoPage()},createCustomHeader:function(){var e,t=this;Sigma.$type(this.customHead,"string")&&(0===this.customHead.indexOf("<table")?(Sigma.U.orphanDiv.innerHTML=this.customHead,this.customHead=Sigma.U.orphanDiv.firstChild):this.customHead=Sigma.$(this.customHead)),this.customHead.style.display="",this.headTable=Sigma.$e(this.customHead,{id:this.id+"_headTable",className:"gt-head-table",cellSpacing:"0",cellPadding:"0",border:"0"}),this.headTbody=this.headTable.tBodies[0];for(var i=0;i<this.headTbody.rows.length;i++){var a=this.headTbody.rows[i];a.className="gt-hd-row";for(var n=0;n<a.cells.length;n++){var o=a.cells[n],r=o.innerHTML,s=o.getAttribute("columnId");if(s){o.columnId=s;var l=this.columnMap[s];"false"==String(o.getAttribute("resizable")).toLowerCase()&&(l.resizable=!1),"false"==String(o.getAttribute("sortable")).toLowerCase()&&(l.sortable=!1),o.colSpan<2&&(o.className=l.styleClass),l.headCell=o}o.innerHTML=['<div class="gt-inner',o.rowSpan<2?"":" gt-inner-tall2",'" unselectable="on" >',"<span>",r,"</span>",s?Sigma.T_G.hdToolHTML:"","</div>"].join("")}}e=Sigma.$e("tr",{className:"gt-hd-row"+(this.customHead?" gt-hd-hidden":"")}),Sigma.$each(this.columnList,function(i,a){var n=Sigma.T_G.createHeaderCell(t,i,!0);e.appendChild(n),Sigma.Grid.initColumnEvent(t,i)}),this.headTbody.insertBefore(e,this.headTbody.rows[0])},scrollGrid:function(e,t){var i=this.tableMarginLeft,a=this.freezeBodyDiv.clientWidth,n=this.activeCell.offsetLeft+(Sigma.isFF2||Sigma.isFF1?0:i),o=n+this.activeCell.offsetWidth,r=this.activeCell.offsetTop,s=r+this.activeCell.offsetHeight,l=this.bodyDiv.scrollLeft,d=this.bodyDiv.scrollTop,h=l+this.bodyDiv.clientWidth+i,c=d+this.bodyDiv.clientHeight;Sigma.$chk(e)?this.bodyDiv.scrollLeft=e:n<=l+a?this.bodyDiv.scrollLeft=n-a-(a>0?1:0):o>=h&&(this.bodyDiv.scrollLeft=l+o-h+i),Sigma.$chk(t)?this.bodyDiv.scrollTop=t:r<=d?this.bodyDiv.scrollTop=r:s>=c&&(this.bodyDiv.scrollTop=d+s-c)},syncActiveObj:function(e){this.activeCell=e=e||this.activeCell,this.activeRow=e?e.parentNode:null,this.activeColumn=this.getColumn(e),this.activeEditor=this.activeColumn?this.activeColumn.editor:null,this.activeRecord=this.getRecordByRow(this.activeRow)},_prveEditableCell:function(e){for(var t=Sigma.U.prevElement(e);t&&t.offsetWidth<1;)t=Sigma.U.prevElement(t);for(t||(t=Sigma.U.prevElement(e.parentNode),t&&(t=t.cells[t.cells.length-1]));t&&t.offsetWidth<1;)t=Sigma.U.prevElement(t);return t},_nextEditableCell:function(e){for(var t=Sigma.U.nextElement(e);t&&t.offsetWidth<1;)t=Sigma.U.nextElement(t);for(t||(t=Sigma.U.nextElement(e.parentNode),t&&(t=t.cells[0]));t&&t.offsetWidth<1;)t=Sigma.U.nextElement(t);return t},_onKeydown:function(e){function t(t){t&&(o.endEdit(),Sigma.U.stopEvent(e),Sigma.Grid.handleOverRowCore(e,o,t.parentNode),o.initActiveObj_startEdit(e,t))}var i=this.activeCell,a=null,n=e.keyCode,o=this;if(n==Sigma.Const.Key.ESC){if(this.endEdit()===!1)return;Sigma.U.stopEvent(e)}else if(n==Sigma.Const.Key.ENTER){var r=Sigma.U.getEventTarget(e);if(this.editing&&"TEXTAREA"==Sigma.U.getTagName(r))return;if(Sigma.U.stopEvent(e),this.editing){if(!this.autoEditNext)return void this.endEdit();a=this._nextEditableCell(i),t(a)}else this.syncActiveObj(a),this.startEdit()}else if(this.editing&&n==Sigma.Const.Key.TAB&&e.shiftKey)a=this._prveEditableCell(i),t(a);else if(this.editing&&n==Sigma.Const.Key.TAB)a=this._nextEditableCell(i),t(a);else if(i&&!this.editing){switch(n){
case Sigma.Const.Key.LEFT:case Sigma.Const.Key.TAB:if(n==Sigma.Const.Key.LEFT||e.shiftKey){for(a=this._prveEditableCell(i);this.isGroupRow(a);)a=this._prveEditableCell(a);break}case Sigma.Const.Key.RIGHT:for(a=this._nextEditableCell(i);this.isGroupRow(a);)a=this._nextEditableCell(a);break;case Sigma.Const.Key.DOWN:for(a=Sigma.U.nextElement(i.parentNode);this.isGroupRow(null,a);)a=Sigma.U.nextElement(a);a&&(a=a.cells[Sigma.U.getCellIndex(i)]);break;case Sigma.Const.Key.UP:for(a=Sigma.U.prevElement(i.parentNode);this.isGroupRow(null,a);)a=Sigma.U.prevElement(a);a&&(a=a.cells[Sigma.U.getCellIndex(i)])}if(a){Sigma.U.stopEvent(e);var s=(i.parentNode,a.parentNode);this._onRowSelect(s,e),Sigma.Grid.handleOverRowCore(e,this,s),this.initActiveObj(e,a)}}},startEdit:function(){!this.readOnly&&this.activeCell&&this.activeEditor&&(this.activeColumn.editable||this.isInsertRow(this.activeRow))&&Sigma.$invoke(this.activeColumn,"beforeEdit",[this.activeValue,this.activeRecord,this.activeColumn,this])!==!1&&Sigma.$invoke(this,"beforeEdit",[this.activeValue,this.activeRecord,this.activeColumn,this])!==!1&&!this.isDelRow(this.activeRow)&&(this.editing=!0,this.showEditor(this.activeValue,this.activeRecord))},showEditor:function(e,t){var i=this.activeCell,a=this.bodyDiv,n=this.tableMarginLeft;this.activeColumn.frozen&&(i=this.getTwinCells(this.activeCell)[1],a=this.freezeBodyDiv,n=0),this.activeEditor&&this.activeEditor instanceof Sigma.Dialog||a.appendChild(this.activeEditor.getDom()),this.activeEditor.show(),this.activeEditor.setValue(e,t),this.activeEditor!==this.activeDialog&&(this.activeEditor.setPosition((Sigma.isFF2||Sigma.isFF1?0:n)+i.offsetLeft,i.offsetTop),this.activeEditor.setSize(i.offsetWidth,i.offsetHeight)),this.activeEditor.active()},validValue:function(e,t,i,a){if(e.editor){var n=e.editor.doValid(t,i,e,this);return n!==!0&&this.showValidResult(t,n,a,e),n}return!0},hideEditor:function(){if(this.editing){var e=this.activeRow,t=this.activeValue,i=this.activeEditor.parseValue(this.activeEditor.getValue()),a=this.validValue(this.activeColumn,i,this.activeRecord,this.activeCell);a===!0&&String(this.activeValue)!==String(i)&&(this.updateRecordField(this.activeCell,i),this.refreshRow(e,this.activeRecord),this.dirty(this.activeCell),this.activeValue=i),Sigma.$invoke(this.activeColumn,"afterEdit",[i,t,this.activeRecord,this.activeColumn,this]),Sigma.$invoke(this,"afterEdit",[i,t,this.activeRecord,this.activeColumn,this])}this.activeEditor&&this.activeEditor instanceof Sigma.Dialog||this.gridEditorCache.appendChild(this.activeEditor.getDom()),this.activeEditor.hide()},showValidResult:function(e,t,i,a){var n=this.getTwinCells(i);Sigma.U.addClass(n[0],"gt-cell-vaildfailed"),Sigma.U.addClass(n[1],"gt-cell-vaildfailed"),t=[].concat(t),alert(t.join("\n")+"\n\n"+e),Sigma.$thread(function(){Sigma.U.removeClass(n[0],"gt-cell-vaildfailed"),Sigma.U.removeClass(n[1],"gt-cell-vaildfailed")},1500)},getTwinRows:function(e){var t=e,i=e.rowIndex,a=t.id?this.freezeBodyTable.tBodies[0]:this.gridTbodyList[0],n=a?a.rows[i]:null;return!n&&a&&a.parentNode.tFoot&&(n=a.parentNode.tFoot.rows[i-a.rows.length]),t.id?[t,n,i]:[n,t,i]},getTwinCells:function(e,t){var i=Sigma.U.getCellIndex(e),a=0,n=e.parentNode;return t=t||this.getTwinRows(n),t[1]==n?(a=i-(this.showIndexColumn,1),[t[0]?t[0].cells[a]:null,e,i]):(a=i+(this.showIndexColumn,1),[e,t[1]?t[1].cells[a]:null,i])},syncTwinRowCell:function(e,t){if(e||t){e=e||t.parentNode;var i=this.getTwinRows(e),a=i[1];if(e=i[0],a&&e&&(a.className=e.className,Sigma.U.removeClass(a,"gt-row-over")),t){var n=this.getTwinCells(t,i),o=n[1];t=n[0],o&&t&&(o.className=t.className,o.getElementsByTagName("input")[0]?t.innerHTML=o.innerHTML:o.innerHTML=t.innerHTML)}}},initActiveObj:function(e,t){return t=t||Sigma.U.getParentByTagName("td",null,e),this.focusCell(t)},initActiveObj_startEdit:function(e,t,i){if(!(this.rowNum<1)){var a=this.activeCell;this.initActiveObj(e,t),this.activeEditor&&(this.clickStartEdit||a&&a==this.activeCell)&&(Sigma.U.stopEvent(e),this.syncActiveObj(t),this.startEdit())}},getLastSelectRow:function(){return this.selectedRows[this.selectedRows.length-1]},_onCellSelect:function(e){Sigma.$invoke(this,"onCellSelect",[this.activeValue,this.activeRecord,e.cell,e.row,e.colNo,e.rowNo,e.column,this])},_onRowSelect:function(e,t){if(e&&!Sigma.U.hasClass(e.cells[0],"gt-nodata-cell")){if(this.multiSelect&&t.shiftKey){var i=this.getLastSelectRow();if(i&&i.parentNode==e.parentNode){this.unselectAllRow();for(var a=i.rowIndex>e.rowIndex?"prevElement":"nextElement";i&&i!=e;)this.selectRow(i,!0),i=Sigma.U[a](i);return this.selectRow(e,!0),e}}var n=t.ctrlKey;return Sigma.Grid.isSelectedRow(e)?this.multiSelect&&n!==!0&&this.selectedRows.length>1?(this.unselectAllRow(),this.selectRow(e,!0)):n&&this.selectRow(e,!1):(this.multiSelect&&n===!0||this.unselectAllRow(),this.selectRow(e,!0)),e}},_onCellClick:function(e,t,i){Sigma.$invoke(this,"onCellClick",[i.value,i.record,i.cell,i.row,i.colNo,i.rowNo,i.column,this,e])},_onCellDblClick:function(e,t,i){Sigma.$invoke(this,"onCellDblClick",[i.value,i.record,i.cell,i.row,i.colNo,i.rowNo,i.column,this,e])},_onRowClick:function(e,t,i){Sigma.$invoke(this,"onRowClick",[i.value,i.record,i.cell,i.row,i.colNo,i.rowNo,i.column,this,e])},_onRowDblClick:function(e,t,i){Sigma.$invoke(this,"onRowDblClick",[i.value,i.record,i.cell,i.row,i.colNo,i.rowNo,i.column,this,e])},_onBodyClick:function(e,t,i,a){this.endEdit(),this.activeMe();var n,o=a.cell;if(o&&o!=i){o=this.getTwinCells(o)[0],n=o?o.parentNode:this.getTwinRows(a.row)[0];var r=a.eventTarget,s="INPUT"==Sigma.U.getTagName(r)&&"gt-f-check"==r.className;s&&Sigma.checkOneBox(r,this),this._onCellSelect(a),this.selectRowByCheck||this._onRowSelect(n,e),t?(this._onCellDblClick(e,o,a),this._onRowDblClick(e,n,a)):(this._onCellClick(e,o,a),this._onRowClick(e,n,a)),Sigma.U.hasClass(o,"gt-index-col")||this.initActiveObj_startEdit(e,o,t),this.syncTwinRowCell(null,o)}},clickCount:0,clickInterval:500,_eventHandler:function(e,t,i){var a=this;if(i==a.bodyDiv){if("scroll"==t)return a.activeMe(),a.closeGridMenu(),void a.syncScroll()}else i==a.freezeBodyDiv;var n=this.getEventTargets(e);switch(a.lightOverRow&&"mousemove"==t&&Sigma.Grid.handleOverRow(e,a,i),t){case"contextmenu":Sigma.$invoke(a,"onContextMenu",[n.value,n.record,n.cell,n.row,n.colNo,n.rowNo,n.column,a]);break;case"dblclick":return this.clickCount=0,a._onBodyClick(e,!0,i,n);case"click":return Sigma.$thread(function(){a.clickCount=0},a.clickInterval),this.clickCount++,a._onBodyClick(e,!1,i,n);case"mouseover":Sigma.$invoke(a,"onMouseOver",[n.value,n.record,n.cell,n.row,n.colNo,n.rowNo,n.column,a]);break;case"mousemove":Sigma.$invoke(a,"onMouseMove",[n.value,n.record,n.cell,n.row,n.colNo,n.rowNo,n.column,a]);break;case"mouseout":Sigma.$invoke(a,"onMouseOut",[n.value,n.record,n.cell,n.row,n.colNo,n.rowNo,n.column,a]);break;default:return t=(0!==t.indexOf("on")?"on"+t:t).toLowerCase(),Sigma.$invoke(a,t,[e,a,n,t,i])}},bindEvent:function(e,t){var i=this;Sigma.U.addEvent(e,t,function(a){i._eventHandler(a,t,e)})},initMainEvent:function(){function e(e){e=e||window.event;var i=Sigma.U.getParentByTagName("td",null,e);i&&Sigma.U.addClass(i,"gt-hd-row-over"),t.lastOverHdCell!=i&&Sigma.U.removeClass(t.lastOverHdCell,"gt-hd-row-over"),t.lastOverHdCell=i}var t=this;Sigma.initGlobalEvent(),t.monitorResize&&(Sigma.U.addEvent(window,"resize",function(e){t._onResize()}),t.hasResizeListener=!0),Sigma.U.addEvent(t.gridDiv,"mousedown",function(e){t.activeMe()}),t.bindEvent(t.bodyDiv,"scroll"),t.bindEvent(t.bodyDiv,"click"),t.bindEvent(t.bodyDiv,"dblclick"),t.bindEvent(t.bodyDiv,"contextmenu"),t.bindEvent(t.freezeBodyDiv,"click"),t.bindEvent(t.freezeBodyDiv,"dblclick"),Sigma.U.addEvent(t.headDiv,"selectstart",function(e){return Sigma.U.stopEvent(e),!1}),t.bindEvent(t.bodyDiv,"mouseover"),t.bindEvent(t.bodyDiv,"mouseout"),t.bindEvent(t.bodyDiv,"mousemove"),t.bindEvent(t.freezeBodyDiv,"mousemove"),Sigma.U.addEvent(t.headTable,"mousemove",e),Sigma.U.addEvent(t.freezeHeadTable,"mousemove",e)},showCellToolTip:function(e,t){this.toolTipDiv||(this.toolTipDiv=Sigma.$e("div",{className:"gt-cell-tooltip gt-breakline"}),this.toolTipDiv.style.display="none"),this.toolTipDiv.innerHTML=Sigma.$getText(e),this.gridDiv.appendChild(this.toolTipDiv),this.toolTipDiv.style.left=e.offsetLeft+this.bodyDiv.offsetLeft-this.bodyDiv.scrollLeft+(Sigma.isFF2||Sigma.isFF1?0:this.tableMarginLeft)+"px",this.toolTipDiv.style.top=e.offsetTop+e.offsetHeight+this.bodyDiv.offsetTop-this.bodyDiv.scrollTop+this.toolBarTopHeight+(Sigma.isFF?1:0)+"px",t&&(this.toolTipDiv.style.width=t+"px"),this.toolTipDiv.style.display="block"},setParameters:function(e){this.parameters=e},setQueryParameters:function(e){this.queryParameters=e},cleanQueryParameters:function(){this.queryParameters={}},addQueryParameter:function(e,t){this.queryParameters=Sigma.U.add2Map(e,t,this.queryParameters)},removeQueryParameter:function(e){var t=this.queryParameters[e];return this.queryParameters[e]=void 0,delete this.queryParameters[e],t},exceptionHandler:function(e,t){alert(t+"\n\n"+e)},getUpdatedFields:function(){return Sigma.$array(this.dataset.updatedFields)},getColumnInfo:function(){for(var e=[],t=0;t<this.columnList.length;t++){var i=this.columnList[t],a={id:i.id,header:i.header||i.title,fieldName:i.fieldName,fieldIndex:i.fieldIndex,sortOrder:i.sortOrder,hidden:i.hidden,exportable:i.exportable,printable:i.printable};e.push(a)}return e},getSaveParam:function(e){return e=e||{},e[this.CONST.fieldsName]=this.dataset.fieldsName,e[this.CONST.recordType]=this.dataset.getRecordType(),e[this.CONST.parameters]=this.parameters,this.submitUpdatedFields&&(e[this.CONST.updatedFields]=this.getUpdatedFields()),e},getLoadParam:function(e){return e=e||{},e[this.CONST.recordType]=this.dataset.getRecordType(),e[this.CONST.pageInfo]=this.getPageInfo(!0),this.submitColumnInfo&&(e[this.CONST.columnInfo]=this.getColumnInfo()),e[this.CONST.sortInfo]=this.getSortInfo(),e[this.CONST.filterInfo]=this.getFilterInfo(),e[this.CONST.remotePaging]=this.remotePaging,e[this.CONST.parameters]=this.parameters,this.recount&&(e[this.CONST.pageInfo].totalRowNum=-1),e},request:function(e,t,i,a,n){var o=this;o.requesting=!0;t[o.CONST.action];if(e)try{o.ajax=new Sigma.Ajax(e),o.ajax.encoding=o.encoding||o.ajax.encoding,o.ajax.method=o.ajaxMethod||o.ajax.method,o.ajax.mimeType=o.mimeType||o.ajax.mimeType,o.ajax.jsonParamName=o.jsonParamName||o.ajax.jsonParamName,o.ajax.onSuccess=a||Sigma.$empty,o.ajax.onFailure=n||Sigma.$empty,o.ajax.setQueryParameters(o.queryParameters),o.ajax.send({data:t})}catch(e){n({status:"Exception "+e.message},e)}else n({status:"url is null"})},load:function(e,t){var i=this,a=this.loadURL,n=!this.autoLoad&&!this.rendered;if(n)return i.hideWaiting(),void i.hideFreezeZone();this.remotePaging=this.remotePaging!==!1&&!!a;var o=this.getLoadParam();if(e===!0&&(o[this.CONST.pageInfo].totalRowNum=-1),o[this.CONST.action]="load",Sigma.$invoke(this,"beforeLoad",[o,this])!==!1){if(!a||t!==!0&&this.remotePaging===!1&&!this.isFirstLoad)return i.requesting=!0,void i.loadCallBack(function(){var e={};e[i.dataRoot]=i.dataset.data||[];var t=i.getPageInfo(),a=i.dataset.getSize();return t.totalRowNum=a>0?a:0,e[i.CONST.pageInfo]=t,e}(i),o);this.showWaiting();var r=this.request(a,o,"json",function(e){i.loadCallBack(e,o)},function(e,t){var a={};a[i.CONST.exception]=" XMLHttpRequest Status : "+e.status,i.loadFailure(a,t),i.hideWaiting()});return this.isFirstLoad=!1,r}return i.hideWaiting(),!1},query:function(e){this.setQueryParameters(e),this.lastAction="query",this.reload(!0,!0)},saveCallBack:function(e,t,i){var a=this.responseCallBack(e,t);if(this.requesting){var n=Sigma.$extend({},a);this.requesting=!1;var o=!(n[this.CONST.success]===!1||"false"===n[this.CONST.success]);o?this.saveSuccess(n,i):this.saveFailure(n),this.hideWaiting(),Sigma.$invoke(this,"afterSave",[n,o,this])}},saveSuccess:function(e,t){this.dataset.cleanModifiedData(!0),(this.reloadAfterSave||this.autoSaveOnNav&&t)&&(this.recountAfterSave?this.getPageInfo().totalRowNum=-1:e[this.CONST.pageInfo]&&(this.getPageInfo().totalRowNum=e[e.CONST.pageInfo].totalRowNum||this.getPageInfo().totalRowNum),this.reload())},loadSuccess:function(e){this.setContent(e)},loadCallBack:function(e,t){var i=this.responseCallBack(e,t);if(this.requesting){var a=Sigma.$extend({},i);a[this.CONST.success]===!1||"false"===a[this.CONST.success]?(this.loadFailure(a),this.hideWaiting()):this.loadSuccess(a),this.requesting=!1}},responseCallBack:function(response,reqParam,action){action=action||reqParam[this.CONST.action],response=Sigma.$invoke(this,action+"ResponseHandler",[response,reqParam])||response,response&&!Sigma.$type(response,"string","number")||(response={text:response});var respT=null;try{respT=response.text?eval("("+response.text+")"):response}catch(e){respT={text:response.text},respT[this.CONST.exception]=respT.text}return respT[this.CONST.exception]&&(respT[this.CONST.success]=!1),respT},loadFailure:function(e,t){var i=e[this.CONST.exception]||(t?t.message:void 0);alert(" LOAD Failed! \n Exception : \n"+i)},saveFailure:function(e,t){var i=e[this.CONST.exception]||(t?t.message:void 0);alert(" SAVE Failed! \n Exception : \n"+i)},exportFailure:function(e,t){var i=e[this.CONST.exception]||(t?t.message||"":"");alert(" Export "+e.type+" ( "+e.fileName+" ) Failed! \n Exception : \n"+i)},updateRecordField:function(e,t){var i=this.getColumn(e);if(i){var a=this.getRecordByRow(e.parentNode);return this.update(a,i.fieldName,t)}return!1},update:function(e,t,i){if(Sigma.$invoke(this,"beforeUpdate",[e,t,i])!==!1)return this.dataset.updateRecord(e,t,i),!0},cloneDefaultRecord:function(){var e=this.defaultRecord;return Sigma.$type(e,"function")&&(e=e(this,this.dataset,this.dataset.getSize())),Sigma.$clone(e)},renderInsertedRow:function(e){var t,i,a=this.colNum,n=Sigma.T_G.rowStart(this,this.rowNum);this.gridTable.tFoot||this.gridTable.appendChild(Sigma.$e("tfoot")),this.freezeBodyTable.tFoot||this.freezeBodyTable.appendChild(Sigma.$e("tfoot")),t=Sigma.U.createTrFromHTML(this.buildGridRow(n,e,this.rowNum,a),this.gridTable.tFoot),this.showIndexColumn?i=Sigma.U.createTrFromHTML(this.buildGridIndexRow(n,e,this.rowNum,a),this.freezeBodyTable.tFoot):(i=Sigma.U.createTrFromHTML(n+"</tr>",this.freezeBodyTable.tFoot),i.appendChild(Sigma.T_G.freezeBodyCell(this,10,null))),Sigma.U.addClass(t,"gt-row-new"),Sigma.U.addClass(i,"gt-row-new");var o=e[Sigma.Const.DataSet.ROW_KEY];return t.id=o,t.setAttribute(Sigma.Const.DataSet.INDEX,e[Sigma.Const.DataSet.SN_FIELD]),[t,i]},hasDataRow:function(){var e=this.getRows().length>0,t=!!(this.gridTable.tFoot&&this.gridTable.tFoot.rows.length>0);return e||t},toggleEmptyRow:function(){if(this.hasDataRow()){var e=this.getFirstRow();this.isEmptyRow(e)&&Sigma.U.removeNode(e)}else{for(var t=['<tr class="gt-row gt-row-empty" >'],i=0;i<this.colNum;i++)t.push(Sigma.T_G.cell(this.columnList[i],"&#160;"));t.push(Sigma.T_G.rowEndHTML),Sigma.U.createTrFromHTML(t.join(""),this.gridTbodyList[0])}},refreshGrid:function(e){e=e||this;var t=e.dataset.getSize(),i=e.getPageInfo();e.remotePaging||i.pageSize||(i.pageSize=t),t=t>i.pageSize?i.pageSize:t;var a=e.dataset.startRecordNo;e.rowNum=t,e.rowBegin=a,e.rowEnd=a+t,e.colNum=e.columnList.length,e.tableMarginLeft=0;var n=[],o=[];e.buildGridTable(e,n,o),e.bodyDiv.innerHTML=n.join(""),e.freezeBodyDiv.innerHTML=o.join("");var r=Sigma.U.firstChildElement(e.bodyDiv);if(r&&("TABLE"!=Sigma.U.getTagName(r)&&(r=Sigma.U.nextElement(r)),"TABLE"==Sigma.U.getTagName(r)&&(e.gridTable=r,e.gridTbodyList.push(r.tBodies[0]))),r=Sigma.U.firstChildElement(e.freezeBodyDiv),r&&("TABLE"!=Sigma.U.getTagName(r)&&(r=Sigma.U.nextElement(r)),e.freezeBodyTable=r),e.bodyFirstRow=e.getFirstRow(),e.rowNum<1)for(var s=0;s<e.colNum;s++){var l=e.columnList[s];e.bodyFirstRow&&(l.firstCell=e.bodyFirstRow.cells[s],l.firstCell.style.height="0px",l.firstCell.style.borderBottomWidth="0px")}e.hasIndexColumn=e.showIndexColumn,e.isEmptyfreezeZone=!0,Sigma.$thread(function(){e.freezeBodyDiv.style.height=e.bodyDiv.clientHeight+"px",e.syncScroll()})},hideFreezeZone:function(){this.freezeHeadDiv&&(this.freezeHeadDiv.style.display="none"),this.freezeBodyDiv&&(this.freezeBodyDiv.style.display="none")},cleanFreezeHead:function(){for(var e=this.freezeHeadTable.tBodies[0],t=e.rows.length-1;t>=0;t--)Sigma.U.removeNodeTree(e.rows[t])},buildGridTable:function(e,t,i){var a=(""+e.rowEnd).length;a=7*(a<2?1.5:a)+2+1;var n=a+this.cellWidthFix,o=a+this.innerWidthFix,r='style="width:'+n+'px;"',s='style="width:'+o+'px;"';if(this.indexColumnCell=['<td class="gt-index-col" '+r+' ><div class="gt-inner" '+s+" >","</div></td>"],e.showIndexColumn){e.tableMarginLeft=a,e.cleanFreezeHead();var l=Sigma.$e("tr",{className:"gt-hd-row"}),d=Sigma.T_G.freezeHeadCell(e,a,null);l.appendChild(d),e.freezeHeadTable.tBodies[0].appendChild(l),e.freezeHeadDiv.style.left=e.freezeBodyDiv.style.left=this.freezeFixW+"px",e.headTable.style.marginLeft=e.tableMarginLeft+"px",e.freezeHeadDiv.style.display=e.freezeBodyDiv.style.display="block",e.freezeBodyDiv.style.height=parseInt(e.bodyDiv.style.height)+"px"}else e.freezeHeadDiv.style.display=e.freezeBodyDiv.style.display="none";i.push(Sigma.T_G.tableStartHTML),t.push(Sigma.U.replaceAll(Sigma.T_G.tableStartHTML,"margin-left:0px","margin-left:"+e.tableMarginLeft+"px"));var h=e.rowBegin,c=e.rowEnd;e.currentRowNum=h,e.getGridBodyHTML(h,c,-1,t,i),i.push(Sigma.T_G.tableEndHTML)},isNextGroup:function(e,t,i){},isGroupRow:function(e,t){return e=e||(t?t.cells[0]:null),Sigma.U.hasClass(e,"gt-group-row")},isEmptyRow:function(e){return!e||Sigma.U.hasClass(e,"gt-row-empty")},isInsertRow:function(e){return Sigma.U.hasClass(e,"gt-row-new")},isDelRow:function(e){return Sigma.U.hasClass(e,"gt-row-del")},buildGridIndexRow:function(e,t,i,a){var n=[e];return n.push(this.indexColumnCell[0]),n.push(i+1+this.indexColumnCell[1]),n.push(Sigma.T_G.rowEndHTML),n.join("")},buildGridRow:function(e,t,i,a,n){for(var o=[e],r=0,s=0;s<a;s++){var l=this.columnList[s];if(!l.hidden||this.renderHiddenColumn){var d=n&&n[l.id]?n[l.id].attr:null;o.push(Sigma.T_G.cell(l,l.renderer(t[l.fieldIndex],t,l,this,r,i),d)),r++}}return o.push(Sigma.T_G.rowEndHTML),o.join("")},buildGroupGridRow:function(e,t,i,a){var n=[e],o='<td colspan="'+a+'" class="gt-group-row" > + '+i+" -------------</td>";return n.push(o),n.push(Sigma.T_G.rowEndHTML),n.join("")},resetFreeze:function(e){},updateFreezeState:function(){if(this.frozenColumnList){var e,t;for(e=0;e<this.frozenColumnList.length;e++)t=this.columnMap[this.frozenColumnList[e]],t&&this.moveColumn(t.colIndex,e,!0);for(e=0;e<this.frozenColumnList.length;e++)t=this.columnMap[this.frozenColumnList[e]],t&&t.freeze(!0)}},getGroupInfo:function(e,t){return this.getMergeGroupInfo(e,t)},getSeparateGroupInfo:function(e,t){for(var i=this.colNum,a=null,n=0;n<i;n++){var o=this.columnList[n];if(o.grouped){a=o;break}}if(a)for(var r=t-e,s=e,l=0;l<r;l++){var d=this.dataset.getRecord(s++);if(d){this.getUniqueField(d)}}},getMergeGroupInfo:function(e,t){for(var i,a,n=this.colNum,o=t-e,r=1,s={},l=null,d=[],h=0;h<n;h++){for(var c=this.columnList[h],g=e,u=0;u<o;u++){var m=this.dataset.getRecord(g++);if(m){i=d[u]=d[u]||{};var f=i.__gt_group_s_;c.grouped&&(a=i[c.id]=i[c.id]||{},l==m[c.fieldIndex]&&(!f&&0!==f||f>h)?(a.attr=' style="display:none;" ',r++):(s.attr=' rowspan="'+r+'" style="background-color: #eef6ff;"  ',r=1,s=a,l=m[c.fieldIndex],i.__gt_group_s_=h))}}s.attr=' rowspan="'+r+'" style="background-color: #eef6ff;"  '}return d},createSortInfo:function(e){return{columnId:e.id,fieldName:e.fieldName,sortOrder:e.sortOrder,getSortValue:e.getSortValue,sortFn:e.sortFn}},_doSort:function(){!this.sortInfo||this.sortInfo.length<1||this.dataset.sort(this.sortInfo)},addSortInfo:function(e,t){t=t||t===!1?t:this.multiSort;for(var i=[],a=!1,n=0;n<this.columnList.length;n++){var o=this.columnList[n];if(o.grouped){if(a||o.id!=e.columnId){var r=o.sortOrder;r="asc"==r||"desc"==r?r:"asc",o.sortOrder=r}else o.sortOrder=e.sortOrder,a=!0;i.push(this.createSortInfo(o))}}if(!a&&t!==!0)return void(this.sortInfo=i.concat(e));this.sortInfo=this.sortInfo||[];var s,l,d=e.columnId,h=!1;for(l=0;l<this.sortInfo.length;l++)if(s=this.sortInfo[l],s&&s.columnId===d){s.sortOrder=e.sortOrder,h=!0;break}for(!h&&this.sortInfo.push(e),l=0;l<this.sortInfo.length;l++)s=this.sortInfo[l],s&&s.sortOrder&&"defaultsort"!=s.sortOrder||(this.sortInfo.splice(l,1),l--)},updateSortState:function(){var e,t;for(t=0;t<this.colNum;t++)e=this.columnList[t],e.sortIcon&&(e.sortIcon.className="gt-hd-icon"),e.frozenSortIcon&&(e.frozenSortIcon.className="gt-hd-icon"),e.sortOrder=null;if(this.sortInfo&&!(this.sortInfo.length<1)){for(var i=0;i<this.sortInfo.length;i++){var a=this.sortInfo[i];if(a){e=this.columnMap[a.columnId];var n=a.sortOrder||"defaultsort";e.sortOrder=n,Sigma.U.addClass(e.sortIcon,"gt-hd-"+n),Sigma.U.addClass(e.frozenSortIcon,"gt-hd-"+n)}}var o=this.getFirstRow();if(o&&!this.isEmptyRow(o)){this.bodyFirstRow=o;var r=0;for(t=0;t<this.colNum;t++){var s=this.columnList[t];s.hidden&&!this.renderHiddenColumn||(s.firstCell=this.bodyFirstRow.cells[r],s.firstCell.className=s.styleClass,r++)}}}},getRecordByRow:function(e){if(!e)return null;if(this.isInsertRow(e)){var t=e.getAttribute(Sigma.Const.DataSet.INDEX);return this.dataset.insertedRecords[t]}var i=e.getAttribute(Sigma.Const.DataSet.INDEX)/1;return i||0===i?this.dataset.getRecord(i):null},getRowByRecord:function(e){var t=e[Sigma.Const.DataSet.ROW_KEY];return Sigma.doc.getElementById(t)},getUniqueField:function(e){return e[this.dataset.uniqueField]},updateCheckState:function(){var e=this.checkColumn;if(e)for(var t=e.colIndex,i=this.getRows(),a=0,n=i.length;a<n;a++){var o=i[a],r=o.cells[t],s=r?r.getElementsByTagName("input"):null;s=s?s[0]:s,s&&s.checked&&this.selectRow(o,!0)}},updateEditState:function(){var e,t,i,a,n,o=this.getInsertedRecords();for(i=0;i<o.length;i++)this.renderInsertedRow(o[i]);for(n in this.dataset.updatedRecords){t=this.dataset.updatedRecords[n];var r=this.dataset.updatedRecordsBak[n];if(e=this.getRowByRecord(t)){var s=this.getRecordByRow(e);if(s)for(var l in r)for(s[l]=t[l],i=0,a=this.columnList.length;i<a;i++){var d=this.columnList[i];l==d.fieldIndex&&e.cells&&(this.dirty(e.cells[i]),e.cells[i].firstChild.innerHTML=d.renderer(s[d.fieldIndex],s,d,this,i,e.rowIndex))}this.dataset.updatedRecords[n]=s}}for(n in this.dataset.deletedRecords)t=this.dataset.deletedRecords[n],e=this.getRowByRecord(t),this.del(e)},syncScroll:function(e,t){Sigma.$chk(e)&&(this.bodyDiv.scrollLeft=e),Sigma.$chk(t)&&(this.bodyDiv.scrollTop=t),this.headDiv.scrollLeft=this.bodyDiv.scrollLeft,this.freezeBodyDiv.scrollTop=this.bodyDiv.scrollTop,this.scrollLeft=this.bodyDiv.scrollLeft,this.scrollTop=this.bodyDiv.scrollTop},initToolbar:function(){if(this.resizable&&("bottom"==this.toolbarPosition||"b"==this.toolbarPosition)&&this.toolBarBox){this.resizeButton=Sigma.$e("div",{id:this.id+"_resizeButton",className:"gt-tool-resize",innerHTML:"&#160;"}),this.resizeButton.setAttribute("unselectable","on"),this.toolBarBox.appendChild(this.resizeButton);var e=this;Sigma.U.addEvent(this.resizeButton,"mousedown",function(t){Sigma.Grid.startGridResize(t,e)})}if(this.createGridMenu(),this.toolbarContent&&this.toolbarPosition&&"none"!=this.toolbarPosition){this.toolbarContent=this.toolbarContent.toLowerCase();for(var t=this.toolbarContent.split(" "),i=null,a=0;a<t.length;a++){var n=t[a];if("|"==n){var o=Sigma.ToolFactroy.create(this,"separator",!0);i&&(i.separator=o)}else if("state"==n||"info"==n||"pagestate"==n)this.pageStateBar||(this.pageStateBar=Sigma.ToolFactroy.create(this,"pagestate",this.showPageState)),a!=t.length-1&&(this.pageStateBar.className+=" gt-page-state-left"),i=this.pageStateBar;else if("nav"==n)this.navigator.buildNavTools(this),i=this.navigator;else{var r=n.charAt(0).toUpperCase()+n.substring(1);i=this.tools[n+"Tool"]=Sigma.ToolFactroy.create(this,n,this["show"+r+"Tool"])}}}this.expendMenu={},this.over_initToolbar=!0},refreshToolBar:function(e,t){if(e&&this.setPageInfo(e),this.over_initToolbar){this.navigator.refreshState(e,t),this.navigator.refreshNavBar();var i=this.navigator.pageInput;this.pageStateBar&&(e=this.getPageInfo(),Sigma.U.removeNode(this.pageStateBar.firstChild),e.endRowNum-e.startRowNum<1?this.pageStateBar.innerHTML="<div>"+this.getMsg("NO_DATA")+"</div>":this.pageStateBar.innerHTML="<div>"+Sigma.$msg(this.getMsg(i?"PAGE_STATE":"PAGE_STATE_FULL"),e.startRowNum,e.endRowNum,e.totalPageNum,e.totalRowNum,e.pageNum)+"</div>")}},createGridMenu:function(){function e(e,t){e&&(e.show(),e.setTitle(t),i.gridMenuButton.closeMenu())}function t(e){return function(){Sigma.Grid.changeSkin(i,e)}}if(this.showGridMenu&&this.toolBarBox&&this.toolBar){var i=this,a=i.id;this.gridMenuButton=new Sigma.Button({gridId:this.id,parentItem:this,container:this.toolBar,cls:"gt-tool-gridmenu",withSeparator:!0});var n=this.allowGroup?Sigma.createColumnDialog("group",{gridId:a,checkValid:function(e){return e.grouped},checkFn:"group",uncheckFn:"ungroup",checkType:i.multiGroup?"checkbox":"radio",canCheck:function(e){return e.filterable!==!1&&!e.hidden}}):null,o=this.allowFreeze?Sigma.createColumnDialog("freeze",{gridId:a,checkValid:function(e){return e.frozen},checkFn:"freeze",uncheckFn:"unfreeze",canCheck:function(e){return e.freezeable!==!1&&!e.hidden}}):null,r=this.allowHide?Sigma.createColumnDialog("show",{gridId:a,checkValid:function(e){return!e.hidden},checkFn:"show",uncheckFn:"hide",canCheck:function(e){return e.hideable!==!1&&!e.frozen}}):null,s="bottom"!=this.toolbarPosition?"B":"T",l=null;if(this.allowCustomSkin){l=new Sigma.MenuItem({gridId:this.id,type:"",text:this.getMsg("CHANGE_SKIN"),cls:"gt-icon-skin"});for(var d=[],h=0;h<this.skinList.length;h++)d.push(new Sigma.MenuItem({gridId:this.id,type:"radiobox",text:this.skinList[h].text,checked:0===h,onclick:t(this.skinList[h].value)}));l.addMenuItems(d,"R")}this.gridMenuButton.addMenuItems([l,n?new Sigma.MenuItem({gridId:i.id,type:"",text:i.getMsg("MENU_GROUP_COL"),cls:"gt-icon-groupcol",onclick:function(){e(n,i.getMsg("MENU_GROUP_COL"))}}):null,o?new Sigma.MenuItem({gridId:i.id,type:"",text:i.getMsg("MENU_FREEZE_COL"),cls:"gt-icon-freeze",onclick:function(){e(o,i.getMsg("MENU_FREEZE_COL"))}}):null,r?new Sigma.MenuItem({gridId:i.id,type:"",text:i.getMsg("MENU_SHOW_COL"),cls:"gt-icon-hidecol",onclick:function(){e(r,i.getMsg("MENU_SHOW_COL"))}}):null,new Sigma.MenuItem({gridId:this.id,type:"",text:SIGMA_GRID_VER})],s)}},closeDialog:function(){this.activeDialog&&this.activeDialog.close(),this.activeDialog=null},getSortInfo:function(){return this.sortInfo||[]},setTotalRowNum:function(e){this.getPageInfo().totalRowNum=e},getTotalRowNum:function(e){return this.getPageInfo(e).totalRowNum},addSkin:function(e){Sigma.$type(e,"string")&&(e={text:this.getMsg("STYLE_NAME_"+e.toUpperCase()),value:e.toLowerCase()}),this.skinList.push(e)},addRows:function(e){for(var t=0;t<e.length;t++)this.gridRowList.push(e[t])},getFirstRow:function(){return this.gridTbodyList[0]?this.gridTbodyList[0].rows[0]:null},getRows:function(){return this.gridTbodyList[0].rows},getRow:function(e){return Sigma.U.isNumber(e)?this.getRows()[e]:e},getRowNumber:function(){return this.rowNum},hasData:function(){return this.rowNum>0},dirty:function(e){Sigma.U.addClass(e,"gt-cell-updated")},selectFirstRow:function(){var e=this.getRow(0);e&&this.selectRow(e,!0)},unselectAllRow:function(){var e=this;Sigma.$each(this.selectedRows,function(t){Sigma.U.removeClass(t,"gt-row-selected"),e.syncTwinRowCell(t)}),this.selectedRows=[],this.activeRow=null},getSelectedRecord:function(){return this.getRecordByRow(this.selectedRows[this.selectedRows.length-1])||this.activeRecord},getGridHTML:function(e,t){var i=this.getGridHeadHTML();t=t||[Sigma.T_G.bodyTableStart(this.id,!1),i,"<tbody>"];var a=0,n=this.dataset.getSize(),o=e?this.getPageInfo().pageSize:-1;return t.push(this.getGridBodyHTML(a,n,o,t,null,!0)),t.join("")},getGridHeadHTML:function(){var e=this.headTable.innerHTML,t=e.toLowerCase().indexOf("<tr"),i=e.toLowerCase().lastIndexOf("</tr>");return this.customHead&&(t=e.toLowerCase().indexOf("<tr",t+3)),e=e.substring(t,i+"</tr>".length),"<!-- gt : head start  -->"+e+"<!-- gt : head end  -->"},getGridBodyHTML:function(e,t,i,a,n,o){for(var r=this,s=r.colNum,l=r.getGroupInfo(e,t),d=" >",h=null,c=null,g=0,u="",m=e;m<t&&(h=r.dataset.getRecord(m),h);m++){var f=r.customRowAttribute(h,m,r)||"",p=Sigma.T_G.rowStartS(r,m,f);o?m>0&&i>0&&m%i===0&&a.push("\n<!-- gt : page separator  -->\n"):(u=r.rowKey+r.getUniqueField(h),h[Sigma.Const.DataSet.ROW_KEY]=u,r.currentRowNum++,r.showIndexColumn&&n.push(r.buildGridIndexRow(p+d,h,m,s))),r.isNextGroup(h,c,m)&&a.push(r.buildGroupGridRow(p+d,h,m,s));var S=l[g++];a.push(r.buildGridRow(p+' id="'+u+'"'+d,h,m,s,S)),c=h}a.push(Sigma.T_G.tableEndHTML)},getHiddenColumnStyle:function(e){var t=this,i=[];Sigma.$each(t.columnList,function(t,a){(t.hidden===!0||e&&t[e]===!1)&&(i.push(t.CLASS_PREFIX+t.styleClass+" { display:none;width:0px; }"),i.push(t.CLASS_PREFIX+t.innerStyleClass+" { display:none;width:0px; }"))});var a=i.join("\n");return Sigma.U.replaceAll(a,".gt-grid ","")},getAllRows:function(){var e=this;return 0===e.gridRowList.length&&Sigma.$each(e.gridTbodyList,function(t){e.addRows(t.rows)}),e.gridRowList},getAllFreezeRows:function(){var e=this;if(0===e.gridFreezeRowList.length)for(var t=e.freezeBodyTable.tBodies[0].rows,i=0;i<t.length;i++)e.gridFreezeRowList.push(t[i]);return e.gridFreezeRowList},filterHandler:{hide:function(e){e=e||this.filterInfo;Sigma.Grid.filterCheck[e.checkType](e.value,e.checkValue)}},cleanActiveObj:function(){this.activeCell=null,this.activeRow=null,this.activeColumn=null,this.activeEditor=null,this.activeRecord=null,this.activeValue=null},cleanTable:function(e){if(this.closeGridMenu(),this.endEdit()!==!1){if(this.lastOverHdCell=null,e!==!1){this.cleanActiveObj();for(var t=0;t<this.selectedRows.length;t++)this.selectedRows[t]=null;this.selectedRows=[],this.overRow=null,this.overRowF=null}this.gridRowList=[],this.bodyFirstRow=null;for(var i=0;i<this.colNum;i++){var a=this.columnList[i];a.firstCell=null,a.frozenSortIcon=null,a.frozenHdTool=null,a.frozenHeadCell=null}var n=this;Sigma.$each(this.gridTbodyList,function(e,t){Sigma.U.removeNode(e),n.gridTbodyList[t]=null}),Sigma.U.removeNode(this.gridTable),this.gridTable=null,this.gridTbodyList=[],this.cleanFreezeHead(),this.freezeBodyTable&&(Sigma.U.removeNode(this.freezeBodyTable.tBodies[0],this.freezeBodyTable),this.freezeBodyTable=null)}},destroy:function(){var e=this;Sigma.$invoke(this,"beforeDestroy"),this.cleanTable();var t=["gridMenuButton","filterDialog","charDialog","navigator"];Sigma.$each(t,function(t,i){e[t]&&e[t].destroy&&e[t].destroy(),e[t]=null});for(var i in this.tools){var a=this.tools[i];a&&a.destroy&&a.destroy(),this.tools[i]=null}Sigma.U.removeNodeTree(this.gridDialogTitle),Sigma.U.removeNodeTree(this.gridDialogBody),Sigma.U.removeNodeTree(this.gridDialog),this.gridDialog=this.gridDialogBody=this.gridDialogTitle=null;for(var n=0;n<this.colNum;n++){var o=this.columnList[n];o.destroy()}Sigma.$each(this.domList,function(t,i){Sigma.U.removeNode(e[t]),e[t]=null}),this.freezeBodyTable=this.gridTable=this.bodyFirstRow=this.lastOverHdCell=this.overRowF=this.overRow=null,this.gridFreezeRowList=[],this.selectedRows=[],this.cacheBodyList=[],this.frozenColumnList=[],this.sortedColumnList=[],this.checkedRows={},this.gridTbodyList=[],this.gridRowList=[],Sigma.activeGrid==this&&(Sigma.activeGrid=null),Sigma.GridCache[this.id]=null,delete Sigma.GridCache[this.id]},addRow:function(e,t){this.readOnly||this.insert(e,t)},deleteRow:function(e){for(var t=[].concat(e||this.selectedRows),i=0;i<t.length;i++){e=t[i];var a=this.getRecordByRow(e);if(e!=this.activeRow&&this.selectRow(e,!1),a)if(this.isInsertRow(e)){this.activeCell&&this.activeRow==e&&this.cleanActiveObj();var n=this.getTwinRows(e);Sigma.U.removeNode(n[0],n[1]),this.dataset.deleteRecord(a),this.toggleEmptyRow()}else if(Sigma.$invoke(this,"beforeDelete",[a,e,this])!==!1){
var o=this.dataset.isDeletedRecord(a);o?(this.dataset.undeleteRecord(a),Sigma.U.removeClass(e,"gt-row-del")):(this.dataset.deleteRecord(a),Sigma.U.addClass(e,"gt-row-del")),this.syncTwinRowCell(e)}}},selectRow:function(e,t){if(t){for(var i=[].concat(e),a=0,n=i.length;a<n;a++)if(e=this.getRow(i[a]),!this.isEmptyRow(e)){var o=e.rowIndex,r=this.getRecordByRow(e);Sigma.$invoke(this,"beforeRowSelect",[r,e,o,this])!==!1&&(Sigma.U.addClass(e,"gt-row-selected"),this.syncTwinRowCell(e),this.selectedRows.push(e),this.activeRow=e,Sigma.$invoke(this,"afterRowSelect",[r,e,o,this]))}}else e&&(Sigma.U.removeClass(e,"gt-row-selected"),this.syncTwinRowCell(e),Sigma.U.remove(this.selectedRows,e))},addParameters:function(e,t){this.parameters=Sigma.U.add2Map(e,t,this.parameters)},cleanContent:function(){this.setContent({data:[],pageInfo:{pageNum:1,totalPageNum:1,totalRowNum:0,startRowNum:0}})},cleanParameters:function(){this.parameters={}},closeGridMenu:function(){this.gridMenuButton&&this.gridMenuButton.closeMenu()},endEdit:function(){return!(this.activeEditor&&this.activeEditor.locked===!0||this.activeDialog!=this.activeEditor&&this.activeDialog&&!this.activeDialog.hidden)&&void(this.activeCell&&this.activeEditor&&(this.activeColumn.editable||this.isInsertRow(this.activeRow))&&(this.hideEditor(),this.editing=!1,this.syncTwinRowCell(null,this.activeCell)))},exportGrid:function(e,t,i,a,n){var o=this;if(Sigma.$invoke(o,"beforeExport",[e,t,i,a,n,o])!==!1)try{if(e=e||this.exportType,t=t||this.exportFileName,i=i||this.exportURL,a=a||this.jsonParamName||(this.ajax?this.ajax.jsonParamName:Sigma.AjaxDefault.paramName),n="export",this.html2pdf&&"pdf"==e){this.gridFormTextarea.name="__gt_html";var r=['<style type="text/css">',this.getHiddenColumnStyle("exportable"),"</style>"];this.gridFormTextarea.value=r.join("\n")+"\n"+this.getGridHTML(!0)}else{var s=this.getLoadParam();s[this.CONST.action]=n,s[this.CONST.exportType]=e,s[this.CONST.exportFileName]=t,this.gridFormTextarea.name=a,this.gridFormTextarea.value=Sigma.$json(s)}this.gridFormFileName.value=t,this.gridFormExportType.value=e,this.gridForm.action=i,i&&this.gridForm.submit(),this.gridFormTextarea.value=""}catch(i){this.exportFailure({type:e,fileName:t},i)}},getColumn:function(e){return Sigma.U.isNumber(e)&&e>=0?this.columnList[e]:"TD"==Sigma.U.getTagName(e)?this.columnList[Sigma.U.getCellIndex(e)]:"object"==Sigma.$type(e)?e:this.columnMap[e]},getCellValue:function(e,t){var i=this.getColumn(e),a=this.getRecord(t),n=a?a[i.fieldIndex]:null;return n},getColumnValue:function(e,t){return this.getCellValue(e,t)},getDeletedRecords:function(){return Sigma.$array(this.dataset.deletedRecords)},getDisplayColumns:function(e){for(var t=[],i=0;i<this.columnList.length;i++){var a=this.columnList[i];a.hidden!==(e!==!1)&&t.push(a)}return t},getEventTargets:function(e,t){t=t||Sigma.U.getEventTarget(e);var i=null,a=-1,n=-1,o=null,r=null,s=null,l=Sigma.U.getParentByTagName("td",t,e);return l&&(i=l.parentNode,a=Sigma.U.getCellIndex(l),n=i.rowIndex,o=this.columnList[a],r=this.getRecordByRow(i)||{},s=r[o.fieldIndex]),{cell:l,row:i,colNo:a,rowNo:n,column:o,record:r,value:s,eventTarget:t}},getInsertedRecords:function(){return Sigma.$array(this.dataset.insertedRecords)},getRecord:function(e){var t;if(Sigma.U.isNumber(e))t=e;else{if("TD"==Sigma.U.getTagName(e))return this.getRecordByRow(e.parentNode);if("TR"==Sigma.U.getTagName(e))return this.getRecordByRow(e);if(Sigma.$type(e,"object")&&!e.tagName)return e;t=this.selectedRows.length>0?this.selectedRows[this.selectedRows.length-1].getAttribute(Sigma.Const.DataSet.INDEX)/1:0}return this.dataset.getRecord(t)},getSelectedRecords:function(){for(var e=[],t=0;t<this.selectedRows.length;t++)e.push(this.getRecordByRow(this.selectedRows[t]));return e},getUpdatedRecords:function(){return Sigma.$array(this.dataset.updatedRecords)},hideCellToolTip:function(){this.toolTipDiv&&(this.toolTipDiv.style.display="none",this.gridEditorCache.appendChild(this.toolTipDiv),this.toolTipDiv.innerHTML="")},hideDialog:function(){this.activeDialog&&this.activeDialog.hide(),this.activeDialog=null},hideMask:function(){this.gridMask&&(this.gridMask.style.cursor="auto",this.gridMask.style.display="none"),this.pageSizeSelect&&(this.pageSizeSelect.style.visibility="inherit")},insert:function(e,t){if(e=e||this.cloneDefaultRecord()||("array"==this.dataset.getRecordType()?[]:{}),Sigma.$invoke(this,"beforeInsert",[e])!==!1){this.dataset.insertRecord(e),e[Sigma.Const.DataSet.NOT_VAILD]=!0;var i=this.rowKey+this.getUniqueField(e);e[Sigma.Const.DataSet.ROW_KEY]=i;var a=this.renderInsertedRow(e);if(this.bodyDiv.scrollTop=this.bodyDiv.scrollHeight,this.rowNum++,t!==!1){var n=0,o=-1;for(n=0;n<this.columnList.length;n++){var r=this.columnList[n];if(o<0&&!r.hidden&&r.editor&&(o=n),r.frozen&&a[1]){var s=a[0].cells[n].cloneNode(!0);a[1].appendChild(s)}}}this.syncScroll()}this.toggleEmptyRow()},printGrid:function(){function e(e){e.writeln("<style>"),e.writeln(a),e.writeln("</style>"),e.writeln(n),e.close()}var t,i=this;i.closeGridMenu(),i.showWaiting();var a=[" body { margin :5px;padding:0px;}",".gt-table { width:100%;border-left:1px solid #000000 ; border-top:1px solid #000000; }",".gt-table TD { font-size:12px;padding:2px; border-right:1px solid #000000 ; border-bottom:1px solid #000000; }",".gt-hd-row TD { padding:3px; border-bottom:2px solid #000000 ;background-color:#e3e3e3; white-space:nowrap;word-break:keep-all;word-wrap:normal; }",".gt-hd-hidden { }",".gt-row-even {\tbackground-color:#f6f6f6; }"];a.push(this.getHiddenColumnStyle("printable")),i.customPrintCss&&a.push(i.customPrintCss),a=a.join("\n");var n=i.getGridHTML();Sigma.doc.activeElement;if(Sigma.isIE||Sigma.isGecko||Sigma.isSafari)t=i.gridIFrame.contentWindow.document,e(t),i.gridIFrame.contentWindow.focus(),i.gridIFrame.contentWindow.print();else if(Sigma.isOpera){var o=window.open("");t=o.document,e(t),o.focus(),Sigma.$thread(function(){o.print(),Sigma.$thread(function(){o.close()},2e3)})}Sigma.$thread(function(){i.hideWaiting()},1e3)},refresh:function(e){function t(){Sigma.$invoke(i,"beforeRefresh",[i])!==!1&&(i.cleanTable(),!i.remoteSort&&i._doSort(),i.refreshGrid(),i.autoUpdateSortState&&i.updateSortState(),i.sorting=!1,i.autoUpdateEditState&&i.updateEditState(),i.updateCheckState(),i.autoUpdateFreezeState&&i.updateFreezeState(),i.refreshToolBar(),i.syncScroll(a,n),Sigma.$invoke(i,"afterRefresh",[i]),i._onComplete())}this.dataset&&e&&this.dataset.setData(e);var i=this,a=i.scrollLeft,n=i.scrollTop;i.remotePaging===!1&&(i.dataset.startRecordNo=(i.getPageInfo().startRowNum||1)-1),Sigma.$thread(t)},reload:function(e,t){t!==!1||!this.dataset||this.dataset.getSize()<0?this.load(e,!0):this.refresh()},render:function(e){return this.rendered||(e=Sigma.getDom(e),this.container=e||this.container,this.initColumns(),this.initCSS(),this.createMain(),this.createFormIFrame(),this.createGridGhost(),this.initToolbar(),this.initMainEvent(),this.createBody(),this.rendered=!0),this},save:function(e){if(this.endEdit()!==!1){var t=this.saveURL,i=this.getInsertedRecords(),a=this.getUpdatedRecords(),n=this.getDeletedRecords(),o=i&&i.length>0||a&&a.length>0||n&&n.length>0;if(e||o){for(var r=this.gridTable.tFoot?this.gridTable.tFoot.rows:[],s=0,l=i.length;s<l;s++)for(var d=i[s],h=0;h<this.columnList.length;h++){var c=this.columnList[h];if(c.editor){var g=d[c.fieldIndex],u=r[s]?r[s].cells[c.colIndex]:null;if(this.validValue(c,g,d,u)!==!0)return!1}}var m=this.getSaveParam();if(m[this.CONST.action]="save",m[this.CONST.insertedRecords]=i,m[this.CONST.updatedRecords]=a,m[this.CONST.deletedRecords]=n,Sigma.$invoke(this,"beforeSave",[m,this])!==!1){this.showWaiting();var f=this;return this.request(t,m,"json",function(e){return function(t){f.saveCallBack(t,m,e)}}(e),function(e,t){var i={};i[f.CONST.exception]=" XMLHttpRequest Status : "+e.status,f.saveFailure(i,t),f.hideWaiting()})}}else alert(this.getMsg("NO_MODIFIED"));return e===!0&&this.load(),!1}},setCellValue:function(e,t,i){var a=t;Sigma.U.isNumber(a)&&(a=this.dataset.getRecord(a)),this.update(a,this.columnMap[e].fieldName,i)},setColumnValue:function(e,t,i){return this.setCellValue(e,t,i)},setContent:function(e){var t=this.getPageInfo();Sigma.$type(e,"array")?e[this.dataRoot]=e:(e[this.CONST.pageInfo]=e[this.dataPageInfo||this.CONST.pageInfo],e[this.CONST.recordType]&&this.dataset.setRecordType(e[this.CONST.recordType]),e[this.CONST.pageInfo]&&Sigma.$extend(t,e[this.CONST.pageInfo]),t.totalRowNum=e.totalRowNum||t.totalRowNum),e[this.dataRoot]&&Sigma.$invoke(this,"beforeDatasetUpdate",[e[this.dataRoot]])!==!1?(t.totalRowNum=t.totalRowNum||e[this.dataRoot].length,this.refresh(e[this.dataRoot])):this.refresh()},showDialog:function(e){var t=this;switch(e){case"filter":t.filterDialog=t.filterDialog||Sigma.createFilterDialog({title:t.getMsg("DIAG_TITLE_FILTER"),gridId:t.id}),t.filterDialog.show();break;case"chart":var i=t.activeCell?t.getRecordByRow(t.activeRow):t.getRecord();if(!i)break;var a=[],n="",o=300,r=300;i&&(t.charDialog=t.charDialog||new Sigma.Dialog({gridId:t.id,container:t.gridMask,id:"charDialog",width:o,height:r,autoRerender:!0,title:t.getMsg("DIAG_TITLE_CHART")}),t.charDialog.show(),t.chart=new Sigma.Chart({swfPath:t.SigmaGridPath+"/flashchart/fusioncharts/charts/",width:o-3,height:r-23,container:t.charDialog.bodyDiv}),Sigma.$each(t.columnList,function(e,t){e.chartCaption&&(n=e.chartCaption.replace("{@}",i[e.fieldIndex])),e.inChart&&a.push([e.header||e.title,i[e.fieldIndex],e.chartColor||"66bbff"])}),t.chart.caption=t.chartCaption,t.chart.subCaption=n,t.chart.data=a,t.chart.generateChart())}},showMask:function(e){e||this.transparentMask?Sigma.U.addClass(this.gridMask,"gt-transparent"):Sigma.U.removeClass(this.gridMask,"gt-transparent"),this.gridMask&&(this.gridMask.style.display="block"),this.pageSizeSelect&&(this.pageSizeSelect.style.visibility="hidden")},showWaiting:function(){this.showMask(),this.gridWaiting&&!this.transparentMask&&(this.gridWaiting.style.display="block"),this.isWaiting=!0},hideWaiting:function(){this.gridWaiting&&(this.gridWaiting.style.display="none"),this.hideMask(),this.isWaiting=!1},getFilterInfo:function(){return this.filterInfo||[]},setFilterInfo:function(e){this.filterInfo=e||[]},applyFilter:function(e){return this.filterInfo=e||this.filterInfo||[],this.remoteFilter?void this.reload():(this.dataProxyBak=this.dataset.dataProxy,this.filterDataProxy=this.dataset.filterData(this.filterInfo),!this.remoteFilter&&this.justShowFiltered&&(this.dataset.dataProxy=this.filterDataProxy,this.refresh()),this.afterFilter&&this.afterFilter(this.filterDataProxy),this.tools.filterTool&&(this.filterInfo.length>0?Sigma.U.addClass(this.tools.filterTool.itemIcon,"gt-tool-filtered"):Sigma.U.removeClass(this.tools.filterTool.itemIcon,"gt-tool-filtered")),this.filterDataProxy)},setDimension:function(e,t,i){var a=this,n=[this.gridDiv.offsetWidth,this.gridDiv.offsetHeight];e=""+e,t=""+t,this.width=e,this.height=t,"auto"==e.toLowerCase()?this.width=n[0]+"px":e.indexOf("%")<1&&e.indexOf("px")<1&&(this.width=Sigma.U.parseInt(e)+"px"),"auto"==t.toLowerCase()?this.height=n[1]+"px":t.indexOf("%")<1&&t.indexOf("px")<1&&(this.height=Sigma.U.parseInt(t)+"px");var o=!1;(t.indexOf("%")>1||e.indexOf("%")>1)&&this.monitorResize&&(o=!0),o&&(Sigma.isIE?this.gridDiv.style.overflowY="hidden":Sigma.isOpera&&(this.gridDiv.style.overflow="hidden")),a._onResize(i)},getDimension:function(){return{width:this.width,height:this.height}},getSkin:function(){return this.skin},setSkin:function(e){this.skin!=e&&(this.skin=e,Sigma.Grid.changeSkin(this,e))},getPageInfo:function(e){return e?this.navigator.refreshState():this.navigator.pageInfo},setPageInfo:function(e){Sigma.$extend(this.getPageInfo(),e)},gotoPage:function(e){Sigma.$chk(e)&&(this.getPageInfo().pageNum=e),this.autoSaveOnNav?this.save(!0):this.load()},forEachRow:function(e){for(var t=this.getRows(),i=0,a=t.length;i<a;i++){var n=t[i],o=this.getRecordByRow(n);e(n,o,i,this)}},moveColumn:function(e,t,i){if(e!=t){var a=this.columnList.length,n=i!==!0&&"block"==this.freezeHeadDiv.style.display?this.frozenColumnList.length:0;t=t<n?n:t;var o,r=!1;t>=a&&(t=a-1,t^=e,e^=t,t^=e,r=!0);var s=this.getAllRows();for(Sigma.U.insertNodeBefore(this.columnList[e].headCell,this.columnList[t].headCell),o=0;o<s.length;o++)Sigma.U.insertNodeBefore(s[o].cells[e],s[o].cells[t]);for(Sigma.U.moveItem(this.columnList,e,t),o=0;o<a;o++)this.columnList[o].colIndex=o}},sortGrid:function(e){this.sortInfo=e||this.sortInfo,this.remoteSort?this.reload():this.refresh()},getCell:function(e,t){var i=this.getColumn(t),a=this.getRow(e);return a.cells[i.getColumnIndex()]},focusCell:function(e){if(e&&!this.isGroupRow(e)){this.closeGridMenu();var t=e!=this.activeCell;t&&(Sigma.U.removeClass(this.activeCell,"gt-cell-actived"+(this.activeEditor?"-editable":"")),this.syncTwinRowCell(null,this.activeCell)),this.syncActiveObj(e),t&&Sigma.U.addClass(this.activeCell,"gt-cell-actived"+(this.activeEditor?"-editable":"")),this.activeColumn&&this.activeRecord&&(this.activeValue=this.activeRecord[this.activeColumn.fieldIndex]),this.scrollGrid(),this.syncTwinRowCell(null,this.activeCell)}else this.cleanActiveObj();return e},editCell:function(e){this.focusCell(e),this.syncActiveObj(e),this.startEdit()},refreshRow:function(e,t){e=this.getRow(e),t=t||this.getRecordByRow(e);var i=e.getAttribute(Sigma.Const.DataSet.INDEX)/1;this.dataset.initValues(t,i,this.dataset);for(var a=0;a<e.cells.length;a++){var n=this.getColumn(a);if(n==this.activeColumn||n.syncRefresh!==!1){var o=e.cells[a];o.firstChild.innerHTML=n.renderer(t[n.fieldIndex],t,n,this,a,i)}}},checkRow:function(e,t){e=this.getTwinRows(e)[0];for(var i=0;i<e.cells.length;i++){var a=this.getColumn(i);if(a.isCheckColumn){var n=e.cells[i].firstChild.firstChild;if("INPUT"==Sigma.U.getTagName(n)&&"checkbox"==n.type&&Sigma.U.hasClass(n,"gt-f-check"))return void(n.checked!==t&&(n.checked=t,this.selectRowByCheck&&this.selectRow(e,t),t?this.checkedRows[n.value]=!0:delete this.checkedRows[n.value]))}}}},Sigma.Grid=Sigma.$class(Sigma.GridDefault),Sigma.$extend(Sigma.Grid,{isSelectedRow:function(e){return Sigma.U.hasClass(e,"gt-row-selected")},handleOverRowCore:function(e,t,i){return i&&t.overRow!=i?(t.changingStyle=!0,t.overRow&&(t.overRow.className=t.overRow.className.replace(" gt-row-over","")),i.className+=" gt-row-over",t.overRow=i,t.changingStyle=!1,i):void(t.changingStyle=!1)},handleOverRow:function(e,t,i){e=e||window.event;var a=Sigma.U.getParentByTagName("tr",null,e);if(!t.isEmptyRow(a))if(i==t.freezeBodyDiv&&a){var n=t.getRow(a.rowIndex);Sigma.Grid.handleOverRowCore(e,t,n),t.overRowF=a}else Sigma.Grid.handleOverRowCore(e,t,a)},startGridResize:function(e,t){e=e||window.event,t=Sigma.$grid(t),t.closeGridMenu(),t.isGridResizing=!0,t.resizeButton.style.cursor=t.gridGhost.style.cursor="se-resize",t.syncLeftTop(),t.gridGhost.style.top=t.top+Sigma.doc.body.scrollTop+"px",t.gridGhost.style.left=t.left+Sigma.doc.body.scrollLeft+"px";var i=t.gridDiv.offsetWidth,a=t.gridDiv.offsetHeight;t.gridGhost.cx=e.clientX-i,t.gridGhost.cy=e.clientY-a,t.gridGhost.style.width=i+"px",t.gridGhost.style.height=a+"px",t.gridGhost.style.display="block"},endGridResize:function(e,t){var i=Sigma.U.parseInt(t.gridGhost.style.width)+"px",a=Sigma.U.parseInt(t.gridGhost.style.height)+"px";t.gridGhost.style.cursor="auto",t.gridMask.style.display=t.gridGhost.style.display="none",t.isGridResizing=!1,t.setDimension(i,a)},startColumnResize:function(e,t){if(e=e||window.event,t.resizable!==!1){var i=t.grid;if(i.mouseDown=!0,!e.ctrlKey){i.isColumnResizing=!0,i.closeGridMenu(),i.showMask(!0),i.headDiv.style.cursor=i.gridMask.style.cursor="col-resize",i.resizeColumnId=t.id;var a=Sigma.U.getPageX(e);t.oldRightX=a-i.viewportXY[0],i.separateLineMinX=t.oldRightX+t.minWidth-t.headCell.offsetWidth,i.separateLine&&(i.separateLine.style.left=t.oldRightX+"px",i.separateLine.style.height=i.viewport.offsetHeight-2+"px",i.separateLine.style.display="block"),i.columnMoveS&&(i.columnMoveS.style.left=t.headCell.offsetLeft+(Sigma.isFF2||Sigma.isFF1?0:i.tableMarginLeft)+"px",i.columnMoveS.style.display="block")}}},startColumnMove:function(e,t){e=e||window.event;var i=t.grid;if(i.mouseDown=!0,e.ctrlKey&&!i.frozenColumnList[t.getColumnIndex()]){i.closeGridMenu();var a=Sigma.U.getPageX(e),n=t.headCell.offsetLeft;i.columnMoveS.setAttribute("newColIndex",null);var o=i.headerGhost;o.setAttribute("colIndex",t.getColumnIndex()),o.setAttribute("offsetX2",n-a),o.style.left=n+(Sigma.isFF2||Sigma.isFF1?0:i.tableMarginLeft)+"px",o.style.width=t.headCell.offsetWidth-1+"px",o.style.display="block",o.innerHTML='<span style="padding-left:2px;" >'+Sigma.$getText(t.headCell)+"</span>"}},doDocGridHandler:function(e,t){e=e||window.event;var i=Sigma.U.getPageX(e);if(t.separateLine&&"block"==t.separateLine.style.display){var a=i-t.viewportXY[0];a=a>t.separateLineMinX?a:t.separateLineMinX,t.separateLine.style.left=a+"px"}else if(!t.customHead&&t.headerGhost&&"block"==t.headerGhost.style.display){var n=i-t.viewportXY[0]+t.headDiv.scrollLeft;t.headerGhost.style.left=i+(Sigma.isFF2||Sigma.isFF1?0:t.tableMarginLeft)+t.headerGhost.getAttribute("offsetX2")/1+"px";for(var o=-1,r=-1,s=0;s<t.headFirstRow.cells.length;s++){var l=t.headFirstRow.cells[s];if(n>l.offsetLeft&&n<l.offsetLeft+l.offsetWidth){o=l.offsetLeft,r=s;break}}n<=l.offsetLeft&&(s=0),o>=0?(t.columnMoveS.style.left=o+(Sigma.isFF2||Sigma.isFF1?0:t.tableMarginLeft)+"px",t.columnMoveS.style.display="block"):t.columnMoveS.style.display="none",t.columnMoveS.setAttribute("newColIndex",r)}else if(t.isGridResizing){var d=e.clientX-t.gridGhost.cx,h=e.clientY-t.gridGhost.cy;d=d<t.minWidth?t.minWidth:d,h=h<t.minHeight?t.minHeight:h,t.gridGhost.style.width=d+"px",t.gridGhost.style.height=h+"px"}},endDocGridHandler:function(e,t){e=e||window.event,t=Sigma.$grid(t);var i=Sigma.U.getPageX(e);if(t.mouseDown=!1,t.separateLine&&"block"==t.separateLine.style.display){var a=t.columnMap[t.resizeColumnId];a.newRightX=i-t.viewportXY[0];var n=a.newRightX-a.oldRightX,o=n+parseInt(a.width);a.setWidth(o),t.resizeColumnId=-1,t.separateLine.style.display=t.columnMoveS.style.display="none",t.headDiv.style.cursor="auto",t.hideMask(),t.syncScroll(),Sigma.isOpera||(t.isColumnResizing=!1),Sigma.$invoke(t,"afterColumnResize",[a,o,t])}else if(!t.customHead&&t.headerGhost&&"block"==t.headerGhost.style.display){var r=(Sigma.isIE?e.x:e.pageX,t.columnMoveS.getAttribute("newColIndex")),s=t.headerGhost.getAttribute("colIndex");null!==r&&(r+"").length>0&&null!==s&&(s+"").length>0&&(r/=1,r<0&&(r=t.columnList.length),Sigma.$invoke(t,"beforeColumnMove",[s/1,r/1,t])!==!1&&(t.moveColumn(s/1,r/1),t.syncScroll())),t.columnMoveS.style.display="none",t.columnMoveS.setAttribute("newColIndex",null),t.headerGhost.style.display="none",t.headerGhost.setAttribute("colIndex",null),t.headerGhost.style.cursor="auto"}else t.isGridResizing&&Sigma.Grid.endGridResize(e,t)},changeSkin:function(e,t){e=Sigma.$grid(e);for(var i=e.gridDiv.className.split(" "),a=0;a<i.length;a++)0===i[a].indexOf(Sigma.Const.Grid.SKIN_CLASSNAME_PREFIX)&&(i[a]="");i.push(Sigma.Const.Grid.SKIN_CLASSNAME_PREFIX+t),e.gridDiv.className=i.join(" ")},createCheckColumn:function(e,t){var i=t.id;e=Sigma.$grid(e);var a=e.id,n=t.checkValid,o=t.checkValue,r=t.checkType||"checkbox";o||(o=Sigma.$chk(t.fieldIndex)?'record["'+t.fieldIndex+'"];':"grid.getUniqueField(record);"),"string"==typeof o&&(o=new Function("value","record","col","grid","colNo","rowNo",["return ",o].join(""))),n||(n=function(e,t,i,a,n,o,r){return n.checkedRows[e]}),t.header="",t.title=t.title||e.getMsg("CHECK_ALL"),t.width=30,t.resizable=!1,t.printable=!1,t.sortable=!1;var s="gt_"+a+"_chk_"+i;return t.hdRenderer=function(e,t,i){return'<input type="'+r+'" class="gt-f-totalcheck" name="'+s+'" />'},t.renderer=function(e,t,i,a,l,d){var h=o(e,t,i,a,l,d),c=n(h,e,t,i,a,l,d)?'checked="checked"':"";return'<input type="'+r+'" class="gt-f-check" value="'+h+'" '+c+' name="'+s+'" />'},t}}),Sigma.Grid.prototype.initGrid=Sigma.Grid.prototype.render,Sigma.$extend(Sigma.Grid,{render:function(e){return e=Sigma.$grid(e),function(){e.render()}},initColumnEvent:function(e,t,i,a){if(i=i||t.headCell){a=a||Sigma.Grid.getSortIcon(t,i);var n=Sigma.U.nextElement(a),o=Sigma.U.nextElement(n);t.hdTool=t.hdTool||Sigma.Grid.getHdTool(t,i),t.sortIcon=t.sortIcon||a,t.menuButton=t.menuButton||n,t.separator=t.separator||o,t.separator&&t.resizable===!1&&(t.separator.style.display="none"),Sigma.U.addEvent(i,"mousedown",function(i){e.activeMe(),e.endEdit()!==!1&&(e.closeGridMenu(),e.customHead||(Sigma.U.stopEvent(i),Sigma.Grid.startColumnMove(i,t)))}),Sigma.U.addEvent(i,"click",function(a){var n=Sigma.U.getEventTarget(a);if(!e.isColumnResizing)if(Sigma.$invoke(e,"onHeadClick",[a,i,t,e]),"INPUT"==Sigma.U.getTagName(n)&&"checkbox"==n.type&&Sigma.U.hasClass(n,"gt-f-totalcheck"))Sigma.checkTotalBox(n,e,t);else if(t.sortable&&"gt-hd-button"!=n.className){e.lastAction="sort",e.sorting=!0;var o="asc"==t.sortOrder?"desc":"desc"==t.sortOrder&&t.enableDefaultSort?"defaultsort":"asc",r=e.createSortInfo(t);r.sortOrder=o,e.addSortInfo(r),e.sortGrid()}Sigma.isOpera&&(e.isColumnResizing=!1)}),t.resizable&&(o.colID=t.id,o.style.cursor="col-resize",Sigma.U.addEvent(o,"mousedown",function(i){e.activeMe(),Sigma.U.stopEvent(i),Sigma.Grid.startColumnResize(i,t)})),t.sortable||t.resizable||!t.hdTool||(t.hdTool.style.display="none")}},getHdTool:function(e,t){var i=Sigma.U.firstChildElement(t||e.headCell);return Sigma.U.lastChildElement(i)},getSortIcon:function(e,t){var i=Sigma.Grid.getHdTool(e,t);return Sigma.U.firstChildElement(i)},mappingRenderer:function(e,t){return function(i){return e[i]||(void 0===t||null===t?i:t)}},findGridByElement:function(e){for(var t="DIV",i="gt-grid",a="";e=e.parentNode;)if(Sigma.U.getTagName(e)==t&&Sigma.U.hasClass(e,i)){a=e.id;break}return a.indexOf("_div")===a.length-4&&(a=a.substring(0,a.length-4)),Sigma.$grid(a)}});var Ext=Ext||null;return Ext&&Ext.reg&&Ext.reg("gtgrid",Sigma.Grid),Sigma.checkOneBox=function(e,t,i){if(t=Sigma.$grid(t),e=Sigma.$(e),e.checked==i)return i;var a=Sigma.U.getParentByTagName("td",e),n=a.parentNode,o=t.getTwinRows(n)[0];if(i===!0||i===!1){if(Sigma.$invoke(this,"onRowCheck",[o,i,t])===!1)return!!e.checked;e.checked=i}return e.checked?(t.checkedRows[e.value]=!0,t.selectRowByCheck&&t.selectRow(o,!0)):(delete t.checkedRows[e.value],t.selectRowByCheck&&t.selectRow(o,!1)),!!e.checked},Sigma.checkTotalBox=function(e,t,i,a){t=Sigma.$grid(t),e=Sigma.$(e),null!==a&&void 0!==a&&(e.checked=a);for(var n=Sigma.U.getParentByTagName("td",e),o=Sigma.U.getCellIndex(n),r=e.checked,s=i.frozen?t.getAllFreezeRows():t.getAllRows(),l=0,d=s.length;l<d;l++){var h=s[l],c=h.cells[o];if(c){var g=c.getElementsByTagName("input")[0];Sigma.checkOneBox(g,t,r)}}},Sigma.initGlobalEvent=function(){if(!Sigma.initGlobalEvent.inited){var e=Sigma.isIE?Sigma.doc.body:Sigma.doc;Sigma.U.addEvent(e,"mousemove",function(e){Sigma.activeGrid&&Sigma.Grid.doDocGridHandler(e,Sigma.activeGrid)}),Sigma.U.addEvent(e,"mouseup",function(e){Sigma.activeGrid&&Sigma.Grid.endDocGridHandler(e,Sigma.activeGrid)}),Sigma.U.addEvent(e,"click",function(e){Sigma.activeGrid&&(Sigma.activeGrid.endEdit()||Sigma.activeGrid.closeGridMenu())}),Sigma.U.addEvent(e,"keydown",function(e){Sigma.activeGrid&&Sigma.$invoke(Sigma.activeGrid,"onKeyDown",[e])!==!1&&Sigma.activeGrid._onKeydown(e)}),Sigma.initGlobalEvent.inited=!0}},Sigma.ColumnDefault={CLASS_PREFIX:".",destroyList:["sortIcon","hdTool","menuButton","separator","frozenSortIcon","frozenHdTool","frozenHeadCell","headCell","firstCell"],id:0,fieldName:null,width:120,minWidth:45,header:null,styleClass:null,align:"left",headAlign:"left",emptyText:"",sortable:!0,resizable:!0,moveable:!0,editable:!0,hideable:!0,freezeable:!0,groupable:!0,filterable:!0,printable:!0,exportable:!0,sortOrder:null,enableDefaultSort:!1,hidden:!1,frozen:!1,toolTip:!1,beforEdit:null,afterEdit:null,renderer:function(e,t,i,a,n,o){return null!==e&&void 0!==e?e:i.emptyText},hdRenderer:function(e,t){return e},editor:null,fieldIndex:0,gridId:null,filterField:null,newValue:null,cellAttributes:"",getSortValue:null,sortFn:null,format:null,syncRefresh:!0,expression:null,isExpend:!1,initialize:function(e,t){Sigma.$type(e,"string")?this.id=e:Sigma.$extend(this,e),this.id=this.id||encodeURIComponent(this.header),this.header=this.header||this.id,this.fieldName=this.fieldName||this.fieldIndex||this.id,this.fieldIndex=this.fieldIndex||this.fieldName||this.id,this.CLASS_PREFIX=".gt-grid "+this.CLASS_PREFIX},destroy:function(){this.editor&&this.editor.destroy&&this.editor.destroy(),this.editor=null,Sigma.$each(this.destroyList,function(e,t){Sigma.U.removeNode(this[e]),this[e]=null})},getColumnIndex:function(){return this.colIndex},setWidth:function(e){var t=this.grid;e=e<this.minWidth?this.minWidth:e,this.width=e+"px",Sigma.U.CSS.updateRule(this.CLASS_PREFIX+this.styleClass,"width",e+t.cellWidthFix+"px"),Sigma.U.CSS.updateRule(this.CLASS_PREFIX+this.innerStyleClass,"width",e+t.innerWidthFix+"px")},setHeader:function(e){this.header=e;var t=this.headCell.getElementsByTagName("div")[0];if(t){var i=t.getElementsByTagName("span")[0]||t;i.innerHTML=e}},rerender:function(){this.grid.renderHiddenColumn||(this.grid.kickHeader(),this.grid.refresh())},hide:function(){return!this.frozen&&(Sigma.U.CSS.updateRule(this.CLASS_PREFIX+this.styleClass,"display","none"),this.hidden=!0,void this.rerender())},show:function(){return!this.frozen&&(Sigma.U.CSS.updateRule(this.CLASS_PREFIX+this.styleClass,"display",""),this.hidden=!1,void this.rerender())},toggle:function(){return this.hidden?this.show():this.hide()},group:function(e){e!==!1&&(e=!0),this.grouped=e,this.grid.refresh()},ungroup:function(){this.group(!1)},freezeCell:function(e,t,i,a,n,o,r,s){r.hasIndexColumn||(i=e.cloneNode(!1),i.id="",i.appendChild(o.cloneNode(!0)),t.appendChild(i));var l=e.cells[n].cloneNode(!0);i.appendChild(l),s&&0===a&&(this.frozenHeadCell=l,this.frozenSortIcon=Sigma.Grid.getSortIcon(this,this.frozenHeadCell),this.frozenHdTool=Sigma.Grid.getHdTool(this,this.frozenHeadCell),Sigma.isIE||Sigma.Grid.initColumnEvent(r,this,this.frozenHeadCell,this.frozenSortIcon))},freeze:function(e){var t=this.grid,i=this.getColumnIndex();if(!e&&i<t.frozenColumnList.length)return!1;var a,n,o,r=t.headTable.tBodies[0].rows,s=t.freezeHeadTable.tBodies[0].rows,l=10;for(t.hasIndexColumn||(a=Sigma.T_G.freezeHeadCell(t,l,null),n=Sigma.T_G.freezeBodyCell(t,l,null)),o=0;o<r.length;o++)this.freezeCell(r[o],t.freezeHeadTable.tBodies[0],s[o],o,i,a,t,!0);for(t.rowNum<1,t.isEmptyfreezeZone=!1,t.overRow&&(t.overRow.className=t.overRow.className.replace(" gt-row-over","")),r=t.getAllRows(),s=t.freezeBodyTable.tBodies[0].rows,o=0;o<r.length;o++)this.freezeCell(r[o],t.freezeBodyTable.tBodies[0],s[o],o,i,n,t);e||(t.moveColumn(i,t.frozenColumnList.length),t.frozenColumnList.push(this.id)),this.frozen=!0,t.freezeHeadDiv.style.display=t.freezeBodyDiv.style.display="block",t.freezeHeadDiv.style.height=t.headDiv.offsetHeight+"px",t.freezeBodyDiv.style.height=t.bodyDiv.clientHeight+"px",t.hasIndexColumn||(t.freezeHeadDiv.style.left=t.freezeBodyDiv.style.left=0-(l+t.cellWidthFix)+t.freezeFixW+"px"),t.hasIndexColumn=!0,t.syncScroll(),Sigma.U.removeNode(a,n)},unfreezeCell:function(e,t){for(var i=0;i<e.length;i++)Sigma.U.removeNodeTree(e[i].cells[t])},unfreeze:function(){var e=this.grid,t=this.getColumnIndex();if(!e.frozenColumnList||t>=e.frozenColumnList.length)return!1;this.frozenHeadCell=this.frozenHdTool=this.frozenSortIcon=null,e.moveColumn(t,e.frozenColumnList.length-1),e.frozenColumnList.splice(t,1);var i=e.freezeHeadTable.tBodies[0].rows;this.unfreezeCell(i,t+1),e.rowNum<1,i=e.freezeBodyTable.tBodies[0].rows,this.unfreezeCell(i,t+1),this.frozen=!1,e.frozenColumnList.length<1&&(e.showIndexColumn||(e.freezeHeadDiv.style.display=e.freezeBodyDiv.style.display="none")),e.syncScroll()}},Sigma.Column=Sigma.$class(Sigma.ColumnDefault),Sigma.Navigator=Sigma.$class({properties:function(){return{pageInfo:{pageSize:20,pageNum:1,totalRowNum:0,totalPageNum:1,startRowNum:0,endRowNum:0}}},inited:!1,initialize:function(e){var t=e.pageInfo||{};delete e.pageInfo,Sigma.$extend(this,e),Sigma.$extend(this.pageInfo,t)},destroy:function(){var e=this,t=["firstPageButton","prevPageButton","nextPageButton","lastPageButton","gotoPageButton"];Sigma.$each(t,function(t,i){e[t]&&e[t].destroy&&e[t].destroy(),e[t]=null}),Sigma.U.removeNode(this.pageInput),this.pageInput=null},buildNavTools:function(){var e=Sigma.$grid(this.gridId);this.firstPageButton=new Sigma.Button({container:e.toolBar,cls:"gt-first-page",onclick:this.gotoFirstPage,onclickArgs:[this]}),this.prevPageButton=new Sigma.Button({container:e.toolBar,cls:"gt-prev-page",onclick:this.gotoPrevPage,onclickArgs:[this]}),this.nextPageButton=new Sigma.Button({container:e.toolBar,cls:"gt-next-page",onclick:this.gotoNextPage,onclickArgs:[this]}),this.lastPageButton=new Sigma.Button({container:e.toolBar,cls:"gt-last-page",onclick:this.gotoLastPage,onclickArgs:[this]}),this.inited=!0,e.loading||this.refreshState()},createGotoPage:function(){var e=Sigma.$grid(this.gridId);if(this.gotoPageButton=new Sigma.Button({container:e.toolBar,cls:"gt-goto-page",onclick:this.gotoInputPage,onclickArgs:[this],text:e.getMsg("GOTOPAGE_BUTTON_TEXT")}),e.toolBar){var t,i;this.pageInput=Sigma.$e("input",{type:"text",className:"gt-page-input"});var a=this;Sigma.U.addEvent(this.pageInput,"keydown",function(e){var t=e.keyCode;t==Sigma.Const.Key.ENTER&&(Sigma.U.stopEvent(e),a.gotoInputPage(e,a))}),t=Sigma.$e("div",{innerHTML:e.getMsg("PAGE_BEFORE"),className:"gt-toolbar-text"}),i=Sigma.$e("div",{innerHTML:e.getMsg("PAGE_AFTER"),className:"gt-toolbar-text"}),e.toolBar.appendChild(t),e.toolBar.appendChild(Sigma.Button.createToolComp(this.pageInput)),e.toolBar.appendChild(i)}},refreshState:function(e,t){this.pageInfo=e||this.pageInfo;var i=this.pageInfo;if(t!==!1){if(i.totalRowNum<1){var a=Sigma.$grid(this.gridId);i.totalRowNum=a.dataset.getSize()}i.totalPageNum=Math.ceil(i.totalRowNum/i.pageSize),i.pageNum=i.pageNum>i.totalPageNum?i.totalPageNum:i.pageNum,i.pageNum=i.pageNum<1?1:i.pageNum,i.startRowNum=(i.pageNum-1)*i.pageSize+1,i.startRowNum=isNaN(i.startRowNum)?1:i.startRowNum,i.endRowNum=i.startRowNum/1+i.pageSize/1-1,i.endRowNum=i.endRowNum>i.totalRowNum?i.totalRowNum:i.endRowNum}return i},refreshNavBar:function(e){this.pageInfo=e||this.pageInfo;var t=this.pageInfo,i=Sigma.$grid(this.gridId);this.inited&&(this.pageInput&&(this.pageInput.value=t.pageNum,this.pageInput.maxLength=(""+t.totalPageNum).length),1==t.pageNum?(this.firstPageButton.disable(),this.prevPageButton.disable()):(this.firstPageButton.enable(),this.prevPageButton.enable()),t.pageNum==t.totalPageNum?(this.nextPageButton.disable(),this.lastPageButton.disable()):(this.nextPageButton.enable(),this.lastPageButton.enable())),i&&i.pageSizeSelect&&(i.pageSizeList=!i.pageSizeList||i.pageSizeList.length<1?[i.pageSize]:i.pageSizeList,i.pageSizeSelect.innerHTML="",Sigma.U.createSelect(Sigma.U.listToMap(i.pageSizeList),this.pageInfo.pageSize,{},i.pageSizeSelect))},gotoPage:function(e,t,i){e=e||this;var a=e.pageInfo.pageNum,n=Sigma.$grid(e.gridId);t=!t||t<1?1:t>e.pageInfo.totalPageNum?e.pageInfo.totalPageNum:t,Sigma.$invoke(n,"beforeGotoPage",[t,a,e,n])!==!1&&(n.lastAction=i,n.gotoPage(t,a))},gotoInputPage:function(e,t){t.gotoPage(t,Sigma.U.parseInt(t.pageInput.value,t.pageInfo.pageNum),"gotoPage")},gotoFirstPage:function(e,t){t.gotoPage(t,1,"firstPage")},gotoPrevPage:function(e,t){t.gotoPage(t,t.pageInfo.pageNum-1,"prevPage")},gotoNextPage:function(e,t){t.gotoPage(t,t.pageInfo.pageNum+1,"nextPage")},gotoLastPage:function(e,t){t.gotoPage(t,t.pageInfo.totalPageNum,"lastPage")},refreshPage:function(e,t){t.gotoPage(t,t.pageInfo.pageNum,"refreshPage")}}),Sigma.BaseMenuItem=Sigma.$class({id:null,gridId:null,cls:null,type:null,onclickArgs:null,parentItem:null,reference:null,container:null,text:null,toolTip:null,itemBox:null,itemIcon:null,itemText:null,itemAfterIcon:null,subMenu:null,initialize:function(e){this.disabled=!1,this.withSeparator=!1,
this.overShowSubMenu=!0,this.onclick=Sigma.$empty,Sigma.$extend(this,e),this.toolTip=this.toolTip||this.text||""},destroy:function(){this.subMenu&&this.subMenu.destroy(),this.container=null,this.parentItem=null,this.separator&&(Sigma.U.removeNode(this.separator),this.separator=null),Sigma.U.removeNode(this.itemIcon),this.itemIcon=null,Sigma.U.removeNode(this.itemText),this.itemText=null,Sigma.U.removeNode(this.itemAfterIcon),this.itemAfterIcon=null,Sigma.U.removeNode(this.itemBox),this.itemBox=null},onclickAction:function(e,t){Sigma.activeGrid&&Sigma.activeGrid.endEdit();var i=!!t.subMenu&&t.subMenu.hidden;if(t.parentItem&&(t.parentItem.closeSubMenu&&t.parentItem.closeSubMenu(e),t.parentItem.currenItem&&Sigma.U.removeClass(t.parentItem.currenItem.itemBox,"gt-menu-activemenu"),t.parentItem.currenItem=t,Sigma.U.addClass(t.itemBox,"gt-menu-activemenu")),t.disabled||t.onclick.apply(t,[e].concat(t.onclickArgs||t))===!1)return void Sigma.U.stopEvent(e);if(Sigma.U.stopEvent(e),"checkbox"==t.type)t.toggleCheck();else if("radiobox"==t.type){for(var a=t.parentItem.itemList,n=0;n<a.length;n++)"radiobox"==a[n].type&&a[n]!=t&&a[n].uncheckMe();t.checkMe()}t.subMenu&&(i?t.showMenu(e):t.closeMenu(e))},closeSubMenu:Sigma.$empty,checkMe:function(){Sigma.U.removeClass(this.itemIcon,"gt-icon-unchecked"),Sigma.U.addClass(this.itemIcon,"gt-icon-"+this.type),this.checked=!0},uncheckMe:function(){Sigma.U.removeClass(this.itemIcon,"gt-icon-"+this.type),Sigma.U.addClass(this.itemIcon,"gt-icon-unchecked"),this.checked=!1},toggleCheck:function(){this.checked===!0?this.uncheckMe():this.checkMe()},disable:function(){Sigma.U.addClass(this.itemBox,"gt-button-disable"),this.disabled=!0},enable:function(){Sigma.U.removeClass(this.itemBox,"gt-button-disable"),this.disabled=!1},getMenuPosition:function(){return this.subMenu?this.subMenu.position:null},setMenuPosition:function(e){this.subMenu&&e&&(this.subMenu.position=e)},showMenu:function(e){this.subMenu&&(this.getMenuPosition()||this.setMenuPosition("R"),this.subMenu.show(e))},toggleMenu:function(e){this.subMenu&&(this.getMenuPosition()||this.setMenuPosition("R"),this.subMenu.toggle(e))},closeMenu:function(e){for(var t=this;t=t.subMenu;)t.close(e)},addMenuItems:function(e,t){return e&&(this.subMenu||(this.subMenu=new Sigma.GridMenu({gridId:this.gridId,parentItem:this,reference:this.itemBox}),this.itemAfterIcon&&Sigma.U.addClass(this.itemAfterIcon,"gt-menu-parent")),e.gridId=this.gridId,this.setMenuPosition(t),this.subMenu.addMenuItems(e)),this}}),Sigma.Button=Sigma.BaseMenuItem.extend({initialize:function(e){if(this.className="gt-image-button",this.clickClassName="gt-image-button-down",this._parent(e),this.container){this.itemBox=Sigma.$e("a",{href:"javascript:void(0);return false;",className:this.className,title:this.toolTip}),this.itemIcon=Sigma.$e("div",{className:this.cls}),this.itemBox.appendChild(this.itemIcon),this.container.appendChild(this.itemBox),this.withSeparator&&Sigma.Button.createSeparator(this.container);var t=this;Sigma.U.addEvent(t.itemBox,"mousedown",function(e){t.disabled||Sigma.U.addClass(t.itemBox,t.clickClassName)}),Sigma.U.addEvent(t.itemBox,"mouseup",function(e){t.disabled||Sigma.U.removeClass(t.itemBox,t.clickClassName)}),Sigma.U.addEvent(t.itemBox,"click",function(e){t.onclickAction(e,t)}),Sigma.U.addEvent(t.itemBox,"dblclick",function(e){t.onclickAction(e,t)})}}}),Sigma.$extend(Sigma.Button,{createSeparator:function(e){var t=Sigma.$e("div",{className:"gt-image-button gt-button-split"});return e&&e.appendChild(t),t},createCommonButton:function(e,t,i,a,n,o){return new Sigma.Button({id:e,container:n,cls:t,onclick:i,onclickArgs:a,withSeparator:o})},createToolComp:function(e){var t=Sigma.$e("div",{className:"gt-toolbar-comp"});return e&&(Sigma.$type(e,"string","number")?t.innerHTML=e:t.appendChild(e)),t}}),Sigma.MenuItem=Sigma.BaseMenuItem.extend({initialize:function(e){this._parent(e),"checkbox"!=this.type&&"radiobox"!=this.type||(this.cls=this.checked?"gt-icon-"+this.type:"gt-icon-unchecked"),this.itemBox=Sigma.$e("a",{href:"javascript:void(0);return false;",className:"gt-menuitem"}),this.itemIcon=Sigma.$e("div",{className:"gt-menu-icon "+this.cls}),this.itemText=Sigma.$e("div",{className:"gt-checkboxtext",innerHTML:this.text,title:this.toolTip}),this.itemAfterIcon=Sigma.$e("div",{className:"gt-aftericon "+this.afterIconClassName}),this.itemBox.appendChild(this.itemIcon),this.itemBox.appendChild(this.itemText),this.itemBox.appendChild(this.itemAfterIcon);var t=this;Sigma.U.addEvent(t.itemBox,"click",function(e){t.onclickAction(e,t)})}}),Sigma.$extend(Sigma.MenuItem,{createSeparator:function(e){var t=Sigma.$e("div",{className:"gt-image-button gt-button-split"});return e&&e.appendChild(t),t}}),Sigma.GridMenu=Sigma.$class({gridId:null,parentItem:null,container:null,fixX:null,fixY:null,destroy:function(){this.container=null,this.parentItem=null,Sigma.$each(this.itemList,function(e,t,i){Sigma.U.removeNode(e),i[t]=null}),this.itemList=null},initialize:function(e){this.itemList=[],this.refreshOnShow=!1,this.currenItem=null,this.hidden=!0,this.className="gt-popmenu",this.position="",Sigma.$extend(this,e),this.menuBox=Sigma.$e("div",{className:this.className,style:{display:"none",left:"10px",top:"10px"}});var t=Sigma.$grid(this.gridId)||{};this.container=this.container||t.gridDiv||Sigma.doc.body,this.container.appendChild(this.menuBox)},refresh:function(){},onshow:function(){},clearUp:function(){},addMenuItems:function(e){e=[].concat(e);for(var t=0;t<e.length;t++)e[t]&&(e[t].gridId=this.gridId,e[t].parentItem=this,e[t].container=this.menuBox,this.itemList.push(e[t]),this.menuBox.appendChild(e[t].itemBox));return this},show:function(e){this.container&&this.container.parentNode&&this.container.parentNode.className.indexOf("menu")>1,this.menuBox.style.display="block";var t,i,a=Sigma.U.getXY(this.reference,this.container);switch(t=a[0],i=a[1],this.fixX=this.fixX||0,this.fixY=this.fixY||0,this.position.toUpperCase()){case"L":t-=this.menuBox.offsetWidth;break;case"T":i-=this.menuBox.offsetHeight;break;case"R":t+=this.reference.offsetWidth;break;case"B":i+=this.reference.offsetHeight;break;case"LT":t-=this.menuBox.offsetWidth,i-=this.menuBox.offsetHeight-this.reference.offsetHeight;break;case"RT":t+=this.reference.offsetWidth,i-=this.menuBox.offsetHeight-this.reference.offsetHeight;break;case"RB":t+=this.reference.offsetWidth,i+=this.reference.offsetHeight;break;case"LB":t-=this.reference.offsetWidth,i+=this.menuBox.offsetHeight;break;case"M":t=e.pageX||e.clientX-e.x,i=e.pageY||e.clientY-e.y;break;default:i+=this.reference.offsetHeight}Sigma.U.setXY(this.menuBox,[t+this.fixX,i+this.fixY]),this.hidden=!1},close:function(e){this.closeSubMenu(e),this.menuBox.style.display="none",this.hidden=!0},closeSubMenu:function(e){for(var t=0;t<this.itemList.length;t++)this.itemList[t].closeMenu(e)},toggle:function(e){Sigma.U.stopEvent(e);Sigma.$grid(this.gridId);this.hidden===!0?this.show(e):this.close(e)}}),Sigma.ToolFactroy={register:function(e,t){Sigma.ToolFactroy.tools[e]=t},create:function(e,t,i){if(i===!1)return!1;e=Sigma.$grid(e);"info"!=t&&"pagestate"!=t||(t="state");var a=Sigma.ToolFactroy.tools[t];if(a&&Sigma.$type(a,"function"))a=a(e,t,i);else if(a){var n=a.name||t,o=a.onclick||a.action;a=new Sigma.Button({container:a.container||e.toolBar,cls:a.cls||"gt-tool-"+n,toolTip:a.toolTip||e.getMsg("TOOL_"+n.toUpperCase()),onclick:function(t){o(t,e)}})}return a},tools:{goto:function(e){return e.navigator.createGotoPage()},pagesize:function(e){function t(t){e.setPageInfo({pageSize:i.value/1}),e.navigator.gotoFirstPage(t,e.navigator),e.pageSizeSelect.blur();try{e.bodyDiv.focus()}catch(e){}}var i=Sigma.U.createSelect({});i.className="gt-pagesize-select",e.pageSizeSelect=i,Sigma.U.addEvent(e.pageSizeSelect,"change",t);var a=Sigma.$e("div",{innerHTML:e.getMsg("PAGESIZE_BEFORE"),className:"gt-toolbar-text"}),n=Sigma.$e("div",{innerHTML:e.getMsg("PAGESIZE_AFTER"),className:"gt-toolbar-text"});return e.toolBar.appendChild(a),e.toolBar.appendChild(Sigma.Button.createToolComp(e.pageSizeSelect)),e.toolBar.appendChild(n),i},add:{onclick:function(e,t){t.addRow()}},del:{onclick:function(e,t){t.readOnly||t.endEdit()===!1||t.deleteRow()}},save:{onclick:function(e,t){t.lastAction="save",t.save()}},reload:{onclick:function(e,t){t.lastAction="reload",t.reload()}},print:{onclick:function(e,t){t.lastAction="print",t.printGrid()}},xls:{onclick:function(e,t){t.lastAction="export",t.exportGrid("xls")}},pdf:{onclick:function(e,t){t.lastAction="export",t.exportGrid("pdf")}},csv:{onclick:function(e,t){t.lastAction="export",t.exportGrid("csv")}},xml:{onclick:function(e,t){t.lastAction="export",t.exportGrid("xml")}},filter:{onclick:function(e,t){t.lastAction="filter",t.showDialog("filter")}},chart:{onclick:function(e,t){t.showDialog("chart")}},state:function(e){var t=Sigma.$e("div",{innerHTML:"&#160;",className:"gt-page-state"});return e.toolBar.appendChild(t),t},separator:function(e){var t=Sigma.Button.createSeparator(e.toolBar);return t},fill:function(e){var t="";return t}}},Sigma.Widget=Sigma.$class({id:null,dom:null,setDom:function(e){this.dom=e},getDom:function(){return this.dom},show:function(){this.dom&&(this.dom.style.display="block")},hide:function(){this.dom&&(this.dom.style.display="none")},close:function(){this.hide()},setPosition:function(e,t){(e||0===e)&&(this.left=e,this.dom&&(this.dom.style.left=this.left+"px")),(t||0===t)&&(this.top=t,this.dom&&(this.dom.style.top=this.top+"px"))},setSize:function(e,t){this.width=e||this.width,this.height=t||this.height,this.dom&&(this.width/1&&this.width>0&&(this.dom.style.width=this.width-1+"px"),this.height/1&&this.height>0&&(this.dom.style.height=this.height-1+"px"))},destroy:function(){Sigma.$invoke(this,"beforeDestroy"),Sigma.U.removeNode(this.dom),this.dom=null}}),Sigma.DialogDefault={hasCloseButton:!0,autoRerender:!0,title:null,body:null,buttonZone:null,headHeight:20,hidden:!1,initialize:function(e){e&&Sigma.$extend(this,e),this.domId=(this.gridId?this.gridId+"_":"")+this.id,this.buttonLayout=this.buttonLayout||"h",this.dialogId=this.id,Sigma.WidgetCache[this.id]=this},destroy:function(){this.container=null,Sigma.U.removeNode(this.bodyDiv),this.bodyDiv=null,Sigma.U.removeNode(this.dom),this.dom=null,Sigma.WidgetCache[this.id]=null,delete Sigma.WidgetCache[this.id]},titleRender:function(e){return this.title=e||this.title,this.title},show:function(){var e=Sigma.$grid(this.gridId);e.closeGridMenu(),Sigma.$invoke(this,"beforeShow",[e])!==!1&&(this.locked=!0,e.showMask(),this.autoRerender&&this.render(e.gridMask),e.gridMask.appendChild(this.dom),this.width/1&&this.width>0&&(this.dom.style.marginLeft=0-this.width/2+"px"),this.dom.style.marginTop="0px",this.dom.style.top="25px",this.dom.style.display="block",e.activeDialog=this,this.hidden=!1,Sigma.$invoke(this,"afterShow",[e]))},hide:function(){var e=Sigma.$grid(this.gridId);Sigma.$invoke(this,"beforeHide",[e])!==!1&&(this.locked=!1,e.hideMask(),this.dom&&(this.dom.style.display="none",e.gridEditorCache.appendChild(this.dom)),e.activeDialog=null,this.hidden=!0,Sigma.$invoke(this,"afterHide",[e]))},close:function(){Sigma.$grid(this.gridId);this.hide()},confirm:function(){var e=Sigma.$grid(this.gridId);e.activeEditor==this&&(this.locked=!1,e.endEdit(),e.activeEditor=this)},render:function(e){this.container=e||this.container,this.rendered||(this.dom=this.dom||Sigma.$e("div",{className:"gt-grid-dialog"}),this.dom.id=this.domId+"_dialog",this.container=this.container||Sigma.doc.body,this.container.appendChild(this.dom),this.dom.innerHTML=Sigma.T_D.create(this),this.titleDiv=Sigma.$(this.domId+"_dialog_title"),this.bodyDiv=Sigma.$(this.domId+"_dialog_body"),this.height&&(this.bodyDiv.style.height=this.height-(this.headHeight||0)+"px"),this.setBody(),this.setButtons(),this.setTitle(),Sigma.$invoke(this,"afterRender",[this])),this.setSize(),this.setPosition(),Sigma.$type(this.valueDom,"function")&&(this.valueDom=this.valueDom()),this.valueDom=Sigma.$(this.valueDom),this.rendered=!0},setBody:function(e){var t=Sigma.$grid(this.gridId);this.body=e||this.body,this.bodyDiv.innerHTML="",Sigma.$type(this.body,"function")&&(this.body=this.body(t)),this.body&&(Sigma.$type(this.body,"string")?this.bodyDiv.innerHTML=this.body:this.bodyDiv.appendChild(this.body))},setButtons:function(e){if(this.buttons=e||this.buttons,this.buttons){if(e=[].concat(this.buttons),e.length>0){this.buttonZone=this.buttonZone||Sigma.$e("div",{className:"gt-dialog-buttonzone-"+this.buttonLayout,id:this.domId+"_div"}),"h"==this.buttonLayout&&(this.buttonZone.style.width=this.width-12+"px");for(var t=0;t<e.length;t++){var i=null;e[t].breakline?i=Sigma.$e("br"):e[t].html?i=Sigma.$e("span",{innerHTML:e[t].html}):(i=Sigma.$e("button",{id:this.domId+"_"+e[t].id,className:"gt-input-button",innerHTML:e[t].text}),Sigma.U.addEvent(i,"click",e[t].onclick)),this.buttonZone.appendChild(i)}}this.bodyDiv.appendChild(this.buttonZone)}},setTitle:function(e){this.titleDiv.innerHTML=this.titleRender(e)}},Sigma.Dialog=Sigma.Widget.extend(Sigma.DialogDefault),Sigma.createColumnTable=function(e,t){function i(e,t){var i=e.canCheck===!0||e.canCheck(t)!==!1;return'<input type="'+e.checkType+'" name="'+e.name+'" value="'+e.value(t)+'" class="gt-f-check" '+(e.checked(t)?' checked="checked" ':"")+(i?"":' disabled="disabled" ')+" />"}function a(e){return"checkbox"==e.checkType?'<input type="checkbox" name="'+e.name+'" class="gt-f-totalcheck" />':'<input type="radio" name="'+e.name+'" />'}e=Sigma.$grid(e),t=t||{},t.checkType=t.checkType||"checkbox",t.canCheck=t.canCheck||function(e){return!e.hidden};for(var n=e.columnList,o=['<table class="gt-table" style="margin-left:0px" cellSpacing="0"  cellPadding="0" border="0" >','<col style="width:25px" /><col style="width:105px" />',"<thead>",Sigma.T_G.rowStart(e,0),Sigma.T_G.cellStartHTML,a(t),Sigma.T_G.cellEndHTML,Sigma.T_G.cellStartHTML,e.getMsg("COLUMNS_HEADER"),Sigma.T_G.cellEndHTML,Sigma.T_G.rowEndHTML,"</thead>","<tbody>"],r=0;r<n.length;r++)o.push([Sigma.T_G.rowStart(e,r),Sigma.T_G.cellStartHTML,i(t,n[r]),Sigma.T_G.cellEndHTML,Sigma.T_G.cellStartHTML,n[r].header||n[r].title,Sigma.T_G.cellEndHTML,Sigma.T_G.rowEndHTML].join(""));return o.push("</tbody></table>"),o.join("\n")},Sigma.checkChecked=function(e){e=Sigma.$grid(e);for(var t=e.chkAll,i=Sigma.U.getParentByTagName("td",t),a=Sigma.U.getCellIndex(i),n=e.getAllRows(),o=0,r=0,s=n.length;r<s;r++){var l=n[r].cells[a];if(l){var d=l.getElementsByTagName("input")[0];d&&e.checkedRows[d.value]&&(d.checked=!0,o++)}}t.checked=o==n.length},Sigma.createColumnDialog=function(e,t){var i=e+"ColCheck",a=t.gridId,n=a+"_"+e+"ColDialog",o=Sigma.$grid(a),r=function(){var e,a=Sigma.$(n+"_div"),r="TABLE"==Sigma.U.getTagName(a)?a:a.getElementsByTagName("table")[0],s=r.tBodies[0],l=s.getElementsByTagName("input"),d=Sigma.U.getCheckboxState(l,i),h=[];for(e=0;e<o.columnList.length;e++)h.push(o.columnList[e].id);for(e=0;e<h.length;e++){var c=o.columnMap[h[e]];d[c.id]?c[t.checkFn]():c[t.uncheckFn]()}t.autoClose!==!1&&(o._onResize(),Sigma.WidgetCache[n].close())},s=function(){Sigma.WidgetCache[n].close()},l=new Sigma.Dialog({id:n,gridId:a,title:t.title,width:260,height:220,buttonLayout:"v",body:['<div id="'+n+'_div" onclick="Sigma.clickHandler.onTotalCheck(event)" class="gt-column-dialog" >',"</div>"].join(""),buttons:[{text:o.getMsg("TEXT_OK"),onclick:r},{text:o.getMsg("TEXT_CLOSE"),onclick:s}],afterShow:function(){var e=(Sigma.$grid(this.gridId),Sigma.createColumnTable(this.gridId,{type:"checkbox",name:i,value:function(e){return e.id},checked:t.checkValid,checkType:t.checkType,canCheck:t.canCheck}));Sigma.$(this.id+"_div").innerHTML=e}});return l},Sigma.createFilterDialog=function(e){var t=e.gridId,i=Sigma.$grid(t),a=t+"_filterDialog";i.justShowFiltered=e.justShowFiltered===!0||e.justShowFiltered!==!1&&i.justShowFiltered,i.afterFilter=e.afterFilter||i.afterFilter;var n=function(){i._noFilter&&(o(),i._noFilter=!1);var e=Sigma.$(a+"_column_select");if(e&&e.options.length>0){var t=e.value,n=e.options[e.selectedIndex].text;Sigma.$(a+"_div").appendChild(Sigma.createFilterItem(i,t,n))}},o=function(){Sigma.$(a+"_div").innerHTML=""},r=function(){for(var t=Sigma.$(a+"_div"),n=[],o=t.childNodes,r=0;r<o.length;r++)if("DIV"==Sigma.U.getTagName(o[r])&&"gt-filter-item"==o[r].className){var s=o[r].childNodes[1],l=o[r].childNodes[2],d=o[r].childNodes[3].firstChild,h=Sigma.U.getValue(s),c=i.columnMap[h];c&&c.fieldName&&n.push({columnId:h,fieldName:c.fieldName,logic:Sigma.U.getValue(l),value:Sigma.U.getValue(d)})}if(n.length>0){i.applyFilter(n)}else i.applyFilter([]);e.autoClose!==!1&&(i._onResize(),Sigma.WidgetCache[a].close())},s=function(){Sigma.WidgetCache[a].close()},l=430,d=220,h=l-(Sigma.isBoxModel?16:18),c=d-(Sigma.isBoxModel?93:95),g=new Sigma.Dialog({id:a,gridId:t,title:e.title,width:l,height:d,buttonLayout:"h",body:['<div id="'+a+'_div" class="gt-filter-dialog" style="width:'+h+"px;height:"+c+'px;" onclick="Sigma.clickHandler.onFilterItem(event)" >',"</div>"].join(""),buttons:[{html:Sigma.createColumnSelect(i,a+"_column_select")},{text:i.getMsg("TEXT_ADD_FILTER"),onclick:n},{text:i.getMsg("TEXT_CLEAR_FILTER"),onclick:o},{breakline:!0},{text:i.getMsg("TEXT_OK"),onclick:r},{text:i.getMsg("TEXT_CLOSE"),onclick:s}],afterShow:function(){var e=Sigma.$grid(this.gridId),t=e.filterInfo||[];o();for(var i=0;i<t.length;i++){var a=t[i].columnId,n=e.getColumn(a),r=n.header||n.title,s=Sigma.createFilterItem(e,a,r),l=s.childNodes[1],d=s.childNodes[2],h=s.childNodes[3].firstChild;Sigma.U.setValue(l,a),Sigma.U.setValue(d,t[i].logic),Sigma.U.setValue(h,t[i].value),Sigma.$(this.id+"_div").appendChild(s)}t.length<1&&(Sigma.$(this.id+"_div").innerHTML='<div style="color:#999999;margin:10px;">'+e.getMsg("DIAG_NO_FILTER")+"</div>",e._noFilter=!0)}});return g},Sigma.createColumnSelect=function(e,t){e=Sigma.$grid(e);for(var i=["<select"+(t?' id="'+t+'" ':" ")+' class="gt-input-select">'],a=0;a<e.columnList.length;a++){var n=e.columnList[a];n&&n.filterable!==!1&&i.push('<option value="'+n.id+'" >'+(n.header||n.title)+"</option>")}return i.push("</select>"),i.join("")},Sigma.createFilterField=function(e,t){e=Sigma.$grid(e);var i,a=e.getColumn(t);return"function"==typeof a.filterField?i=a.filterField(a):a.filterField&&(i=a.filterField),i=i||'<input type="text" class="gt-input-text gt-filter-field-text" value="" />','<div class="gt-filter-field-box">'+i+"</div>"},Sigma.createFilterItem=function(e,t,i){e=Sigma.$grid(e);var a=Sigma.$e("div",{className:"gt-filter-item"}),n='<input type="text" readonly="readonly" class="gt-input-text gt-filter-col-text" value="'+i+'" />';n+='<input type="hidden"  value="'+t+'" />';var o=Sigma.createFilterField(e,t),r='<button class="gt-input-button gt-filter-del" >'+e.getMsg("TEXT_DEL")+'</button><button class="gt-input-button gt-filter-up" >'+e.getMsg("TEXT_UP")+'</button><button class="gt-input-button gt-filter-down" >'+e.getMsg("TEXT_DOWN")+"</button>";return a.innerHTML=n+Sigma.T_D.filterCondSelect+o+r,a},Sigma.clickHandler={currentElement:null,onFilterItem:function(e){e=e||window.event;var t=Sigma.U.getEventTarget(e);Sigma.U.getParentByTagName("table",null,e,10);if("BUTTON"==Sigma.U.getTagName(t)){var i=" "+t.className,a=t.parentNode;if(i.indexOf(" gt-filter-del")>=0)Sigma.U.removeNode(a);else if(i.indexOf(" gt-filter-up")>=0){var n=a.previousSibling;n&&a.parentNode.insertBefore(a,n)}else if(i.indexOf(" gt-filter-down")>=0){var o=a.nextSibling;o&&a.parentNode.insertBefore(o,a)}}},onTotalCheck:function(e){e=e||window.event;var t=Sigma.U.getEventTarget(e),i=Sigma.U.getParentByTagName("table",null,e,10);if(t&&("checkbox"==t.type||"radio"==t.type))if(Sigma.U.hasClass(t,"gt-f-totalcheck"))for(var a=i.tBodies[0],n=a.getElementsByTagName("input"),o=0;o<n.length;o++)n[o].name==t.name&&n[o].type==t.type&&(n[o].checked=t.checked);else if(Sigma.U.hasClass(t,"gt-f-check")){var r=i.tHead,s=r.getElementsByTagName("input")[0];s&&(s.checked=!1)}}},Sigma.EditorDefault={gridId:null,left:0,top:0,render:Sigma.$empty,validator:null,isFocus:Sigma.$empty,onKeyPress:Sigma.$empty,errMsg:null,isActive:null,valueDom:null,locked:!1,initialize:function(e){e&&Sigma.$extend(this,e),this.validator=this.validator||this.defaultValidator,Sigma.$type(this.validRule,"string")&&(this.validRule=this.validRule.split(",")),this.required&&(this.validRule=["required"].concat(this.validRule)),this.dom=this.dom||Sigma.$e("div",{className:"gt-editor-container"}),Sigma.U.addEvent(this.dom,"click",function(e){Sigma.U.stopEvent(e)}),Sigma.U.addEvent(this.dom,"dblclick",function(e){Sigma.U.stopEvent(e)})},destroy:function(){this.container=null,Sigma.U.removeNode(this.valueDom),this.valueDom=null,Sigma.U.removeNode(this.dom),this.dom=null,Sigma.WidgetCache[this.id]=null,delete Sigma.WidgetCache[this.id]},setValue:function(e,t,i,a,n,o,r){Sigma.U.setValue(this.valueDom,e)},getValue:function(e,t,i,a,n,o,r){return Sigma.U.getValue(this.valueDom)},parseValue:function(e,t,i,a,n,o,r){return e},getDisplayValue:function(e){return void 0===e?this.getValue():e},defaultValidator:function(e,t,i,a,n){for(var o=[],r=[].concat(n.validRule),s=0;s<r.length;s++){var l=r[s],d=[e];Sigma.$type(l,"array")&&l.length>0&&(l=l[0],d=d.concat(l.slice(1)));var h=Sigma.Validator.getValidator(l),c=!0;if(Sigma.$type(h,"function")&&(c=h.apply(h,d)),c!==!0){var g=Sigma.Validator.getMessage(this.validRule[s])||String(c);o.push(g)}}return(!o||o.length<1)&&(o=""),o},doValid:function(e,t,i,a){if(!this.validRule&&!this.validator)return!0;e=void 0===e||null===e?this.getValue():e;var n=this.validator(e,t,i,a,this);return n===!0||void 0===n||null===n||""===n||n},active:function(){Sigma.U.focus(this.valueDom)}},Sigma.Editor=Sigma.Widget.extend(Sigma.EditorDefault),Sigma.DialogEditor=Sigma.Editor.extend(Sigma.$extend({getDom:function(){if(!this.dom&&this.render){var e=Sigma.$grid(this.gridId);this.render(e.gridMask)}return this.dom}},Sigma.DialogDefault)),Sigma.EditDialog=Sigma.DialogEditor,Sigma.Calendar=window.Calendar||{trigger:Sigma.$empty},Sigma.$extend(Sigma.Editor,{factroy:function(e,t){return Sigma.$type(e,"function")&&(e=e(t)),e&&Sigma.Editor.EDITORS[e.type]?Sigma.Editor.EDITORS[e.type](e):null},register:function(e,t){Sigma.Editor.EDITORS[e]=t},EDITORS:{text:function(e){return e=new Sigma.Editor(e),e.valueDom=Sigma.$e("input",{type:"text",value:e.defaultValue||"",className:"gt-editor-text"}),e.dom.appendChild(e.valueDom),e},textarea:function(e){return e=new Sigma.Editor(e),e.valueDom=Sigma.$e("textarea",{style:{width:e.width||"100px",height:e.height||"50px"},value:e.defaultValue||"",className:"gt-editor-text"}),e.dom.appendChild(e.valueDom),e.dom.style.width=e.valueDom.style.width,e.dom.style.height=e.valueDom.style.height,e.setSize=Sigma.$empty,e},select:function(e){return e=new Sigma.Editor(e),e.valueDom=Sigma.U.createSelect(e.options,null,{className:"gt-editor-text"}),e.dom.appendChild(e.valueDom),e.getDisplayValue=function(e){e=void 0===e?this.getValue():e;for(var t=0;t<this.valueDom.options.length;t++)if(String(this.valueDom.options[t].value)===String(e))return this.valueDom.options[t].text||this.valueDom.options[t].innerHTML;return this.defaultText||""===this.defaultText?this.defaultText:null},e},checkbox:function(e){return e=new Sigma.Editor(e),e.valueDom=Sigma.U.createSelect(e.options,null,{}),e.dom.appendChild(e.valueDom),e},date:function(e){e=new Sigma.Editor(e);var t=Sigma.$e("input",{type:"text",value:e.defaultValue||"",className:"gt-editor-text",style:{width:"78px",styleFloat:"left"}}),i=Sigma.$e("input",{type:"button",value:e.defaultValue||"",className:"gt-editor-date",styleFloat:"left"});e.dom.style.overflow="hidden",e.dom.appendChild(t),e.dom.appendChild(i),e.setSize=function(e,t){this.width=e||this.width,this.height=t||this.height,this.width/1&&this.width>0&&(this.dom.style.width=this.width-1+"px"),this.height/1&&this.height>0&&(this.dom.style.height=this.height-1+"px"),this.dom.firstChild.style.width=this.width-20+"px"};var a=function(t){e.onClose&&e.onClose(),t.hide()},n=function(){var i=e.format||"%Y-%m-%d";i=Sigma.U.replaceAll(i,"yyyy","%Y"),i=Sigma.U.replaceAll(i,"MM","%m"),i=Sigma.U.replaceAll(i,"dd","%d"),i=Sigma.U.replaceAll(i,"HH","%H"),i=Sigma.U.replaceAll(i,"mm","%M"),i=Sigma.U.replaceAll(i,"ss","%S"),Sigma.Calendar.trigger({inputField:t,ifFormat:i,showsTime:!0,button:"date_button",singleClick:!0,onClose:a,step:1})};return Sigma.U.addEvent(i,"click",n),e.valueDom=t,e}}}),Sigma.Validator={hasDepend:/^datetime|^date|^time|^minlength|^maxlength|^DT|^D|^T|^MINL|^MAXL/,hasArgument:/^equals|^lessthen|^EQ|^LT/,DATE_FORMAT:"yyyy-MM-dd",TIME_FORMAT:"HH:mm:ss",DATETIME_FORMAT:"yyyy-MM-dd HH:mm:ss",KeyMapping:{R:"required",DT:"datetime",D:"date",T:"time",E:"email",ID:"idcard",N:"number",int:"integer",I:"integer",F:"float",M:"money",RG:"range",EQ:"equals",LT:"lessthen",GT:"greatethen",U:"url",ENC:"enchar",CNC:"cnchar",MINL:"minlength",MAXL:"maxlength"},RegExpLib:{email:/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/,number:/^\d+$/,integer:/^[1-9]\d*|0$/,float:/^([1-9]\d*\.\d+|0\.\d+|[1-9]\d*|0)$/,money:/^([1-9]\d*\.\d{1,2}|0\.\d{1,2}|[1-9]\d*|0)$/,telephone:/^[+]{0,1}(\d){1,3}[ ]?([-]?((\d)|[ ]){1,16})+$/,enchar:/^[ \w]*$/,cnchar:/^[\u4E00-\u9FA5\uF900-\uFA2D]*$/,idcard:/^(\d{15}|\d{18}|\d{17}X?)$/i},getValidator:function(e){return Sigma.Validator[e]},getMessage:function(msgKey){var msg=Sigma.Msg.Validator.default[msgKey];msg||(msg=Sigma.Msg.Validator.default[Sigma.Validator.KeyMapping[msgKey]]);var _format=((Sigma.Validator.KeyMapping[msgKey]||msgKey)+"_FORMAT").toUpperCase();_format=Sigma.Validator[_format];for(var wordNum=(" "+msg).split(/\{[0-9]/).length-1,i=1;i<=wordNum;i++){var ns=arguments[i];2==i&&(ns=ns||_format);var rex;eval("rex = /{("+(i-1)+"[^#}]*)#?([^}]*)}/;");var ostring=rex.exec(msg);ostring&&ostring.length>2&&(msg=ns?Sigma.U.replaceAll(msg,ostring[0]," "+ns+" "):Sigma.U.replaceAll(msg,ostring[0]," "+ostring[2]+" "))}return msg},required:function(e){if(null===e||void 0===e)return!1;if("string"!=typeof e&&e.length){if(e.length<1)return!1;for(var t=0;t<e.length;t++){var i=Sigma.Validator.required(e[t]);if(i)return!0}return!1}return Sigma.U.trim(e+"").length>0},telephone:function(e){return!!Sigma.Validator.RegExpLib.telephone.exec(e)},email:function(e){return e&&Sigma.Validator.RegExpLib.email.test(e)},enchar:function(e){return e&&Sigma.Validator.RegExpLib.enchar.test(e)},cnchar:function(e){return e&&Sigma.Validator.RegExpLib.cnchar.test(e)},number:function(e){return!isNaN(e/1)},integer:function(e){return String(e).indexOf(".")<0&&!isNaN(e/1)&&Sigma.Validator.RegExpLib.integer.test(Math.abs(e))},float:function(e){return!isNaN(e/1)&&Sigma.Validator.RegExpLib.float.test(Math.abs(e))},money:function(e){return!isNaN(e/1)&&Sigma.Validator.RegExpLib.money.test(e)},idcard:function(e){if(!e||e.length<15||!Sigma.Validator.RegExpLib.idcard.test(e))return!1;var t;return t=18==e.length?e.substr(6,8):"19"+e.substr(6,6),Sigma.Validator.date(t,"YYYYMMDD")},date:function(e,t){e=[].concat(e),(!t||t.length<1)&&(t=Sigma.Validator.DATE_FORMAT),t=t.toUpperCase();var i=t.replace(/([$^.*+?=!:|\/\\\(\)\[\]\{\}])/g,"\\$1");i=i.replace("YYYY","([0-9]{4})"),i=i.replace("YY","([0-9]{2})"),i=i.replace("MM","(0[1-9]|10|11|12)"),i=i.replace("M","([1-9]|10|11|12)"),i=i.replace("DD","(0[1-9]|[12][0-9]|30|31)"),i=i.replace("D","([1-9]|[12][0-9]|30|31)"),i="^"+i+"$";for(var a=new RegExp(i),n=0,o=1,r=1,s=t.match(/(YYYY|YY|MM|M|DD|D)/g),l=0;l<e.length;l++){if(!a.test(e[l]))return!1;for(var d=a.exec(e[l]),h=0;h<s.length;h++)switch(s[h]){case"YY":case"yy":var c=Number(d[h+1]);n=1900+(c<=30?c+100:c);break;case"YYYY":case"yyyy":n=Number(d[h+1]);break;case"M":case"MM":o=Number(d[h+1]);break;case"D":case"d":case"DD":case"dd":r=Number(d[h+1])}var g=n%4===0&&(n%100!==0||n%400===0);if(r>30&&(2==o||4==o||6==o||9==o||11==o))return!1;if(2==o&&(30==r||29==r&&!g))return!1}return!0},time:function(e,t){e=[].concat(e),(!t||t.length<1)&&(t=Sigma.Validator.TIME_FORMAT);var i=t.replace(/([.$?*!=:|{}\(\)\[\]\\\/^])/g,"\\$1");i=i.replace("HH","([01][0-9]|2[0-3])"),i=i.replace("H","([0-9]|1[0-9]|2[0-3])"),i=i.replace("mm","([0-5][0-9])"),i=i.replace("m","([1-5][0-9]|[0-9])"),i=i.replace("ss","([0-5][0-9])"),i=i.replace("s","([1-5][0-9]|[0-9])"),i="^"+i+"$";for(var a=new RegExp(i),n=0;n<e.length;n++)if(!a.test(e[n]))return!1;return!0},datetime:function(e,t){e=[].concat(e);var i=/^\S+ \S+$/;if(!t||t.length<1)t=Sigma.Validator.DATETIME_FORMAT;else if(!i.test(t))return!1;for(var a=0;a<e.length;a++){if(!i.test(e[a]))return!1;var n=e[a].split(" "),o=t.split(" "),r=Sigma.Validator.date(n[0],o[0])&&Sigma.Validator.time(n[1],o[1]);if(!r)return!1}return!0},range:function(e,t,i){return Sigma.$chk(t)?Sigma.$chk(i)?e>=t&&e<=i:e>=t:e<=i},equals:function(e,t){t=[].concat(t);for(var i=0;i<t.length;i++)if(e==t)return!0;return!1},lessthen:function(e,t){t=[].concat(t);for(var i=0;i<t.length;i++)if(e<=t)return!0;return!1},greatethen:function(e,t){t=[].concat(t);for(var i=0;i<t.length;i++)if(e>=t)return!0;return!1},minlength:function(e,t){return Sigma.$chk(e)&&(e+"").length>=t},maxlength:function(e,t){return Sigma.$chk(e)&&(e+"").length<=t}},function(){for(var e in Sigma.Validator.KeyMapping)Sigma.Validator[e]=Sigma.Validator[Sigma.Validator.KeyMapping[e]]}(),Sigma.Chart=Sigma.$class({initialize:function(e){this.defaultColor="66BBFF",this.type="column2D",this.swfPath="./charts/",this.swf=Sigma.Chart.SWFMapping[this.type],this.width="100%",this.height="100%",this.data=null,this.container=null,this.chart=null,Sigma.$extend(this,e),this.swf=Sigma.Chart.SWFMapping[this.type]||this.swf,this.swfPath.lastIndexOf("/")==this.swfPath.length-1&&(this.swfPath=this.swfPath.substring(0,this.swfPath.length-1)),this.container=Sigma.$(this.container),this.chart=this.chart||new FusionCharts(this.swfPath+"/"+this.swf,this.container.id+"_chart",this.width,this.height)},json2Params:function(e){if(e.isNull){if(!e.name)return"";e={name:e.name}}else e.color&&(e.color=e.color||this.defaultColor);var t=[];for(var i in e)t.push(i+"='"+e[i]+"'")},createSetsXML:function(e){e=e||this.data;return""},createChartXML:function(e,t){t=t||this.setsXML;var i=["<graph","caption='"+(this.caption||"")+"'","subCaption='"+(this.subCaption||"")+"'","outCnvBaseFontSize='12'","animation='0'"];return i.push(">"+t+"</graph>"),this.chartXML=i.join(" "),this.chartXML},updateChart:function(e,t){e=e||this.container,t=t||this.chartXML,window.updateChartXML&&window.updateChartXML(e,t)},generateChart:function(e,t){this.data=t||this.data,this.createSetsXML(),this.createChartXML(),e=e||this.container,this.chart.setDataXML(this.chartXML),this.chart.render(e)}}),Sigma.Chart.SWFMapping={column2D:"FCF_Column2D.swf",pie3D:"FCF_Pie3D.swf"},Sigma}.call(exports,__webpack_require__,exports,module),!(void 0!==__WEBPACK_AMD_DEFINE_RESULT__&&(module.exports=__WEBPACK_AMD_DEFINE_RESULT__))},function(e,t,i){var a,n;a=[i(3),i(8),i(4),i(5),i(6),i(7),i(2),i(36),i(56),i(34)],n=function(e,t,i,a,n,o,r,s,l,d){"use strict";function h(t){i.info("FENIX Sigmagrid"),i.info(t),e.extend(!0,this,o,t);var a=this._validateInput();return a===!0?(this._initVariables(),this._bindEventListeners(),this._renderSigmagrid(this.pivotatorConfig),this):(i.error("Impossible to create Sigmagrid"),void i.error(a))}var c,g=0;return h.prototype.on=function(e,t){return this.channels[e]||(this.channels[e]=[]),this.channels[e].push({context:this,callback:t}),this},h.prototype.update=function(e){this._renderSigmagrid(e)},h.prototype._trigger=function(e){if(!this.channels[e])return!1;for(var t=Array.prototype.slice.call(arguments,1),i=0,a=this.channels[e].length;i<a;i++){var n=this.channels[e][i];n.callback.apply(n.context,t)}return this},h.prototype._validateInput=function(){var e=!0,t=[];return t.length>0?t:e},h.prototype._initVariables=function(){this.channels={},this.pivotator=new r,this.id||(window.fx_olap_id>=0?window.fx_olap_id++:window.fx_olap_id=0,this.id=String(window.fx_olap_id),i.info("Set signagrid id to: "+this.id)),this.$el=e(this.el)},h.prototype._bindEventListeners=function(){},h.prototype._renderSigmagrid=function(t){
var i=this.model,a={fields:[],recordType:"array",data:i.data},n=[],o=this.pivotator.toTree(i.cols2,"colspan"),r=this.pivotator.toTree(i.cols2label,"colspan"),s={};for(var h in t.hidden)s[t.hidden[h]]=!0;for(var h in i.rowname)i.rowname.hasOwnProperty(h)&&(n.push({id:i.rowname[h].id,header:i.rowname[h].title[this.lang]||i.rowname[h].title.EN,frozen:!0,hidden:s.hasOwnProperty(i.rowname[h].id),grouped:t.groupedRow}),a.fields.push({name:i.rowname[h].id}));for(var h in o)if(t.values.length>1||0==t.columns.length){if(h==o.length-1)for(var u in o[h])for(var m in t.values){var f;f=0==m?"value":t.values[m].replace(/.*\|\*/g,""),n.push({id:o[h][u].id.replace(/\W/g,"_")+"_"+t.values[m].replace(/\|\*/g,"_").replace(/\W/g,"_"),header:r[h][u].id.replace(/_/g,"\n")+"\n"+f}),a.fields.push({name:o[h][u].id.replace(/\W/g,"_")+"_"+t.values[m].replace(/\|\*/g,"_").replace(/\W/g,"_")})}}else if(h==o.length-1)for(var u in o[h])n.push({id:o[h][u].id.replace(/\W/g,"_"),header:r[h][u].id.replace(/_/g,"\n")}),a.fields.push({name:o[h][u].id.replace(/\W/g,"_")});g++;var p=e.extend(!0,{},l,{id:this.id+"_"+this.id+g,dataset:a,columns:n,container:this.id+"_"+this.id+g});return this.$el.find(".datagrid").remove(),this.$el.append("<div id='"+this.id+"_"+this.id+g+"' class='datagrid' />"),c=new d.Grid(p),d.Grid.render(c)(),this._trigger("ready"),i},h.prototype._createOlapHeader=function(e,t,i){var a={};return a.rowname=e.rowname.slice(0),a.rowSpan=t.columns.length,a.columnHead={},a.columnTail=[],a.columnHead=i.slice(0)[0],a.columnTail=i.slice(1),s(a)},h.prototype._populateData=function(e,t,i){return i},h.prototype._getEventName=function(e){return this.id.concat(e)},h.prototype._unbindEventListeners=function(){},h.prototype.dispose=function(){this._unbindEventListeners()},h}.apply(t,a),!(void 0!==n&&(e.exports=n))},function(e,t,i){var a=i(37);e.exports=(a.default||a).template({1:function(e,t,i,a,n){var o,r=null!=t?t:{},s=i.helperMissing,l=e.escapeExpression,d=e.lambda;return"                <td rowspan='"+l((o=null!=(o=i.rowSpan||(null!=t?t.rowSpan:t))?o:s,"function"==typeof o?o.call(r,{name:"rowSpan",hash:{},data:n}):o))+"' columnId=\""+l(d(null!=t?t.id:t,t))+"\" resizable='false'\n                onmouseover=\"console.log("+l(d(t,t))+')"\n                >\n\n                    '+l((i.i18n||t&&t.i18n||s).call(r,null!=t?t.title:t,{name:"i18n",hash:{},data:n}))+"</td>\n"},3:function(e,t,i,a,n){var o,r=null!=t?t:{},s=i.helperMissing,l=e.escapeExpression;return"                <td colspan='"+l((o=null!=(o=i.colSpan||(null!=t?t.colSpan:t))?o:s,"function"==typeof o?o.call(r,{name:"colSpan",hash:{},data:n}):o))+"'>"+l((i.i18n||t&&t.i18n||s).call(r,null!=t?t.title:t,{name:"i18n",hash:{},data:n}))+"</td>\n"},5:function(e,t,i,a,n){var o;return"\n            <tr>\n"+(null!=(o=i.each.call(null!=t?t:{},null!=t?t.columns:t,{name:"each",hash:{},fn:e.program(6,n,0),inverse:e.noop,data:n}))?o:"")+"            </tr>\n\n"},6:function(e,t,i,a,n){var o,r=null!=t?t:{},s=i.helperMissing,l=e.escapeExpression;return"                    <td colspan='"+l((o=null!=(o=i.colSpan||(null!=t?t.colSpan:t))?o:s,"function"==typeof o?o.call(r,{name:"colSpan",hash:{},data:n}):o))+"'> "+l((i.i18n||t&&t.i18n||s).call(r,null!=t?t.title:t,{name:"i18n",hash:{},data:n}))+"</td>\n"},8:function(e,t,i,a,n){var o,r=e.lambda,s=e.escapeExpression,l=null!=t?t:{},d=i.helperMissing;return'            <div columnId="'+s(r(null!=t?t.id:t,t))+'"> CIa </div>\n            <div> '+s((i.i18n||t&&t.i18n||d).call(l,null!=t?t.title:t,{name:"i18n",hash:{},data:n}))+"</div>\n            <td rowspan='"+s((o=null!=(o=i.rowSpan||(null!=t?t.rowSpan:t))?o:d,"function"==typeof o?o.call(l,{name:"rowSpan",hash:{},data:n}):o))+"' columnId=\""+s(r(null!=t?t.id:t,t))+"\" resizable='false' style=\""+s(r(null!=t?t.id:t,t))+'">'+s((i.i18n||t&&t.i18n||d).call(l,null!=t?t.title:t,{name:"i18n",hash:{},data:n}))+s(r(null!=t?t.id:t,t))+"</td>\n"},compiler:[7,">= 4.0.0"],main:function(e,t,i,a,n){var o,r=null!=t?t:{};return'<div>\n\n    <table data-role="header">\n<tbody>\n\n        <tr>\n\n'+(null!=(o=i.each.call(r,null!=t?t.rowname:t,{name:"each",hash:{},fn:e.program(1,n,0),inverse:e.noop,data:n}))?o:"")+"\n"+(null!=(o=i.each.call(r,null!=t?t.columnHead:t,{name:"each",hash:{},fn:e.program(3,n,0),inverse:e.noop,data:n}))?o:"")+"\n        </tr>\n\n"+(null!=(o=i.each.call(r,null!=t?t.columnTail:t,{name:"each",hash:{},fn:e.program(5,n,0),inverse:e.noop,data:n}))?o:"")+'</tbody>\n    </table>\n\n\n   <!-- <div data-role="header">\n\n'+(null!=(o=i.each.call(r,null!=t?t.rowname:t,{name:"each",hash:{},fn:e.program(8,n,0),inverse:e.noop,data:n}))?o:"")+"\n    </div>-->\n</div>"},useData:!0})},function(e,t,i){e.exports=i(38).default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(){var e=new s.HandlebarsEnvironment;return u.extend(e,s),e.SafeString=d.default,e.Exception=c.default,e.Utils=u,e.escapeExpression=u.escapeExpression,e.VM=f,e.template=function(t){return f.template(t,e)},e}t.__esModule=!0;var r=i(39),s=n(r),l=i(53),d=a(l),h=i(41),c=a(h),g=i(40),u=n(g),m=i(54),f=n(m),p=i(55),S=a(p),v=o();v.create=o,S.default(v),v.default=v,t.default=v,e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e,t,i){this.helpers=e||{},this.partials=t||{},this.decorators=i||{},l.registerDefaultHelpers(this),d.registerDefaultDecorators(this)}t.__esModule=!0,t.HandlebarsEnvironment=n;var o=i(40),r=i(41),s=a(r),l=i(42),d=i(50),h=i(52),c=a(h),g="4.0.5";t.VERSION=g;var u=7;t.COMPILER_REVISION=u;var m={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1",7:">= 4.0.0"};t.REVISION_CHANGES=m;var f="[object Object]";n.prototype={constructor:n,logger:c.default,log:c.default.log,registerHelper:function(e,t){if(o.toString.call(e)===f){if(t)throw new s.default("Arg not supported with multiple helpers");o.extend(this.helpers,e)}else this.helpers[e]=t},unregisterHelper:function(e){delete this.helpers[e]},registerPartial:function(e,t){if(o.toString.call(e)===f)o.extend(this.partials,e);else{if("undefined"==typeof t)throw new s.default('Attempting to register a partial called "'+e+'" as undefined');this.partials[e]=t}},unregisterPartial:function(e){delete this.partials[e]},registerDecorator:function(e,t){if(o.toString.call(e)===f){if(t)throw new s.default("Arg not supported with multiple decorators");o.extend(this.decorators,e)}else this.decorators[e]=t},unregisterDecorator:function(e){delete this.decorators[e]}};var p=c.default.log;t.log=p,t.createFrame=o.createFrame,t.logger=c.default},function(e,t){"use strict";function i(e){return h[e]}function a(e){for(var t=1;t<arguments.length;t++)for(var i in arguments[t])Object.prototype.hasOwnProperty.call(arguments[t],i)&&(e[i]=arguments[t][i]);return e}function n(e,t){for(var i=0,a=e.length;i<a;i++)if(e[i]===t)return i;return-1}function o(e){if("string"!=typeof e){if(e&&e.toHTML)return e.toHTML();if(null==e)return"";if(!e)return e+"";e=""+e}return g.test(e)?e.replace(c,i):e}function r(e){return!e&&0!==e||!(!f(e)||0!==e.length)}function s(e){var t=a({},e);return t._parent=e,t}function l(e,t){return e.path=t,e}function d(e,t){return(e?e+".":"")+t}t.__esModule=!0,t.extend=a,t.indexOf=n,t.escapeExpression=o,t.isEmpty=r,t.createFrame=s,t.blockParams=l,t.appendContextPath=d;var h={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;","=":"&#x3D;"},c=/[&<>"'`=]/g,g=/[&<>"'`=]/,u=Object.prototype.toString;t.toString=u;var m=function(e){return"function"==typeof e};m(/x/)&&(t.isFunction=m=function(e){return"function"==typeof e&&"[object Function]"===u.call(e)}),t.isFunction=m;var f=Array.isArray||function(e){return!(!e||"object"!=typeof e)&&"[object Array]"===u.call(e)};t.isArray=f},function(e,t){"use strict";function i(e,t){var n=t&&t.loc,o=void 0,r=void 0;n&&(o=n.start.line,r=n.start.column,e+=" - "+o+":"+r);for(var s=Error.prototype.constructor.call(this,e),l=0;l<a.length;l++)this[a[l]]=s[a[l]];Error.captureStackTrace&&Error.captureStackTrace(this,i);try{n&&(this.lineNumber=o,Object.defineProperty?Object.defineProperty(this,"column",{value:r}):this.column=r)}catch(e){}}t.__esModule=!0;var a=["description","fileName","lineNumber","message","name","number","stack"];i.prototype=new Error,t.default=i,e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){r.default(e),l.default(e),h.default(e),g.default(e),m.default(e),p.default(e),v.default(e)}t.__esModule=!0,t.registerDefaultHelpers=n;var o=i(43),r=a(o),s=i(44),l=a(s),d=i(45),h=a(d),c=i(46),g=a(c),u=i(47),m=a(u),f=i(48),p=a(f),S=i(49),v=a(S)},function(e,t,i){"use strict";t.__esModule=!0;var a=i(40);t.default=function(e){e.registerHelper("blockHelperMissing",function(t,i){var n=i.inverse,o=i.fn;if(t===!0)return o(this);if(t===!1||null==t)return n(this);if(a.isArray(t))return t.length>0?(i.ids&&(i.ids=[i.name]),e.helpers.each(t,i)):n(this);if(i.data&&i.ids){var r=a.createFrame(i.data);r.contextPath=a.appendContextPath(i.data.contextPath,i.name),i={data:r}}return o(t,i)})},e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(40),o=i(41),r=a(o);t.default=function(e){e.registerHelper("each",function(e,t){function i(t,i,o){d&&(d.key=t,d.index=i,d.first=0===i,d.last=!!o,h&&(d.contextPath=h+t)),l+=a(e[t],{data:d,blockParams:n.blockParams([e[t],t],[h+t,null])})}if(!t)throw new r.default("Must pass iterator to #each");var a=t.fn,o=t.inverse,s=0,l="",d=void 0,h=void 0;if(t.data&&t.ids&&(h=n.appendContextPath(t.data.contextPath,t.ids[0])+"."),n.isFunction(e)&&(e=e.call(this)),t.data&&(d=n.createFrame(t.data)),e&&"object"==typeof e)if(n.isArray(e))for(var c=e.length;s<c;s++)s in e&&i(s,s,s===e.length-1);else{var g=void 0;for(var u in e)e.hasOwnProperty(u)&&(void 0!==g&&i(g,s-1),g=u,s++);void 0!==g&&i(g,s-1,!0)}return 0===s&&(l=o(this)),l})},e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}t.__esModule=!0;var n=i(41),o=a(n);t.default=function(e){e.registerHelper("helperMissing",function(){if(1!==arguments.length)throw new o.default('Missing helper: "'+arguments[arguments.length-1].name+'"')})},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var a=i(40);t.default=function(e){e.registerHelper("if",function(e,t){return a.isFunction(e)&&(e=e.call(this)),!t.hash.includeZero&&!e||a.isEmpty(e)?t.inverse(this):t.fn(this)}),e.registerHelper("unless",function(t,i){return e.helpers.if.call(this,t,{fn:i.inverse,inverse:i.fn,hash:i.hash})})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("log",function(){for(var t=[void 0],i=arguments[arguments.length-1],a=0;a<arguments.length-1;a++)t.push(arguments[a]);var n=1;null!=i.hash.level?n=i.hash.level:i.data&&null!=i.data.level&&(n=i.data.level),t[0]=n,e.log.apply(e,t)})},e.exports=t.default},function(e,t){"use strict";t.__esModule=!0,t.default=function(e){e.registerHelper("lookup",function(e,t){return e&&e[t]})},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var a=i(40);t.default=function(e){e.registerHelper("with",function(e,t){a.isFunction(e)&&(e=e.call(this));var i=t.fn;if(a.isEmpty(e))return t.inverse(this);var n=t.data;return t.data&&t.ids&&(n=a.createFrame(t.data),n.contextPath=a.appendContextPath(t.data.contextPath,t.ids[0])),i(e,{data:n,blockParams:a.blockParams([e],[n&&n.contextPath])})})},e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){r.default(e)}t.__esModule=!0,t.registerDefaultDecorators=n;var o=i(51),r=a(o)},function(e,t,i){"use strict";t.__esModule=!0;var a=i(40);t.default=function(e){e.registerDecorator("inline",function(e,t,i,n){var o=e;return t.partials||(t.partials={},o=function(n,o){var r=i.partials;i.partials=a.extend({},r,t.partials);var s=e(n,o);return i.partials=r,s}),t.partials[n.args[0]]=n.fn,o})},e.exports=t.default},function(e,t,i){"use strict";t.__esModule=!0;var a=i(40),n={methodMap:["debug","info","warn","error"],level:"info",lookupLevel:function(e){if("string"==typeof e){var t=a.indexOf(n.methodMap,e.toLowerCase());e=t>=0?t:parseInt(e,10)}return e},log:function(e){if(e=n.lookupLevel(e),"undefined"!=typeof console&&n.lookupLevel(n.level)<=e){var t=n.methodMap[e];console[t]||(t="log");for(var i=arguments.length,a=Array(i>1?i-1:0),o=1;o<i;o++)a[o-1]=arguments[o];console[t].apply(console,a)}}};t.default=n,e.exports=t.default},function(e,t){"use strict";function i(e){this.string=e}t.__esModule=!0,i.prototype.toString=i.prototype.toHTML=function(){return""+this.string},t.default=i,e.exports=t.default},function(e,t,i){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function n(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t.default=e,t}function o(e){var t=e&&e[0]||1,i=S.COMPILER_REVISION;if(t!==i){if(t<i){var a=S.REVISION_CHANGES[i],n=S.REVISION_CHANGES[t];throw new p.default("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+a+") or downgrade your runtime to an older version ("+n+").")}throw new p.default("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+e[1]+").")}}function r(e,t){function i(i,a,n){n.hash&&(a=m.extend({},a,n.hash),n.ids&&(n.ids[0]=!0)),i=t.VM.resolvePartial.call(this,i,a,n);var o=t.VM.invokePartial.call(this,i,a,n);if(null==o&&t.compile&&(n.partials[n.name]=t.compile(i,e.compilerOptions,t),o=n.partials[n.name](a,n)),null!=o){if(n.indent){for(var r=o.split("\n"),s=0,l=r.length;s<l&&(r[s]||s+1!==l);s++)r[s]=n.indent+r[s];o=r.join("\n")}return o}throw new p.default("The partial "+n.name+" could not be compiled when running in runtime-only mode")}function a(t){function i(t){return""+e.main(n,t,n.helpers,n.partials,r,l,s)}var o=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=o.data;a._setup(o),!o.partial&&e.useData&&(r=c(t,r));var s=void 0,l=e.useBlockParams?[]:void 0;return e.useDepths&&(s=o.depths?t!=o.depths[0]?[t].concat(o.depths):o.depths:[t]),(i=g(e.main,i,n,o.depths||[],r,l))(t,o)}if(!t)throw new p.default("No environment passed to template");if(!e||!e.main)throw new p.default("Unknown template object: "+typeof e);e.main.decorator=e.main_d,t.VM.checkRevision(e.compiler);var n={strict:function(e,t){if(!(t in e))throw new p.default('"'+t+'" not defined in '+e);return e[t]},lookup:function(e,t){for(var i=e.length,a=0;a<i;a++)if(e[a]&&null!=e[a][t])return e[a][t]},lambda:function(e,t){return"function"==typeof e?e.call(t):e},escapeExpression:m.escapeExpression,invokePartial:i,fn:function(t){var i=e[t];return i.decorator=e[t+"_d"],i},programs:[],program:function(e,t,i,a,n){var o=this.programs[e],r=this.fn(e);return t||n||a||i?o=s(this,e,r,t,i,a,n):o||(o=this.programs[e]=s(this,e,r)),o},data:function(e,t){for(;e&&t--;)e=e._parent;return e},merge:function(e,t){var i=e||t;return e&&t&&e!==t&&(i=m.extend({},t,e)),i},noop:t.VM.noop,compilerInfo:e.compiler};return a.isTop=!0,a._setup=function(i){i.partial?(n.helpers=i.helpers,n.partials=i.partials,n.decorators=i.decorators):(n.helpers=n.merge(i.helpers,t.helpers),e.usePartial&&(n.partials=n.merge(i.partials,t.partials)),(e.usePartial||e.useDecorators)&&(n.decorators=n.merge(i.decorators,t.decorators)))},a._child=function(t,i,a,o){if(e.useBlockParams&&!a)throw new p.default("must pass block params");if(e.useDepths&&!o)throw new p.default("must pass parent depths");return s(n,t,e[t],i,0,a,o)},a}function s(e,t,i,a,n,o,r){function s(t){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],s=r;return r&&t!=r[0]&&(s=[t].concat(r)),i(e,t,e.helpers,e.partials,n.data||a,o&&[n.blockParams].concat(o),s)}return s=g(i,s,e,r,a,o),s.program=t,s.depth=r?r.length:0,s.blockParams=n||0,s}function l(e,t,i){if(e)e.call||i.name||(i.name=e,e=i.partials[e]);else if("@partial-block"===i.name){for(var a=i.data;a["partial-block"]===h;)a=a._parent;e=a["partial-block"],a["partial-block"]=h}else e=i.partials[i.name];return e}function d(e,t,i){i.partial=!0,i.ids&&(i.data.contextPath=i.ids[0]||i.data.contextPath);var a=void 0;if(i.fn&&i.fn!==h&&(i.data=S.createFrame(i.data),a=i.data["partial-block"]=i.fn,a.partials&&(i.partials=m.extend({},i.partials,a.partials))),void 0===e&&a&&(e=a),void 0===e)throw new p.default("The partial "+i.name+" could not be found");if(e instanceof Function)return e(t,i)}function h(){return""}function c(e,t){return t&&"root"in t||(t=t?S.createFrame(t):{},t.root=e),t}function g(e,t,i,a,n,o){if(e.decorator){var r={};t=e.decorator(t,r,i,a&&a[0],n,o,a),m.extend(t,r)}return t}t.__esModule=!0,t.checkRevision=o,t.template=r,t.wrapProgram=s,t.resolvePartial=l,t.invokePartial=d,t.noop=h;var u=i(40),m=n(u),f=i(41),p=a(f),S=i(39)},function(e,t){(function(i){"use strict";t.__esModule=!0,t.default=function(e){var t="undefined"!=typeof i?i:window,a=t.Handlebars;e.noConflict=function(){return t.Handlebars===e&&(t.Handlebars=a),e}},e.exports=t.default}).call(t,function(){return this}())},function(e,t,i){var a;a=function(){"use strict";return{width:"100%",height:"370",replaceContainer:!1,pageSize:15,pageSizeList:[15,25,50,150],SigmaGridPath:"grid/",toolbarContent:"nav | goto | pagesize "}}.call(t,i,t,e),!(void 0!==a&&(e.exports=a))}])});
//# sourceMappingURL=fenix-ui-table-creator.min.js.map